1
00:00:01,000 --> 00:00:04,630
[MUSIC]

2
00:00:04,630 --> 00:00:07,930
Stanford University.

3
00:00:07,940 --> 00:00:11,970
Okay, well, welcome to lecture 7 of CS193P.

4
00:00:11,970 --> 00:00:14,240
This is the winter of 2015.

5
00:00:14,240 --> 00:00:16,070
And today,

6
00:00:16,080 --> 00:00:19,180
we are going to talk about multiple MVCs, all right?

7
00:00:19,180 --> 00:00:21,110
That includes split view controller,

8
00:00:21,110 --> 00:00:22,150
navigation controller.

9
00:00:22,150 --> 00:00:24,150
We talked about tab bar controller a little bit

10
00:00:24,150 --> 00:00:25,380
last time.

11
00:00:25,380 --> 00:00:27,920
We're also gonna talk about segues which is how we make

12
00:00:27,920 --> 00:00:32,820
all those multiple MVCs kind of transition to each other.

13
00:00:32,820 --> 00:00:35,590
And I have a big demo that shows it all off.

14
00:00:35,590 --> 00:00:37,990
And that after that demo I'll come back.

15
00:00:37,990 --> 00:00:42,130
We'll talk about popovers which are similar thing for

16
00:00:42,130 --> 00:00:44,830
having multiple MVCs but are not quite the same.

17
00:00:44,830 --> 00:00:46,170
So that's why I've kind of

18
00:00:46,170 --> 00:00:47,500
segregated them off to the end.

19
00:00:47,500 --> 00:00:49,440
And we'll have a demo about that.

20
00:00:50,640 --> 00:00:52,600
All right. So MVCs working together.

21
00:00:52,610 --> 00:00:55,910
These are the slide we saw at the end of last time.

22
00:00:55,910 --> 00:00:58,980
We're trying to build apps by taking our MVCs and combining

23
00:00:58,980 --> 00:01:02,580
them with tab bar, split view, and navigation controller.

24
00:01:02,580 --> 00:01:04,420
We talked about tab bar controller which is

25
00:01:04,420 --> 00:01:06,980
just simply four or five or however many

26
00:01:06,990 --> 00:01:10,790
MVCs all connected by just having this little tab bar so

27
00:01:10,790 --> 00:01:13,460
the bottom just picks which MVC you want to see.

28
00:01:13,460 --> 00:01:16,260
Each MVC by the way in the tab bar's completely independent.

29
00:01:16,260 --> 00:01:17,230
It runs on its own.

30
00:01:17,230 --> 00:01:19,090
It doesn't depend on the other ones.

31
00:01:19,100 --> 00:01:21,030
It actually might be kind of bad object on your

32
00:01:21,030 --> 00:01:23,430
programming really for them to depend on the other one.

33
00:01:23,430 --> 00:01:27,340
So, tab bars for peers that aren't really talking to each

34
00:01:27,340 --> 00:01:30,870
other they're just working together, they're related.

35
00:01:30,870 --> 00:01:32,440
Maybe they share a model and

36
00:01:32,440 --> 00:01:35,410
they're each having a different part of the model

37
00:01:35,410 --> 00:01:36,580
or whatever.

38
00:01:36,580 --> 00:01:37,740
And then we talked about split view controller,

39
00:01:37,750 --> 00:01:41,350
which only has two MVCs in it, a master, and a detail.

40
00:01:41,350 --> 00:01:42,950
We call them master and detail, by the way,

41
00:01:42,950 --> 00:01:46,120
because the master is usually the one determining what's in

42
00:01:46,120 --> 00:01:47,570
the detail.

43
00:01:47,570 --> 00:01:49,020
So the master is letting you view something,

44
00:01:49,020 --> 00:01:52,060
and then you're going to use the detail to see more detail

45
00:01:52,060 --> 00:01:54,090
about what you're doing in the master, okay?

46
00:01:54,090 --> 00:01:57,330
So that's why we call it master and detail.

47
00:01:57,330 --> 00:02:00,400
So we're going to pick up now with navigation controller.

48
00:02:00,400 --> 00:02:03,900
So navigation controller is just yet another MVC whose

49
00:02:03,900 --> 00:02:07,800
view is multiple of other MVCs and navigation controller can

50
00:02:07,810 --> 00:02:09,970
handle any number of other MVCs.

51
00:02:09,970 --> 00:02:11,270
Okay.

52
00:02:11,280 --> 00:02:14,810
And it puts them on screen, it shares the screen instead of

53
00:02:14,810 --> 00:02:17,550
just putting them side by side or putting them with the tabs,

54
00:02:17,550 --> 00:02:20,010
it puts them like a stack of cards.

55
00:02:20,020 --> 00:02:21,150
Okay?

56
00:02:21,150 --> 00:02:22,280
So NavigationController's basically stacking them

57
00:02:22,280 --> 00:02:24,080
like cards and you can only see the one on top.

58
00:02:25,290 --> 00:02:26,920
That's how NavigationController

59
00:02:26,920 --> 00:02:29,460
shares the small screen space between multiple MVCs.

60
00:02:29,460 --> 00:02:31,560
So it's gonna stack these MVCs up.

61
00:02:31,560 --> 00:02:33,890
So here's a NavigationController.

62
00:02:33,890 --> 00:02:35,530
And it's got an MVC in it.

63
00:02:35,530 --> 00:02:39,200
This is the All Settings MVC from your device.

64
00:02:39,200 --> 00:02:40,870
If you go look in your iPhone or

65
00:02:40,870 --> 00:02:42,530
whatever, you'll see the settings app looks like this.

66
00:02:42,540 --> 00:02:45,200
So this is just an MVC that's kind of the top level.

67
00:02:45,200 --> 00:02:49,040
Has all the settings accessible from here.

68
00:02:49,040 --> 00:02:53,780
Now the navigation controller is drawing only a little part

69
00:02:53,780 --> 00:02:57,410
of it's view here, which is that title bar.

70
00:02:57,420 --> 00:02:59,950
And the navigational controller will put the title

71
00:02:59,950 --> 00:03:02,550
there, and also you can have a couple of buttons up at

72
00:03:02,550 --> 00:03:05,490
the top and the navigational controller draws that part.

73
00:03:05,490 --> 00:03:06,820
The rest of it is totally drawn,

74
00:03:06,820 --> 00:03:10,390
and even underneath that title bar, totally drawn by

75
00:03:10,390 --> 00:03:13,660
whatever MVC is on top of this stack of cards.

76
00:03:13,660 --> 00:03:14,930
Okay, and right now the only thing on

77
00:03:14,930 --> 00:03:18,700
our stack of cards is this All Settings MVC.

78
00:03:18,700 --> 00:03:19,870
Now even though the contents of

79
00:03:19,870 --> 00:03:22,700
the top are drawn by the navigation controller, what

80
00:03:22,700 --> 00:03:27,340
the contents are is determined by the MVC that's showing.

81
00:03:27,340 --> 00:03:28,710
Okay? And that's done with this

82
00:03:28,710 --> 00:03:31,580
UIViewController property called navigationItem.

83
00:03:31,580 --> 00:03:33,040
So if you go look in the documentation for

84
00:03:33,050 --> 00:03:35,510
UIViewController you'll see this property navigationItem.

85
00:03:35,510 --> 00:03:39,720
If you click through to the type UINavigation item you'll

86
00:03:39,720 --> 00:03:41,780
see that it's got a lot of properties and

87
00:03:41,790 --> 00:03:45,690
they're like left button, right button, title.

88
00:03:45,690 --> 00:03:47,540
Things like that. So,

89
00:03:47,540 --> 00:03:49,390
the way the navigation controllers figures out

90
00:03:49,390 --> 00:03:52,590
what to put in the top bar is it asks whatever MVC is on

91
00:03:52,600 --> 00:03:54,100
top of the stack.

92
00:03:54,100 --> 00:03:56,900
So as you go to different MVCs being on this stack of

93
00:03:56,900 --> 00:03:59,200
cards that thing at the top will change.

94
00:04:00,300 --> 00:04:01,200
Okay?

95
00:04:01,200 --> 00:04:04,470
So, let's say I click on General here,

96
00:04:04,470 --> 00:04:06,070
because I want to see general settings.

97
00:04:06,070 --> 00:04:09,770
Okay, so I click on it, and a new MVC gets put on top of

98
00:04:09,780 --> 00:04:12,910
the stack of cards, so now I can't see the other one, okay?

99
00:04:12,910 --> 00:04:14,180
This new one is overlaying it,

100
00:04:14,180 --> 00:04:17,050
and this is just a general settings MVC.

101
00:04:17,050 --> 00:04:19,680
Completely different MVC,

102
00:04:19,680 --> 00:04:22,320
completely independent of the other one working on its own.

103
00:04:22,320 --> 00:04:23,650
By the way,

104
00:04:23,650 --> 00:04:24,990
I don't have a good screenshot of this unfortunately, but

105
00:04:24,990 --> 00:04:27,720
it's also possible for the navigation controller to

106
00:04:27,730 --> 00:04:31,730
draw some buttons along the bottom there.

107
00:04:31,730 --> 00:04:33,190
A little small sliver on the bottom.

108
00:04:33,200 --> 00:04:36,400
And it get those button items to put there,

109
00:04:36,400 --> 00:04:40,000
by asking the MVC that's on top of the stack of cards for

110
00:04:40,000 --> 00:04:42,670
the toolbar items property.

111
00:04:42,670 --> 00:04:43,870
So if you look at toolbar items,

112
00:04:43,870 --> 00:04:47,240
it's just an array of these bar buttons, so

113
00:04:47,240 --> 00:04:50,080
any MVC that returns anything in that array,

114
00:04:50,080 --> 00:04:52,140
when it's in a navigation controller like this,

115
00:04:52,150 --> 00:04:54,280
those buttons will appear at the bottom.

116
00:04:54,280 --> 00:04:55,710
So those would change each time you go

117
00:04:55,720 --> 00:04:58,320
to the next thing on the stack as well.

118
00:04:58,320 --> 00:05:00,920
So let's go ahead and click on something here.

119
00:05:01,920 --> 00:05:04,720
Let's click on, oh sorry, the back button.

120
00:05:04,720 --> 00:05:07,290
Yeah, you see there's a back button in the upper left.

121
00:05:07,290 --> 00:05:11,090
The back button says, Throw the top card off.

122
00:05:11,100 --> 00:05:12,260
That's basically what back means.

123
00:05:12,260 --> 00:05:14,250
Throw the top card on

124
00:05:14,250 --> 00:05:16,230
this stack of MVCs that we're building, throw it off, and

125
00:05:16,230 --> 00:05:18,000
then I'm going to go back to where I was before.

126
00:05:18,000 --> 00:05:19,670
So that's how back works, it just throws it off.

127
00:05:19,670 --> 00:05:21,570
And when it throws it off, it completely throws it off,

128
00:05:21,570 --> 00:05:22,800
it disappears.

129
00:05:22,810 --> 00:05:23,500
Completely gone.

130
00:05:23,510 --> 00:05:24,400
All right?

131
00:05:24,410 --> 00:05:27,170
Out of the heep, okay?

132
00:05:27,180 --> 00:05:30,010
All right, so let's put another card on the stacks,

133
00:05:30,010 --> 00:05:32,140
I'm going to click on accessibility here,

134
00:05:32,150 --> 00:05:34,350
another card's going to slide in,

135
00:05:34,350 --> 00:05:39,380
I'm trying to simulate the animation of it but in keynote

136
00:05:39,390 --> 00:05:42,290
I can't exactly do it, but it slides in from the side.

137
00:05:42,290 --> 00:05:44,710
And this is yet

138
00:05:44,710 --> 00:05:47,120
another completely different MVC, the accessibility MVC.

139
00:05:47,130 --> 00:05:48,460
And we can pick something out of here,

140
00:05:48,460 --> 00:05:51,060
like I'm going to pick larger text right there, and

141
00:05:51,060 --> 00:05:52,900
another MVC is going to slide in.

142
00:05:52,900 --> 00:05:55,530
So we have four MVCs, totally different MVCs,

143
00:05:55,530 --> 00:05:57,530
on our stack of cards right here.

144
00:05:57,540 --> 00:06:00,400
And the one on top, which is the last one that I chose,

145
00:06:00,400 --> 00:06:02,600
this larger text MVC, is showing.

146
00:06:02,610 --> 00:06:03,840
Okay? The rest of them are there,

147
00:06:03,840 --> 00:06:05,670
you just can't see

148
00:06:05,670 --> 00:06:07,510
them because they're underneath this top card.

149
00:06:07,510 --> 00:06:08,940
Okay, so now let's do the back button.

150
00:06:08,950 --> 00:06:12,350
So I'm going to click this back button in the upper left

151
00:06:12,350 --> 00:06:15,420
and when I do, it takes that larger text one off, throws it

152
00:06:15,420 --> 00:06:18,750
out, and now we've got the accessibility card, which is

153
00:06:18,750 --> 00:06:22,320
now the top of our stack which only has three things on it.

154
00:06:22,320 --> 00:06:23,690
And we can do back again.

155
00:06:23,690 --> 00:06:25,690
It goes back to the general one.

156
00:06:25,690 --> 00:06:26,560
We do back again.

157
00:06:26,560 --> 00:06:28,490
It goes back to the very top.

158
00:06:28,490 --> 00:06:30,430
Of course, once we get back to the very top there's no

159
00:06:30,430 --> 00:06:33,700
more back button because this is the only card on the stack.

160
00:06:33,700 --> 00:06:34,870
Okay, so everyone understand what

161
00:06:34,870 --> 00:06:35,800
a NavigationController is?

162
00:06:35,800 --> 00:06:37,230
It's just a stack of MVCs.

163
00:06:37,240 --> 00:06:38,370
All right?

164
00:06:38,370 --> 00:06:40,600
But it's just like split view controller and

165
00:06:40,610 --> 00:06:44,370
UITabBar Controller in that it is showing multiple MVCs.

166
00:06:44,380 --> 00:06:45,970
So I'm going talk a little bit about how navigation

167
00:06:45,980 --> 00:06:49,080
controller works internally, so you can get a feel for it.

168
00:06:49,080 --> 00:06:52,950
And I'm going to try to mix it with our MVC image that we

169
00:06:52,950 --> 00:06:56,220
had so you can kind of combine the two concepts in your mind.

170
00:06:56,220 --> 00:06:58,690
So, let's say I had an MVC.

171
00:06:58,690 --> 00:07:01,490
This one up here, the purple MVC thing.

172
00:07:01,490 --> 00:07:04,420
And I had more features I wanted to put on there, but

173
00:07:04,430 --> 00:07:06,430
there's just not enough room on the screen anymore,

174
00:07:06,430 --> 00:07:07,830
I've kind of maxed out.

175
00:07:07,830 --> 00:07:10,400
Or it's just those features don't logically make sense to

176
00:07:10,400 --> 00:07:12,100
be in the same place.

177
00:07:12,100 --> 00:07:15,300
Well, what I would do is create another MVC to manage

178
00:07:15,300 --> 00:07:18,300
those other features that won't fit,okay?

179
00:07:18,310 --> 00:07:22,710
And, so now though I need a way to have those two MVCs

180
00:07:22,710 --> 00:07:25,140
share the screen and I can use a split view controller or

181
00:07:25,140 --> 00:07:27,140
tab bar controller if they were peers or

182
00:07:27,150 --> 00:07:28,910
I could use navigation controller.

183
00:07:28,910 --> 00:07:30,280
So, let's see what it would look like to

184
00:07:30,280 --> 00:07:33,950
use a navigation controller to have these two MVCs which

185
00:07:33,950 --> 00:07:36,990
they're related share the screen.

186
00:07:36,990 --> 00:07:40,220
So a navigation controller is just an MVC, okay?

187
00:07:40,220 --> 00:07:42,810
It's a controller of an MVC.

188
00:07:42,810 --> 00:07:45,390
And it's view is a little rectangular area that usually

189
00:07:45,400 --> 00:07:47,930
fills the entire screen or a portion of the screen.

190
00:07:47,930 --> 00:07:48,860
It's got the title.

191
00:07:48,870 --> 00:07:53,000
But it's a special MVC and they've just got an outlet

192
00:07:53,000 --> 00:07:56,070
called Root View Controller that points to an MVC.

193
00:07:56,070 --> 00:07:59,440
[UUU] points to the controller of an MVC.

194
00:07:59,440 --> 00:08:03,240
And when it is pointing to that, then the navigation

195
00:08:03,240 --> 00:08:08,080
controller puts that MVC's view, okay, its view property.

196
00:08:08,080 --> 00:08:09,680
All right, we know that UIVController has

197
00:08:09,680 --> 00:08:11,320
this very important property called view,

198
00:08:11,320 --> 00:08:12,980
which is its top level of its view.

199
00:08:12,990 --> 00:08:16,520
It puts that on the screen underneath this title thing.

200
00:08:16,520 --> 00:08:18,860
So it fills the entire rectangular area and

201
00:08:18,860 --> 00:08:21,190
then the title kind of overlaps it transparently,

202
00:08:21,190 --> 00:08:25,060
semi-lucent transparency.

203
00:08:25,060 --> 00:08:25,730
Okay?

204
00:08:25,730 --> 00:08:26,860
So that's great.

205
00:08:26,860 --> 00:08:28,480
So we got it in there.

206
00:08:28,480 --> 00:08:30,100
Now how do we get the other MVC on?

207
00:08:30,100 --> 00:08:33,170
Well, when a ui element inside the view of

208
00:08:33,170 --> 00:08:35,970
this MVC like a button or something like that

209
00:08:35,970 --> 00:08:40,110
is pressed then it can cause another MVC to get created.

210
00:08:40,110 --> 00:08:42,010
You notice that MVC just appeared?

211
00:08:42,010 --> 00:08:43,310
It wasn't there before.

212
00:08:43,310 --> 00:08:46,080
But as soon as the button gets pressed in this guy's view,

213
00:08:46,080 --> 00:08:48,250
this MVC's view, that thing gets created.

214
00:08:48,250 --> 00:08:50,880
And that's something important to notice that we're always

215
00:08:50,890 --> 00:08:54,350
going to be creating a new MVC when we do these transitions.

216
00:08:54,360 --> 00:08:56,520
Okay? Transitioning to a new card.

217
00:08:56,520 --> 00:08:58,060
In a split view,

218
00:08:58,060 --> 00:08:59,590
we do something in the master that changes the detail.

219
00:08:59,590 --> 00:09:00,890
That's always creating a new,

220
00:09:00,890 --> 00:09:03,160
even the first time we press a tab bar, but

221
00:09:03,160 --> 00:09:06,230
only the first time for the tab bar, it creates a new MVC.

222
00:09:06,230 --> 00:09:07,730
Okay? So it creates this new MVC.

223
00:09:07,730 --> 00:09:10,470
And then the NavigationController just

224
00:09:10,470 --> 00:09:13,270
moves over to put that MVC's view on top.

225
00:09:13,270 --> 00:09:15,000
All right?

226
00:09:15,010 --> 00:09:16,840
And then of course you've got the back button.

227
00:09:16,840 --> 00:09:18,310
When you click the back button,

228
00:09:18,310 --> 00:09:20,640
it goes back to the first MVC.

229
00:09:20,640 --> 00:09:22,580
And look what happens to that MVC.

230
00:09:22,580 --> 00:09:23,780
Gone.

231
00:09:23,780 --> 00:09:25,010
Okay.

232
00:09:25,010 --> 00:09:26,350
That is not hidden or something.

233
00:09:26,350 --> 00:09:28,220
It's just gone.

234
00:09:28,220 --> 00:09:30,080
It got de-allocated probably from the heat.

235
00:09:30,090 --> 00:09:31,380
Okay? And then we're back to here.

236
00:09:32,590 --> 00:09:34,350
Okay, so that's how navigation controller works.

237
00:09:34,360 --> 00:09:35,300
Very simple.

238
00:09:35,310 --> 00:09:36,250
And, you know, split view and

239
00:09:36,260 --> 00:09:38,420
tab bar are similar kind of mechanism.

240
00:09:39,690 --> 00:09:41,780
Okay. So

241
00:09:41,780 --> 00:09:43,860
how do we get at these sub-MVCs?

242
00:09:43,860 --> 00:09:45,960
So let's say I had a split view controller or

243
00:09:45,960 --> 00:09:47,530
a navigation controller or a tab bar controller.

244
00:09:47,530 --> 00:09:50,170
How do I get at the things on the stack of cards,

245
00:09:50,170 --> 00:09:52,970
or the two things the master and detail?

246
00:09:52,970 --> 00:09:54,840
And the answer is

247
00:09:54,840 --> 00:09:56,710
they all have a property called view controllers.

248
00:09:56,710 --> 00:09:58,870
And it's an array of view controller.

249
00:09:58,880 --> 00:10:00,490
Okay?

250
00:10:00,490 --> 00:10:02,110
And that it's all the view controllers in a system.

251
00:10:02,110 --> 00:10:05,110
So in a split view, there will be only two in there,

252
00:10:05,110 --> 00:10:07,550
the master and the detail, in the tab bar there will be how

253
00:10:07,550 --> 00:10:09,650
ever many tabs there are, in a navigation controller there

254
00:10:09,650 --> 00:10:11,720
will be however many cards are on the stack.

255
00:10:11,720 --> 00:10:13,050
That's how many things will be in that array.

256
00:10:13,050 --> 00:10:15,420
And it's settable too which is a little weird,

257
00:10:15,420 --> 00:10:19,090
we don't usually set things but you can do it.

258
00:10:19,090 --> 00:10:23,800
And the way we usually set it is we're going to

259
00:10:23,800 --> 00:10:26,600
do it in the story boards or navigation controller for

260
00:10:26,600 --> 00:10:29,300
example has methods like push and pop view controller that

261
00:10:29,300 --> 00:10:31,400
will push view controller onto the stack.

262
00:10:31,400 --> 00:10:32,640
But that is doing that in code and

263
00:10:32,640 --> 00:10:35,210
we are usually doing all of this stuff in story boards.

264
00:10:35,210 --> 00:10:38,910
So that's how you get at the sub things of

265
00:10:38,910 --> 00:10:41,740
these three kinds of view controllers.

266
00:10:41,750 --> 00:10:44,550
What about, how do I get a hold of the view controller?

267
00:10:44,550 --> 00:10:45,480
Okay? How do I get that

268
00:10:45,480 --> 00:10:46,550
navigation controller?

269
00:10:46,550 --> 00:10:48,620
How do I get a pointer to it, or whatever?

270
00:10:48,620 --> 00:10:52,420
Well it turns out every view controller knows if it's

271
00:10:52,420 --> 00:10:55,660
inside a navigation controller or if it's inside a split-view

272
00:10:55,660 --> 00:10:57,590
controller, or if it's inside a tab bar controller.

273
00:10:57,590 --> 00:10:59,310
It knows.

274
00:10:59,310 --> 00:11:01,030
And so UI view controller has these three properties: tab

275
00:11:01,030 --> 00:11:02,360
bar controller, split view controller,

276
00:11:02,360 --> 00:11:03,560
navigation controller.

277
00:11:03,560 --> 00:11:05,530
And they will return to you the split view

278
00:11:05,530 --> 00:11:07,470
controller that the view controller is in.

279
00:11:07,470 --> 00:11:09,030
Okay?

280
00:11:09,040 --> 00:11:11,070
If it's in one, if it's not then it returns nil.

281
00:11:11,070 --> 00:11:12,940
And notice some view controllers might be inside a

282
00:11:12,940 --> 00:11:15,510
navigation controller, inside a split view controller.

283
00:11:16,440 --> 00:11:17,770
So more than one of these things can be

284
00:11:17,780 --> 00:11:19,790
non-nil at a time.

285
00:11:19,790 --> 00:11:21,810
Because we can nest these things to build more powerful

286
00:11:21,810 --> 00:11:23,960
user interfaces.

287
00:11:23,960 --> 00:11:26,110
So let's just use the example, if I'm the master in

288
00:11:26,120 --> 00:11:28,720
a split view, and I want to get the detail.

289
00:11:28,720 --> 00:11:30,920
Well I can get the split view controller I'm in by

290
00:11:30,920 --> 00:11:32,390
saying split view controller.

291
00:11:32,390 --> 00:11:33,720
I'll put the little question mark there,

292
00:11:33,720 --> 00:11:34,860
that's optional chaining.

293
00:11:34,860 --> 00:11:36,010
If it's nil,

294
00:11:36,010 --> 00:11:37,160
then I'm obviously not going to get my detail.

295
00:11:37,160 --> 00:11:39,260
And then I'm going to say view controller sub 1,

296
00:11:39,260 --> 00:11:40,960
because we know that view controller sub 1 in

297
00:11:40,960 --> 00:11:43,100
split controller is the detail.

298
00:11:43,100 --> 00:11:44,830
So now I've got the detail and

299
00:11:44,830 --> 00:11:46,570
I can talk to it I could, you know, get to my detail.

300
00:11:46,570 --> 00:11:47,830
So presumably I might want to tell it to

301
00:11:47,840 --> 00:11:50,800
do things display things or whatever, okay?

302
00:11:52,010 --> 00:11:55,170
So that's how we get at these things in code if we need to,

303
00:11:55,180 --> 00:11:58,240
but we often don't need to because we can manage most of

304
00:11:58,240 --> 00:11:59,640
this in the story board.

305
00:11:59,650 --> 00:12:02,550
And so how do we wire this up, how do we create this

306
00:12:02,550 --> 00:12:05,720
relationship between these split through tab bar and

307
00:12:05,720 --> 00:12:08,920
navigation controller and these all the sub-MVCs.

308
00:12:08,920 --> 00:12:11,750
And it can be done in code, okay?

309
00:12:11,760 --> 00:12:12,890
But we're gonna do it

310
00:12:12,890 --> 00:12:15,390
in storyboards in this class all the time.

311
00:12:15,390 --> 00:12:17,190
Okay. And we're just

312
00:12:17,190 --> 00:12:18,990
gonna use Ctrl + drag to do it.

313
00:12:19,000 --> 00:12:20,500
So let's see what that looks like.

314
00:12:20,500 --> 00:12:22,630
I'll do it for split view controller,

315
00:12:22,630 --> 00:12:24,330
we're just going to go the utilities area,

316
00:12:24,330 --> 00:12:26,970
the same place we drag out a button or something like that.

317
00:12:26,970 --> 00:12:29,300
We're going to drag out a split view controller.

318
00:12:29,300 --> 00:12:30,600
Now, when it comes out,

319
00:12:30,610 --> 00:12:33,410
it's going to come out with a whole bunch of other MVCs

320
00:12:33,410 --> 00:12:35,910
pre-attached to it in attempt to help you, but

321
00:12:35,910 --> 00:12:38,280
usually you're just going to delete those so

322
00:12:38,280 --> 00:12:41,410
that all you have left is the split view controller itself.

323
00:12:41,420 --> 00:12:43,280
Okay?

324
00:12:43,280 --> 00:12:45,150
And then you're going to Ctrl+Drag from the split view

325
00:12:45,150 --> 00:12:46,720
controller to the master and

326
00:12:46,720 --> 00:12:50,120
Ctrl+Drag from the split view controller to the detail.

327
00:12:50,120 --> 00:12:51,150
And that's how you are going to do the wire.

328
00:12:51,160 --> 00:12:52,360
So this is what it looks like.

329
00:12:52,360 --> 00:12:53,620
Here I have a storyboard.

330
00:12:53,630 --> 00:12:55,120
I've dragged out of split view controller.

331
00:12:55,130 --> 00:12:56,990
That's that gray thing on the left.

332
00:12:56,990 --> 00:12:58,190
Okay?

333
00:12:58,190 --> 00:12:59,390
I deleted all the things it was attached to so

334
00:12:59,400 --> 00:13:00,360
I just had that.

335
00:13:00,360 --> 00:13:02,730
Then I Ctrl+Drag to,

336
00:13:02,730 --> 00:13:05,500
in this case my master, which is my calculator.

337
00:13:05,500 --> 00:13:08,400
When I do that, it's going to put up this little thing says

338
00:13:08,400 --> 00:13:10,140
okay, what kind of connection do you want to make?

339
00:13:10,140 --> 00:13:13,270
And you're going to pick master view controller there.

340
00:13:13,280 --> 00:13:15,540
And that's going to make like a little connection to it.

341
00:13:15,540 --> 00:13:18,280
And then I'm going to Ctrl+Drag down to my detail,

342
00:13:18,280 --> 00:13:20,980
which is going to be the right side of my split view.

343
00:13:20,980 --> 00:13:23,320
And here I'm going to choose I want Detailed View Controller.

344
00:13:23,320 --> 00:13:25,180
Okay?

345
00:13:25,190 --> 00:13:26,720
And then I'm going to have this,

346
00:13:26,720 --> 00:13:28,050
fully hooked up split view.

347
00:13:28,050 --> 00:13:29,090
And that's it.

348
00:13:29,090 --> 00:13:31,290
So it's very easy to hook these things up.

349
00:13:31,290 --> 00:13:32,570
All right, and tab bar,

350
00:13:32,570 --> 00:13:33,860
you can hook up exactly the same way.

351
00:13:33,860 --> 00:13:36,130
Connect as many of them as you want, okay?

352
00:13:36,130 --> 00:13:38,290
Navigation controllers can be done a little bit differently,

353
00:13:38,300 --> 00:13:39,730
which we'll see in a second, okay?

354
00:13:41,030 --> 00:13:45,130
But there's a problem here which is that a split view

355
00:13:45,140 --> 00:13:48,970
can't display side by side on an iPhone.

356
00:13:48,970 --> 00:13:50,900
Or at least not anything but an iPhone 6 plus.

357
00:13:50,910 --> 00:13:54,070
That's the only one big enough to really display side

358
00:13:54,080 --> 00:13:55,530
by side.

359
00:13:55,530 --> 00:13:56,980
So a split view really can't work on an iPhone.

360
00:13:56,980 --> 00:13:59,500
Okay?

361
00:13:59,500 --> 00:14:02,020
The way we handle this is that iOS adapts its

362
00:14:02,020 --> 00:14:07,220
user interface to whatever device it happens to be on,

363
00:14:07,220 --> 00:14:10,590
depending on how its size class is.

364
00:14:10,590 --> 00:14:13,930
We'll talk about size classes later, but if it's compact,

365
00:14:13,930 --> 00:14:17,730
like a phone, then it can't show it in a split view.

366
00:14:17,730 --> 00:14:19,300
So how can I show it then?

367
00:14:19,300 --> 00:14:21,030
If I have it master in a detail and

368
00:14:21,030 --> 00:14:24,030
I wanna show it on an iPhone the way I show it is with

369
00:14:24,040 --> 00:14:25,800
a navigation controller.

370
00:14:25,800 --> 00:14:26,940
So instead of having master and

371
00:14:26,940 --> 00:14:28,900
detail on the screen at the same time on an iPad,

372
00:14:28,910 --> 00:14:32,810
on the phone when I click in the master, same button that I

373
00:14:32,810 --> 00:14:35,610
clicked to make the detail show it in split view,

374
00:14:35,610 --> 00:14:38,410
but when I click in the master on the iPhone is going to

375
00:14:38,420 --> 00:14:41,150
slide the detail on as a card.

376
00:14:41,150 --> 00:14:41,980
On the deck.

377
00:14:41,980 --> 00:14:42,880
All right.

378
00:14:42,890 --> 00:14:44,850
On the navigation charts stack.

379
00:14:44,850 --> 00:14:46,450
Now the thing is though we want to

380
00:14:46,450 --> 00:14:48,650
build one storyboard that will work for

381
00:14:48,660 --> 00:14:51,820
both platforms and automatically adapts.

382
00:14:51,830 --> 00:14:52,960
So how do we do that?

383
00:14:52,960 --> 00:14:56,330
We're just going to wrap our master in

384
00:14:56,330 --> 00:14:58,730
a navigation controller.

385
00:14:58,730 --> 00:15:00,870
So here is a Navigation Controller,

386
00:15:00,870 --> 00:15:04,130
which is my master, it's the calculator, right?

387
00:15:04,140 --> 00:15:06,140
And you can see it's hooked up to the split view already, and

388
00:15:06,140 --> 00:15:08,710
I'm just gonna select it, and then I'm gonna go to

389
00:15:08,710 --> 00:15:13,810
the Editor menu and pick Embed in Navigation Controller.

390
00:15:13,810 --> 00:15:14,740
See that embed?

391
00:15:14,750 --> 00:15:15,680
And this is what's gonna happen.

392
00:15:17,880 --> 00:15:19,280
Okay, the Navigation Controller,

393
00:15:19,280 --> 00:15:23,850
is going to the interposed between the split view and

394
00:15:23,850 --> 00:15:25,420
the master.

395
00:15:25,420 --> 00:15:26,990
So now the master, is in a Navigation Controller.

396
00:15:27,990 --> 00:15:31,190
Now if I am on an iPhone, and I click in something

397
00:15:31,190 --> 00:15:34,260
that would change the detail, then it's going to push it

398
00:15:34,260 --> 00:15:37,600
on that Navigation Controller, on top of the stack.

399
00:15:37,600 --> 00:15:39,330
But if I am on an iPad it's going to

400
00:15:39,330 --> 00:15:40,930
show them side by side.

401
00:15:40,930 --> 00:15:42,470
So this structure that you see right here,

402
00:15:42,470 --> 00:15:44,070
split view, navigation control for

403
00:15:44,070 --> 00:15:47,740
the master and then detail is very common.

404
00:15:47,740 --> 00:15:50,470
A universal way of specifying your UI so

405
00:15:50,480 --> 00:15:52,380
it works on both, okay?

406
00:15:54,450 --> 00:15:57,350
Now we can also put the detail inside of

407
00:15:57,350 --> 00:16:00,050
a Navigational Controller too, why would we want to do that?

408
00:16:00,050 --> 00:16:01,480
Well the only reason we would wanna do that,

409
00:16:01,490 --> 00:16:03,650
is cuz maybe we want

410
00:16:03,650 --> 00:16:05,820
the Navigation Controller's feature of a title, right?

411
00:16:05,820 --> 00:16:08,060
Or little buttons we wanna put at the top.

412
00:16:08,060 --> 00:16:09,560
It's really nice for that.

413
00:16:09,560 --> 00:16:10,880
But, we don't need

414
00:16:10,880 --> 00:16:12,190
a Navigation Controller down there for navigation,

415
00:16:12,190 --> 00:16:14,530
because we are never navigating from the detail.

416
00:16:14,530 --> 00:16:17,160
We only navigate to the detail.

417
00:16:17,170 --> 00:16:20,330
So, it doesn't, itself, need to be in its own

418
00:16:20,340 --> 00:16:22,900
Navigation Controller, and we'll see that in the demo.

419
00:16:22,900 --> 00:16:25,540
All right, so that's how we wire these things up.

420
00:16:25,540 --> 00:16:27,340
Okay, and they end up looking like that.

421
00:16:28,340 --> 00:16:31,980
Now how do we make these things appear?

422
00:16:31,980 --> 00:16:34,750
How do we make changes in our master,

423
00:16:34,750 --> 00:16:37,010
that cause something to appear in the detail.

424
00:16:37,020 --> 00:16:39,250
Or if we have a Navigational Controller that has multiple

425
00:16:39,250 --> 00:16:41,920
cards, when we clicked all those buttons and another card

426
00:16:41,920 --> 00:16:45,820
kept coming on in the stack, how did we do that, okay?

427
00:16:45,820 --> 00:16:48,790
And the answer is we use segues, okay?

428
00:16:48,790 --> 00:16:53,230
So segues is, how these things transition from

429
00:16:53,230 --> 00:16:54,560
view controller to view controller.

430
00:16:55,970 --> 00:16:57,500
There's really four kinds of segues.

431
00:16:57,500 --> 00:16:58,730
There are custom segues, too, but

432
00:16:58,730 --> 00:17:00,200
we're not gonna talk about that in this class,

433
00:17:00,200 --> 00:17:02,070
kind of advanced, you almost never need those.

434
00:17:03,140 --> 00:17:04,870
So there's four basic segues.

435
00:17:04,870 --> 00:17:07,210
There's show segue, okay?

436
00:17:07,210 --> 00:17:11,640
Which basically shows the MVC that you're talking about, and

437
00:17:11,650 --> 00:17:14,210
if you're a Navigation Controller, it will show it

438
00:17:14,210 --> 00:17:16,880
on the, it'll put it on top of the stack of cards.

439
00:17:16,880 --> 00:17:18,980
If you're not in a Navigation Controller,

440
00:17:18,980 --> 00:17:20,780
then it will show it modally.

441
00:17:20,790 --> 00:17:24,220
Okay, so now, modal presentation of an MVC,

442
00:17:24,220 --> 00:17:26,060
we haven't talked about that with all these other things,

443
00:17:26,060 --> 00:17:28,620
but basically it just takes over the entire screen.

444
00:17:28,630 --> 00:17:30,030
Okay? Just completely takes over the

445
00:17:30,030 --> 00:17:34,500
entire screen, puts the MVC that you wanna show on screen.

446
00:17:34,500 --> 00:17:37,230
So it's very kind of disruptive to

447
00:17:37,230 --> 00:17:40,300
the user a little bit, because their app is stuck,

448
00:17:40,300 --> 00:17:43,300
it can only do what this MVC is asking them to do.

449
00:17:43,310 --> 00:17:45,940
So I kind of recommend against using modal, and

450
00:17:45,940 --> 00:17:48,910
trying to keep your apps from doing that.

451
00:17:48,910 --> 00:17:50,110
So if you're using a show segue,

452
00:17:50,110 --> 00:17:52,510
you probably wanna be in a navigation controller, so

453
00:17:52,510 --> 00:17:53,950
that it will slide it on deck.

454
00:17:53,950 --> 00:17:55,980
Because, then the user can always go back,

455
00:17:55,980 --> 00:17:58,380
if they didn't mean that, they can go back.

456
00:17:58,390 --> 00:18:02,190
Then there is show detail segue, very similar to show,

457
00:18:02,190 --> 00:18:05,360
the only difference with show detail is that if

458
00:18:05,360 --> 00:18:08,360
you happen to be in a split view controller it

459
00:18:08,360 --> 00:18:11,160
will show this MVC as the detail, okay?

460
00:18:11,160 --> 00:18:13,160
Otherwise if you are in Navigation Controller, but

461
00:18:13,170 --> 00:18:14,960
not in a split view controller it just pushes it

462
00:18:14,970 --> 00:18:16,670
on the stack just like show would, okay?

463
00:18:18,540 --> 00:18:20,470
So, show detail tiny difference there.

464
00:18:20,470 --> 00:18:22,370
It's just about split view.

465
00:18:22,370 --> 00:18:24,410
So, it really helps you when you're in a split view

466
00:18:24,410 --> 00:18:26,810
decide whether what you want is the master to,

467
00:18:26,810 --> 00:18:28,710
if the master is in a Navigation Controller,

468
00:18:28,710 --> 00:18:30,880
if you want that to slide on the master?

469
00:18:30,880 --> 00:18:32,410
The thing you're segueing to or

470
00:18:32,410 --> 00:18:33,680
do you want it to appear in the detail, okay?

471
00:18:34,950 --> 00:18:38,180
Then there's modal which forces this full

472
00:18:38,190 --> 00:18:40,190
screen takeover type of thing.

473
00:18:40,190 --> 00:18:42,090
I'm not even gonna talk about that, I'll talk about it

474
00:18:42,090 --> 00:18:43,520
later in the quarter, but I don't wanna talk about it

475
00:18:43,520 --> 00:18:47,160
early because it can be used as a crutch to build UIs.

476
00:18:47,160 --> 00:18:49,490
You really wanna be using Navigation Controllers, and

477
00:18:49,500 --> 00:18:50,790
split view controllers to do that.

478
00:18:51,730 --> 00:18:53,030
And then a popover segue.

479
00:18:53,030 --> 00:18:56,400
Now a popover segue pops the view controller that you're

480
00:18:56,400 --> 00:18:59,700
segueing to, up into a little window that's on top of

481
00:18:59,700 --> 00:19:01,400
everything else, but just a little window instead of

482
00:19:01,410 --> 00:19:02,640
taking over the whole screen.

483
00:19:02,640 --> 00:19:04,240
But it, really is taking over the whole screen,

484
00:19:04,240 --> 00:19:06,540
because the user an only interact with what's in

485
00:19:06,540 --> 00:19:09,210
the little popover window, if they click anywhere else,

486
00:19:09,210 --> 00:19:11,350
it dismisses the popover window.

487
00:19:11,350 --> 00:19:14,250
But what makes popover nicer than just modal is that,

488
00:19:14,250 --> 00:19:16,550
since it doesn't take over the whole screen, you can still

489
00:19:16,550 --> 00:19:19,620
kind of see grayed out where you came from, and if you

490
00:19:19,620 --> 00:19:22,190
click where you came from, it puts the popover away.

491
00:19:22,190 --> 00:19:25,690
So the popover has very easy to cancel, it's very easy for

492
00:19:25,690 --> 00:19:27,880
you just to get back to

493
00:19:27,880 --> 00:19:30,060
where they were if they didn't really mean to click that.

494
00:19:30,060 --> 00:19:31,500
Okay, so that's popovers.

495
00:19:31,500 --> 00:19:32,930
So we'll talk over popovers at the end.

496
00:19:32,930 --> 00:19:36,500
Again I wanna emphasize what she was talking about on

497
00:19:36,500 --> 00:19:39,240
the previous slide segues of all kinds,

498
00:19:39,240 --> 00:19:43,810
no matter what you're doing, show detail, modal or popover.

499
00:19:43,810 --> 00:19:45,640
They always create a new MVC.

500
00:19:45,640 --> 00:19:49,550
You're never segueing to an existing MVC anywhere.

501
00:19:49,550 --> 00:19:51,310
You're always creating a new one always,

502
00:19:51,320 --> 00:19:52,880
that's what segues do.

503
00:19:52,880 --> 00:19:54,550
Okay, that takes a little bit of

504
00:19:54,550 --> 00:19:55,780
getting used to in your mind.

505
00:19:55,790 --> 00:19:57,550
Because of course you see this stack of cards.

506
00:19:57,550 --> 00:19:59,890
Navigation one, and you press back.

507
00:19:59,890 --> 00:20:01,760
And then you click to go back to where you were.

508
00:20:01,760 --> 00:20:03,420
And you think you're going back to the same one.

509
00:20:03,430 --> 00:20:04,690
But you're not. Because as soon as

510
00:20:04,690 --> 00:20:06,960
that thing comes off the stack, [SOUND] it's gone.

511
00:20:06,960 --> 00:20:08,360
Even in split view.

512
00:20:08,360 --> 00:20:11,500
You click in the master it updates your detail.

513
00:20:11,500 --> 00:20:13,430
You click again in the master to update the detail,

514
00:20:13,430 --> 00:20:15,300
and the detail changes and you think oh,

515
00:20:15,300 --> 00:20:17,200
that was the same thing it just got changed.

516
00:20:17,200 --> 00:20:19,040
No the previous one got thrown away and

517
00:20:19,040 --> 00:20:21,140
new detail got created, okay?

518
00:20:22,070 --> 00:20:23,870
So segues always created a new MVC.

519
00:20:25,140 --> 00:20:28,180
All right, so how do we make these segues happen, okay?

520
00:20:28,180 --> 00:20:29,640
You can do this in code as well, and

521
00:20:29,650 --> 00:20:32,350
I'm gonna show briefly how you do this in code.

522
00:20:32,350 --> 00:20:34,580
But in 90% of the time you're gonna do it

523
00:20:34,580 --> 00:20:36,450
in a storyboard with control drag,

524
00:20:36,450 --> 00:20:39,820
which is how we create most of the things we do in IOS.

525
00:20:39,820 --> 00:20:42,620
So here's an example of doing it with the control drag,

526
00:20:43,990 --> 00:20:47,230
I'm control dragging from a button in my calculator, so

527
00:20:47,230 --> 00:20:48,260
I added a button.

528
00:20:48,260 --> 00:20:49,600
The icon is very, very small but

529
00:20:51,870 --> 00:20:53,450
it actually looks like a little graph.

530
00:20:53,450 --> 00:20:55,030
So I'm control dragging from that in the upper right corner

531
00:20:55,040 --> 00:20:58,070
there down to the detail, because I

532
00:20:58,070 --> 00:21:01,340
want when that buttons pressed I want the detail to be

533
00:21:01,340 --> 00:21:06,440
replaced with a new graphing MVC, okay?

534
00:21:06,450 --> 00:21:07,680
When I let go it that,

535
00:21:07,680 --> 00:21:11,310
it's gonna say, what kind of segue do you want?

536
00:21:11,320 --> 00:21:13,980
This little black box is gonna appear.

537
00:21:13,990 --> 00:21:15,420
And here I'm gonna pick Show Detail,

538
00:21:15,420 --> 00:21:16,650
because if I'm in a split view,

539
00:21:16,650 --> 00:21:18,450
I wanted to replace the detail.

540
00:21:18,460 --> 00:21:21,160
If I was in a Navigation Controller only,

541
00:21:21,160 --> 00:21:23,190
I probably still would choose Show Detail because that

542
00:21:23,190 --> 00:21:25,030
also pushes on the stack.

543
00:21:25,030 --> 00:21:27,130
But if I were the master in a split view and

544
00:21:27,130 --> 00:21:28,500
I didn't want it to do the detail,

545
00:21:28,500 --> 00:21:31,260
I wanted it to actually slide on the stack of the master,

546
00:21:31,270 --> 00:21:34,070
cuz the master could be a stack then I would use show.

547
00:21:34,070 --> 00:21:35,700
All right?

548
00:21:35,700 --> 00:21:39,570
I could also make it a popover or a model here.

549
00:21:39,570 --> 00:21:42,710
So I'm gonna pick show detail, that's what I want.

550
00:21:42,710 --> 00:21:46,840
And it's gonna make a line appear in the story board.

551
00:21:46,850 --> 00:21:49,210
And the middle of the line is a little round circle.

552
00:21:49,220 --> 00:21:51,520
If you click on that and bring up the attributes and

553
00:21:51,520 --> 00:21:54,920
specter, on the right you'll see that there's a little pop

554
00:21:54,920 --> 00:21:56,750
up that says what kind of segue you want.

555
00:21:56,760 --> 00:21:59,660
We already, we already chose this one to be show detail.

556
00:21:59,660 --> 00:22:02,430
And there's also a critical field there called Identifier.

557
00:22:02,430 --> 00:22:04,630
That's a unique Identifier for

558
00:22:04,630 --> 00:22:07,700
this segue, and you need this Identifier.

559
00:22:07,700 --> 00:22:10,900
Let's talk about, why we need this Identifier?

560
00:22:10,900 --> 00:22:12,500
So I'm gonna call this Identifier for

561
00:22:12,500 --> 00:22:14,820
this own show graph.

562
00:22:14,820 --> 00:22:17,140
And you should usually, call the segue something that

563
00:22:17,140 --> 00:22:20,370
is probably a verb phrase that says what this segue does.

564
00:22:20,380 --> 00:22:21,980
So this segue when you're pressing the button it

565
00:22:21,980 --> 00:22:25,850
shows a graph so I'm gonna call it show graph, okay?

566
00:22:25,850 --> 00:22:27,210
So just type that in there.

567
00:22:27,220 --> 00:22:29,680
So, I told you before that everything in the storyboard

568
00:22:29,680 --> 00:22:32,320
is linked up with what's in your code by name.

569
00:22:32,320 --> 00:22:33,720
Whether it's the class of view controller.

570
00:22:33,720 --> 00:22:35,090
Class of of UI view.

571
00:22:35,090 --> 00:22:36,150
Name of an outlet.

572
00:22:36,160 --> 00:22:37,250
Name of an action.

573
00:22:37,260 --> 00:22:38,870
Name of a segue which is

574
00:22:38,870 --> 00:22:40,490
basically what the Identifier of a segue is.

575
00:22:40,490 --> 00:22:41,930
They're all just names, and

576
00:22:41,930 --> 00:22:44,060
we have to make the names the same in our code.

577
00:22:44,060 --> 00:22:46,700
So it's a loose coupling to make those two

578
00:22:46,700 --> 00:22:48,630
things work together.

579
00:22:48,630 --> 00:22:50,570
So, we'll have to reference this name in our code.

580
00:22:51,870 --> 00:22:54,040
Okay, so where, where are we gonna use that Identifier?

581
00:22:54,040 --> 00:22:57,740
Well, one way we can do it, only the 10% case I said,

582
00:22:57,740 --> 00:23:00,640
is to cause a segue to happen from code.

583
00:23:00,640 --> 00:23:02,690
And you do that with

584
00:23:02,690 --> 00:23:04,740
UIViewController method performSequeWithIdentifier.

585
00:23:04,750 --> 00:23:06,480
And you just specify that Identifier, and

586
00:23:06,480 --> 00:23:08,010
it's gonna make that segue happen, okay?

587
00:23:09,620 --> 00:23:10,880
Simple as that,

588
00:23:10,890 --> 00:23:12,180
as long as they're talking about this one,

589
00:23:12,190 --> 00:23:14,120
because you're not gonna be doing this one,

590
00:23:14,120 --> 00:23:15,990
probably ion this class, maybe in your final project,

591
00:23:15,990 --> 00:23:17,560
you might find a reason to do it.

592
00:23:18,890 --> 00:23:21,730
But the number one reason to have the Identifier in there

593
00:23:21,730 --> 00:23:23,460
and the main thing that it's used for

594
00:23:23,460 --> 00:23:27,730
is to prepare a segue, because when that segue happens,

595
00:23:27,730 --> 00:23:32,000
it creates a new MVC, that new MVC was just born.

596
00:23:32,000 --> 00:23:34,570
It needs to be prepared to do what it wants to do.

597
00:23:34,570 --> 00:23:36,760
So for example,

598
00:23:36,760 --> 00:23:38,940
in the calculator case, when I segue to a graphing MVC,

599
00:23:39,880 --> 00:23:41,680
it's just a blank graphing MVC.

600
00:23:41,680 --> 00:23:43,340
I have to tell it what to graph.

601
00:23:43,350 --> 00:23:46,150
I have to prepare it basically, okay?

602
00:23:46,150 --> 00:23:48,150
So, that's the number one thing, preparing.

603
00:23:48,150 --> 00:23:50,120
So how does preparing work?

604
00:23:50,120 --> 00:23:52,080
Preparing very simple.

605
00:23:52,090 --> 00:23:55,690
The MVC that contains the instigator of this segue.

606
00:23:55,690 --> 00:23:58,820
Like the button, or whatever's causing it to segue.

607
00:23:58,830 --> 00:24:01,990
That MVC implements a method called, prepare for segue.

608
00:24:02,000 --> 00:24:05,200
And inside, it gets the MVC that was just created, and

609
00:24:05,200 --> 00:24:06,960
it has to prepare it.

610
00:24:06,970 --> 00:24:09,430
So let's talk about what that code looks like,

611
00:24:09,440 --> 00:24:11,200
prepare for segue.

612
00:24:11,200 --> 00:24:12,740
It takes two arguments, okay?

613
00:24:12,740 --> 00:24:14,940
The first one is the segue.

614
00:24:14,940 --> 00:24:16,840
That's UI storyboard segue instance and

615
00:24:16,840 --> 00:24:18,910
it really has two important things in there.

616
00:24:18,910 --> 00:24:20,480
One is the Identifier, so

617
00:24:20,480 --> 00:24:22,310
you know which segue you're preparing.

618
00:24:22,310 --> 00:24:24,200
And two is,

619
00:24:24,200 --> 00:24:26,080
the MVC that it just created that you're going to segue to,

620
00:24:26,080 --> 00:24:28,780
which is called the destination view controller.

621
00:24:28,780 --> 00:24:30,150
It has a second argument there,

622
00:24:30,150 --> 00:24:33,220
which is sender, that's just the UI button or

623
00:24:33,220 --> 00:24:36,120
whatever that caused the segue to happen.

624
00:24:36,120 --> 00:24:38,220
You don't usually need to look at that but sometimes.

625
00:24:38,230 --> 00:24:40,560
We'll see later in the quarter when we wanna look at that.

626
00:24:40,560 --> 00:24:42,590
But that's all it is,

627
00:24:42,600 --> 00:24:44,630
it's just what object caused the segue to happen.

628
00:24:45,730 --> 00:24:48,000
So we're gonna look at that segue identifier.

629
00:24:48,000 --> 00:24:49,770
It's just a property, segue.identifier.

630
00:24:49,770 --> 00:24:52,240
It could be nil, because you might not have set it.

631
00:24:52,240 --> 00:24:54,670
And so you wanna check if it's nil here, so

632
00:24:54,670 --> 00:24:57,710
here I am doing if, let to check if that thing is nil.

633
00:24:57,710 --> 00:25:00,410
Then I'm just gonna switch on it, okay?

634
00:25:00,410 --> 00:25:03,080
And I'm gonna look for Show Graph, and

635
00:25:03,080 --> 00:25:06,750
once I know that, but I'm preparing to show a graph,

636
00:25:06,750 --> 00:25:08,920
then I can say, give me the MVC,

637
00:25:08,920 --> 00:25:12,450
that graphing calculator MVC that you just made.

638
00:25:12,460 --> 00:25:15,220
Now, the thing is segue dot destination view controller,

639
00:25:15,220 --> 00:25:16,960
that property is any object.

640
00:25:18,230 --> 00:25:21,590
Okay, so you have to use as to turn it into

641
00:25:21,600 --> 00:25:24,460
the right class of the MVC you just create.

642
00:25:24,470 --> 00:25:26,070
Now in the case here,

643
00:25:26,070 --> 00:25:28,630
I created a calculator graph view controller,

644
00:25:28,640 --> 00:25:30,940
I've abbreviated here calc graph view controller,

645
00:25:30,940 --> 00:25:33,200
although you shouldn't do that in your homework, okay?

646
00:25:33,210 --> 00:25:34,970
It's just that it wouldn't fit on the slide here,

647
00:25:34,970 --> 00:25:37,440
so calculator graph view controllers are on,

648
00:25:37,440 --> 00:25:38,640
turning that destination view

649
00:25:38,640 --> 00:25:40,610
controller into a calculator graph view controller, and

650
00:25:40,610 --> 00:25:42,410
if I can't do it, well then I can't prepare it.

651
00:25:42,410 --> 00:25:44,310
So, I'm just gonna do if let there.

652
00:25:45,450 --> 00:25:50,390
So if I can, then I'm just going to call methods and set

653
00:25:50,390 --> 00:25:54,620
properties in that calculator graph view controller, that

654
00:25:54,620 --> 00:25:58,830
are needed to prepare that thing to come onscreen, okay?

655
00:25:58,830 --> 00:26:01,060
So again in this case I

656
00:26:01,060 --> 00:26:03,300
would probably tell it what I wanted it to graph here.

657
00:26:03,300 --> 00:26:06,270
Okay, maybe I would set it to color, or something else.

658
00:26:06,270 --> 00:26:09,670
The scale, or I don't know whatever we wanted to set here

659
00:26:09,670 --> 00:26:12,240
we can do, okay?

660
00:26:12,240 --> 00:26:15,540
Now, I don't put a lot of red on my slides.

661
00:26:15,540 --> 00:26:18,040
And when I do, you really should pay attention, okay?

662
00:26:18,050 --> 00:26:20,080
Very important thing to understand,

663
00:26:20,080 --> 00:26:23,150
is when you are preparing that newly created MVC,

664
00:26:24,220 --> 00:26:26,620
it's outlets have not been set.

665
00:26:28,290 --> 00:26:30,170
Remember outlets are these

666
00:26:30,170 --> 00:26:32,050
implicitly unwrapped optionals, we are always kind

667
00:26:32,060 --> 00:26:33,890
of expecting them to have been set.

668
00:26:33,890 --> 00:26:36,320
Well, this is one case where that's not true.

669
00:26:36,330 --> 00:26:39,060
When you're preparing your MVC, it's outlets are not yet

670
00:26:39,060 --> 00:26:40,860
set, okay?

671
00:26:40,860 --> 00:26:44,800
That can cause crashers, that can cause you to unexpected

672
00:26:44,800 --> 00:26:48,400
behavior, because you set something in preparing it and

673
00:26:48,400 --> 00:26:51,570
you're expecting something in the view to have been set, but

674
00:26:51,570 --> 00:26:54,470
it didn't happen because the outlet is just not set yet.

675
00:26:54,480 --> 00:26:57,640
So you have to take whatever the preparation is and hold

676
00:26:57,650 --> 00:27:01,250
onto it, and then later on when the outlet does get set,

677
00:27:01,250 --> 00:27:04,780
maybe in the property observer of that outlet, you can load

678
00:27:04,790 --> 00:27:08,390
up the information that you're prepared with here, okay?

679
00:27:08,390 --> 00:27:09,290
I'll see that in the demo.

680
00:27:09,290 --> 00:27:10,890
I've made my demo

681
00:27:10,890 --> 00:27:12,490
intentionally crash because of this.

682
00:27:12,490 --> 00:27:14,890
And we'll go back and look at why that happens, okay?

683
00:27:14,890 --> 00:27:18,960
But this is red, pay attention, you know,

684
00:27:18,960 --> 00:27:20,630
if your segue doesn't work the first time,

685
00:27:20,630 --> 00:27:23,200
it might well be because you're expecting outlets to

686
00:27:23,200 --> 00:27:29,340
be set when your MVC is being prepared, okay?

687
00:27:29,340 --> 00:27:30,740
So that's preparing for a segue.

688
00:27:30,740 --> 00:27:33,140
You can also prevent a segue from happening.

689
00:27:33,140 --> 00:27:34,540
If there's some reason it doesn't make sense for

690
00:27:34,540 --> 00:27:36,710
that segue to happen, you could just disable the button,

691
00:27:36,710 --> 00:27:39,950
but if you didn't wanna disable the button you could

692
00:27:39,950 --> 00:27:41,920
click the button.

693
00:27:41,920 --> 00:27:43,880
And what'll happen here is your UIViewController will be

694
00:27:43,890 --> 00:27:47,220
asked, should I perform this segue with Identifier?

695
00:27:47,220 --> 00:27:49,290
It'll pass you the Identifier and the sender.

696
00:27:49,290 --> 00:27:51,060
And you can just return, false.

697
00:27:51,060 --> 00:27:53,960
And then it won't do that segue.

698
00:27:53,960 --> 00:27:56,150
It won't crash or anything.

699
00:27:56,150 --> 00:27:58,330
It just, you know, touch the button, it does nothing.

700
00:27:58,330 --> 00:28:01,430
'Kay, so you can control your segues kind of

701
00:28:01,440 --> 00:28:02,730
programmatically as well like that.

702
00:28:04,240 --> 00:28:05,440
Okay?

703
00:28:05,440 --> 00:28:07,200
So, demo time here.

704
00:28:07,210 --> 00:28:09,770
We're gonna demonstrate all of this.

705
00:28:09,780 --> 00:28:13,680
And I'm gonna do this demonstration by creating

706
00:28:13,680 --> 00:28:18,450
completely new application called Psychologist.

707
00:28:18,450 --> 00:28:21,420
Okay, so, let's go over here.

708
00:28:22,750 --> 00:28:24,420
So I'm going to Xcode.

709
00:28:24,420 --> 00:28:25,690
And here's happiness and calculator.

710
00:28:25,690 --> 00:28:27,890
But I'm gonna create a new project here.

711
00:28:27,890 --> 00:28:33,190
I'm gonna call it psychologist, Psychologist.

712
00:28:33,190 --> 00:28:37,400
Okay this gonna put it in the same place that

713
00:28:37,400 --> 00:28:40,030
my calculator and happiness apps were.

714
00:28:41,230 --> 00:28:42,750
Here it is.

715
00:28:42,750 --> 00:28:44,270
I'm gonna move these things out of the way,

716
00:28:44,270 --> 00:28:46,470
like we always do.

717
00:28:46,470 --> 00:28:48,670
The images, the assets, the launch screen so that I

718
00:28:48,670 --> 00:28:53,140
just have my main storyboard here and this view controller.

719
00:28:53,150 --> 00:28:55,810
And I'm actually gonna rename this view controller.

720
00:28:55,810 --> 00:28:59,080
I don't like the name GenericViewController.

721
00:28:59,080 --> 00:29:00,280
I even had you change it

722
00:29:01,220 --> 00:29:02,850
in the latest homework assignment, because I

723
00:29:02,850 --> 00:29:04,720
just don't think that's a very descriptive name.

724
00:29:04,720 --> 00:29:07,190
So, I'm gonna change the name of

725
00:29:07,190 --> 00:29:09,660
my view controller here to be PsychologistViewController.

726
00:29:09,660 --> 00:29:12,090
So I have to do that in three different places again,

727
00:29:12,090 --> 00:29:15,560
so here I'm gonna say Psychologist.

728
00:29:15,560 --> 00:29:17,330
Okay?

729
00:29:17,330 --> 00:29:19,100
Here I'm gonna change the name of the file,

730
00:29:19,100 --> 00:29:20,900
to be Psychologist.

731
00:29:20,900 --> 00:29:23,640
That's surprisingly hard to type by the way.

732
00:29:23,640 --> 00:29:25,100
And then in the story board,

733
00:29:25,110 --> 00:29:28,040
of course, I need to go to the identity inspector here and

734
00:29:28,040 --> 00:29:30,640
change it to be a PsychologistViewController.

735
00:29:31,810 --> 00:29:33,840
So let's add those three steps.

736
00:29:33,850 --> 00:29:35,880
So now I have this PsychologistViewController.

737
00:29:35,880 --> 00:29:37,280
What's this Psychologist gonna do?

738
00:29:37,280 --> 00:29:40,650
Well, he can ask you a question like Psychologists

739
00:29:40,650 --> 00:29:41,890
want to do.

740
00:29:41,890 --> 00:29:43,120
And you're gonna give an answer.

741
00:29:43,120 --> 00:29:45,450
And then he's gonna make a diagnosis.

742
00:29:45,460 --> 00:29:47,090
Okay. Based on your answer as to

743
00:29:47,090 --> 00:29:48,690
how happy you are or not.

744
00:29:48,690 --> 00:29:51,790
And then it's gonna use the HappinessViewController,

745
00:29:51,800 --> 00:29:55,000
to show how happy you are, show the diagnosis basically.

746
00:29:55,000 --> 00:29:56,630
Okay, so we are gonna use both the

747
00:29:56,630 --> 00:29:58,430
PsychologistViewController, and

748
00:29:58,430 --> 00:30:00,870
the HappinessViewController from our last app.

749
00:30:00,870 --> 00:30:03,200
But let's start with this psychologist view

750
00:30:03,210 --> 00:30:05,270
controller here, let's build its UI.

751
00:30:05,270 --> 00:30:06,870
He's going to ask a question, so

752
00:30:06,870 --> 00:30:09,240
I'm going to bring out a label for the question.

753
00:30:09,240 --> 00:30:12,010
He's going to ask the question,

754
00:30:12,010 --> 00:30:15,810
what do you see in your dreams?

755
00:30:15,820 --> 00:30:17,700
That sounds like

756
00:30:17,700 --> 00:30:19,580
a very psychologisty kind of question.

757
00:30:19,590 --> 00:30:21,820
And let's make it bigger font.

758
00:30:22,890 --> 00:30:25,690
Maybe like, 36 point or something like that.

759
00:30:27,430 --> 00:30:31,190
We can make it larger here.

760
00:30:32,900 --> 00:30:36,060
Let's center it, make this text centered.

761
00:30:36,070 --> 00:30:38,070
Let's try to put it in a nice place, okay?

762
00:30:38,070 --> 00:30:40,370
Let's use our blue lines to put it somewhere here.

763
00:30:40,370 --> 00:30:43,440
Let's put it like that, so it's nice.

764
00:30:43,440 --> 00:30:46,970
And put it in a good place.

765
00:30:46,980 --> 00:30:48,170
Let's try.

766
00:30:48,180 --> 00:30:49,740
I'm going to show you a little bit of

767
00:30:49,740 --> 00:30:51,040
Auto Layout every lecture.

768
00:30:51,050 --> 00:30:53,110
Just show you the things you can do.

769
00:30:53,110 --> 00:30:55,110
So let's try and see if we can.

770
00:30:55,120 --> 00:30:57,180
We put this all on blue lines up here.

771
00:30:57,180 --> 00:30:58,780
Right.

772
00:30:58,780 --> 00:31:00,380
So let's see if we can request, or have it

773
00:31:00,390 --> 00:31:03,390
reset to Suggested Constraints and see if it'll work, okay?

774
00:31:03,390 --> 00:31:05,620
So here I'm, this is for the Selected View.

775
00:31:05,620 --> 00:31:07,260
To un-select this view.

776
00:31:07,260 --> 00:31:10,830
I'm gonna go reset to Suggested Constraints.

777
00:31:10,830 --> 00:31:11,730
Now, let's see what happened.

778
00:31:11,730 --> 00:31:12,560
Now, this doesn't look good.

779
00:31:12,560 --> 00:31:14,430
I don't like this,

780
00:31:14,430 --> 00:31:16,300
cuz I really don't want this thing attached to the bottom.

781
00:31:16,300 --> 00:31:19,000
But the real place, a good place to look for

782
00:31:19,000 --> 00:31:22,570
the constraints is over here again in Size Inspector.

783
00:31:22,570 --> 00:31:24,000
If you look down at the bottom,

784
00:31:24,010 --> 00:31:26,970
you can see all the constraints that that reset to

785
00:31:26,980 --> 00:31:28,810
Suggested Constraints did.

786
00:31:28,810 --> 00:31:32,680
And I'd like this one, and I like that one.

787
00:31:32,680 --> 00:31:33,810
And I like that one.

788
00:31:33,810 --> 00:31:35,010
But I don't like that one.

789
00:31:35,020 --> 00:31:36,350
So I can just click on it and

790
00:31:36,350 --> 00:31:37,880
hit delete, and get rid of that.

791
00:31:37,880 --> 00:31:39,350
Now as soon as I did that,

792
00:31:39,350 --> 00:31:42,120
of course I got the yellow cuz it's misplaced.

793
00:31:42,120 --> 00:31:43,390
So I'm gonna go back and

794
00:31:43,390 --> 00:31:46,290
do what we did all the way, way back in lecture one,

795
00:31:46,290 --> 00:31:49,460
which I'm gonna update this frame, fix the misplacement.

796
00:31:49,460 --> 00:31:50,660
No issues.

797
00:31:50,660 --> 00:31:52,360
Boom. I've got this where I want it.

798
00:31:52,360 --> 00:31:55,800
Okay, so that's another way to use auto layout there.

799
00:31:56,970 --> 00:31:58,230
Alright, so let's get the answers out.

800
00:31:58,230 --> 00:31:59,500
Here's our question.

801
00:31:59,500 --> 00:32:00,770
Let's grab our answers out here.

802
00:32:00,770 --> 00:32:05,670
So let's, maybe I see a dancing tree, okay?

803
00:32:05,670 --> 00:32:07,710
If I see a dancing tree in my grid,

804
00:32:07,710 --> 00:32:09,840
let's make this font bigger again on this one too.

805
00:32:11,550 --> 00:32:14,550
If I see a dancing tree in my dreams I'm probably gonna be

806
00:32:14,550 --> 00:32:16,280
pretty happy I think.

807
00:32:16,280 --> 00:32:18,580
So let's try and put this one where it should be.

808
00:32:18,590 --> 00:32:20,350
So I'm gonna try and

809
00:32:20,350 --> 00:32:22,120
put this one right in the center of my view.

810
00:32:22,120 --> 00:32:25,090
So again, let's try and reset the suggested constraints and

811
00:32:25,090 --> 00:32:26,320
see if that works.

812
00:32:26,330 --> 00:32:28,220
Okay well that looks bad too.

813
00:32:28,230 --> 00:32:29,690
So let's go look over and see what it did.

814
00:32:31,600 --> 00:32:34,100
Alright, well, it aligns center to the super view.

815
00:32:34,100 --> 00:32:35,260
That looks good.

816
00:32:35,270 --> 00:32:39,170
But it aligned the X up with this thing up here and

817
00:32:39,170 --> 00:32:40,940
I don't really want that, so I'm gonna delete that.

818
00:32:40,940 --> 00:32:43,470
The bottom space, I definitely don't want that.

819
00:32:43,470 --> 00:32:45,270
And it fixed the width.

820
00:32:45,270 --> 00:32:46,870
I definitely don't want the width fixed.

821
00:32:46,880 --> 00:32:50,140
I want the width to match whatever the size of

822
00:32:50,150 --> 00:32:51,480
this thing is.

823
00:32:51,480 --> 00:32:52,810
So, kinda got most things here.

824
00:32:52,810 --> 00:32:55,780
But I really don't have a vertical position or

825
00:32:55,780 --> 00:32:58,150
horizontal position of this thing set.

826
00:32:58,150 --> 00:33:00,690
So I'm gonna use another one down here.

827
00:33:00,690 --> 00:33:02,150
This is the alignment one.

828
00:33:02,160 --> 00:33:05,260
And I'm gonna go down here and say, I want the alignment,

829
00:33:05,260 --> 00:33:10,590
the horizontal and vertical centers to be lined up.

830
00:33:10,600 --> 00:33:15,030
So I really already got the vertical center right there.

831
00:33:15,030 --> 00:33:16,400
So I just do horizontal center, so

832
00:33:16,400 --> 00:33:17,770
I'll add that constraint.

833
00:33:17,770 --> 00:33:20,370
So now I've got these two things lined up,

834
00:33:20,370 --> 00:33:21,870
that looks like what I want.

835
00:33:21,870 --> 00:33:25,910
Again, it's a little off this placement probably size is

836
00:33:25,910 --> 00:33:28,710
not quite right, we'll put that right.

837
00:33:28,710 --> 00:33:31,250
And boom, now we've got this tree in the middle.

838
00:33:31,250 --> 00:33:32,850
Okay.

839
00:33:32,850 --> 00:33:34,450
So let's add some more answers. I'm just going

840
00:33:34,450 --> 00:33:36,050
to copy and paste because I like this font combination.

841
00:33:36,050 --> 00:33:40,790
Let's say you dream of a dirty Golden, no not dirty,

842
00:33:40,790 --> 00:33:43,790
we'll just say, a Golden Bear.

843
00:33:43,790 --> 00:33:45,960
[NOISE] Okay so let's say the Golden Bear somehow shows up

844
00:33:45,960 --> 00:33:46,590
in your dreams.

845
00:33:46,590 --> 00:33:50,030
Doesn't sound very good.

846
00:33:50,030 --> 00:33:51,100
So there's that.

847
00:33:51,100 --> 00:33:54,100
And this one, let's see if we

848
00:33:54,100 --> 00:33:56,870
can do suggested constraints with this one.

849
00:33:58,270 --> 00:34:00,700
Okay, we do that. Now this one looks good.

850
00:34:00,710 --> 00:34:04,240
It's got the bottom space and the center.

851
00:34:04,240 --> 00:34:05,110
Looks good, okay?

852
00:34:05,110 --> 00:34:06,470
So we're rocking with that one.

853
00:34:06,480 --> 00:34:07,610
No need to do anything.

854
00:34:07,610 --> 00:34:08,540
Let's do another one.

855
00:34:09,680 --> 00:34:12,550
Buckeye, I'm not even sure what that is, but

856
00:34:12,550 --> 00:34:14,080
we'll put that in there.

857
00:34:14,080 --> 00:34:17,420
We'll reset suggested constraints for this one too.

858
00:34:17,420 --> 00:34:19,690
Make sure that looks good, yes it does, okay,

859
00:34:19,690 --> 00:34:22,050
this is just the size inspector right here, alright.

860
00:34:22,060 --> 00:34:23,640
Alright, so that's good.

861
00:34:23,640 --> 00:34:25,220
So let's run our app and see how it looks.

862
00:34:30,230 --> 00:34:31,360
Okay, here we go.

863
00:34:31,360 --> 00:34:32,500
Oh, that's doesn't look good.

864
00:34:32,500 --> 00:34:34,060
What do you see is getting cut off?

865
00:34:34,070 --> 00:34:35,530
Let's see, if we rotate.

866
00:34:35,530 --> 00:34:36,930
So it's good in landscape.

867
00:34:36,940 --> 00:34:39,170
It doesn't look very good in portrait.

868
00:34:39,170 --> 00:34:40,900
So why is that happening right there?

869
00:34:40,910 --> 00:34:43,670
Some of you found this out in your homework.

870
00:34:43,670 --> 00:34:44,910
It's because right now,

871
00:34:44,910 --> 00:34:48,440
we have this thing set to be of a fixed size.

872
00:34:48,450 --> 00:34:52,550
The font size are here, see auto shrink, fixed font size.

873
00:34:52,550 --> 00:34:54,010
And that doesn't need to be fixed,

874
00:34:54,020 --> 00:34:55,820
I'm happy if that's any size.

875
00:34:55,820 --> 00:34:57,520
I really don't want it to

876
00:34:57,520 --> 00:34:59,220
be any smaller than like 12 point.

877
00:34:59,220 --> 00:35:01,190
That's getting pretty small in the UI so,

878
00:35:01,190 --> 00:35:04,090
I'm gonna set the minimum size to 12.

879
00:35:04,090 --> 00:35:05,720
And now when we run,

880
00:35:05,730 --> 00:35:08,160
it'll make the font smaller to fit the size.

881
00:35:08,160 --> 00:35:10,300
But if we go to a larger, it will make the font bigger.

882
00:35:11,460 --> 00:35:12,980
Okay. Question back there.

883
00:35:12,980 --> 00:35:14,500
>> Is there any way to make it wrap around to the next line?

884
00:35:14,500 --> 00:35:16,170
>> So the question is,

885
00:35:16,170 --> 00:35:18,770
is there any way to make this text wrap to the next line?

886
00:35:18,770 --> 00:35:21,040
And there is.There's a couple of ways to do it.

887
00:35:21,040 --> 00:35:22,440
There's UI text view,

888
00:35:22,440 --> 00:35:26,580
which is a very powerful text wrapping one.

889
00:35:26,580 --> 00:35:29,310
But even Label, you can go here to the Label and

890
00:35:29,310 --> 00:35:32,410
when you inspect it, you can say,

891
00:35:32,420 --> 00:35:34,120
how you want the line breaks to happen.

892
00:35:34,120 --> 00:35:36,820
You see here it says truncate tail.

893
00:35:36,820 --> 00:35:40,850
And you can also control how many lines long you're gonna

894
00:35:40,860 --> 00:35:42,420
allow the label to be.

895
00:35:43,730 --> 00:35:48,860
Okay, so now we have this good UI, and we want to

896
00:35:48,860 --> 00:35:52,460
make it so that it works with the Happiness View Controller.

897
00:35:52,470 --> 00:35:54,170
So we need our Happiness View Controller.

898
00:35:54,170 --> 00:35:56,400
So how are we going to get our Happiness View Controller?

899
00:35:56,400 --> 00:35:58,170
And the answer is,

900
00:35:58,170 --> 00:35:59,940
we're just going to copy and paste it from our other app.

901
00:35:59,940 --> 00:36:02,240
So let's go open our other app.

902
00:36:02,240 --> 00:36:03,810
Okay, where is it?

903
00:36:03,810 --> 00:36:05,370
It's here, Developer Happiness.

904
00:36:05,380 --> 00:36:07,110
I'm just gonna open Happiness in X code.

905
00:36:07,110 --> 00:36:08,760
Here it is.

906
00:36:08,760 --> 00:36:10,410
And I'm just gonna first of all copy the code over.

907
00:36:10,420 --> 00:36:13,680
So I have my Face view and my Happiness view controller.

908
00:36:13,690 --> 00:36:17,220
I'm just gonna drag them from one into the other.

909
00:36:18,160 --> 00:36:20,460
Okay, just drag them from one project into the other.

910
00:36:20,460 --> 00:36:23,460
When you do, it'll allow you to copy them if you want, or

911
00:36:23,460 --> 00:36:25,060
you could have a reference.

912
00:36:25,060 --> 00:36:27,830
If you're going to have a reference, make sure that that

913
00:36:27,830 --> 00:36:30,330
place you're referencing to stays around,

914
00:36:30,330 --> 00:36:32,330
that you're not deleting it and things like that.

915
00:36:32,330 --> 00:36:34,420
Or you could have a copy.

916
00:36:34,420 --> 00:36:36,500
I'm going to add a copy, the items right here.

917
00:36:36,500 --> 00:36:37,970
Okay, so, copy those two things in.

918
00:36:37,970 --> 00:36:40,070
And then what about my storyboard here?

919
00:36:40,070 --> 00:36:42,870
I need to kind of get this Happiness view

920
00:36:42,880 --> 00:36:44,540
controller over here.

921
00:36:44,540 --> 00:36:46,810
Okay. Over, into this guy.

922
00:36:46,810 --> 00:36:48,680
Okay, well I can copy and paste that too.

923
00:36:48,680 --> 00:36:50,810
Just select this thing, copy.

924
00:36:50,820 --> 00:36:52,250
Go over to here and paste.

925
00:36:52,250 --> 00:36:53,480
Okay.

926
00:36:53,490 --> 00:36:59,860
So, now I have somewhere my two view controllers.

927
00:36:59,860 --> 00:37:02,260
Okay.

928
00:37:02,260 --> 00:37:04,490
Now one thing I notice when you do copy and

929
00:37:04,490 --> 00:37:07,900
paste, it doesn't draw the face.

930
00:37:07,900 --> 00:37:11,100
It seems like it needs kind of a little bit of a kick,

931
00:37:11,100 --> 00:37:13,700
a little boost before I do that.

932
00:37:13,700 --> 00:37:15,640
So like if you go to FaceView and

933
00:37:15,640 --> 00:37:17,800
just edit this file and hit save.

934
00:37:17,810 --> 00:37:20,840
It seems like that gives it the kick in the head,

935
00:37:20,840 --> 00:37:23,810
literally, that it needs to draw the head, okay?

936
00:37:23,810 --> 00:37:25,900
So, now we have it.

937
00:37:25,900 --> 00:37:27,980
So, we got our two view controllers here and

938
00:37:27,980 --> 00:37:29,950
we want to put them in a split view.

939
00:37:29,950 --> 00:37:33,280
So that this is the master, and this is the detail.

940
00:37:33,290 --> 00:37:34,290
So let's do that.

941
00:37:34,290 --> 00:37:36,050
Super simple, we're gonna go down here.

942
00:37:36,990 --> 00:37:39,060
Go grab a split view controller, okay?

943
00:37:39,060 --> 00:37:40,690
The split view controller's right here.

944
00:37:40,690 --> 00:37:42,930
See, here's tab bar controller.

945
00:37:42,930 --> 00:37:45,860
Here's navigation controller, somewhere.

946
00:37:45,860 --> 00:37:46,900
Page view controller, even.

947
00:37:46,900 --> 00:37:48,060
We're not gonna talk about that, but

948
00:37:48,070 --> 00:37:50,500
that's another way to combine MVCs.

949
00:37:50,500 --> 00:37:53,200
But let's drag this split view controller out.

950
00:37:53,200 --> 00:37:54,770
Now see how it

951
00:37:54,770 --> 00:37:56,340
comes with other stuff that you don't want?

952
00:37:56,340 --> 00:37:58,640
So when you drop it in there, literally just

953
00:37:58,640 --> 00:38:01,070
select the stuff you don't want and delete it.

954
00:38:02,080 --> 00:38:04,210
Okay. Don't want any of that stuff.

955
00:38:04,210 --> 00:38:05,780
Trying to be helpful.

956
00:38:05,780 --> 00:38:08,810
And so here's my split view controller, okay and

957
00:38:08,820 --> 00:38:10,550
here's my mastering detail.

958
00:38:10,550 --> 00:38:12,750
I'm just gonna control drag.

959
00:38:12,750 --> 00:38:14,320
To set my master.

960
00:38:14,320 --> 00:38:16,200
So here's the master.

961
00:38:16,200 --> 00:38:18,090
And I'm gonna control drag, to set the detail.

962
00:38:20,190 --> 00:38:21,360
Okay. That's it.

963
00:38:21,360 --> 00:38:22,360
So let's run.

964
00:38:22,360 --> 00:38:24,330
Let's actually run on an iPad.

965
00:38:24,330 --> 00:38:27,460
See what this looks like.

966
00:38:27,470 --> 00:38:33,370
[BLANK AUDIO] Alright, so here's an iPad.

967
00:38:33,370 --> 00:38:36,970
Oh, I thought I was gonna get a split view, with this thing.

968
00:38:36,970 --> 00:38:38,110
How come I don't get a split view?

969
00:38:38,110 --> 00:38:42,040
>> [INAUDIBLE] >> What?

970
00:38:42,040 --> 00:38:45,980
>> [INAUDIBLE] >> Yes, exactly.

971
00:38:45,980 --> 00:38:47,850
Very good job.

972
00:38:47,850 --> 00:38:50,450
You should get extra credit or something up there.

973
00:38:50,450 --> 00:38:53,950
Yeah, the problem is this UI comes in through this arrow,

974
00:38:53,950 --> 00:38:54,850
so it comes to here.

975
00:38:54,860 --> 00:38:56,420
So it's bypassing the split view.

976
00:38:56,420 --> 00:38:57,790
It's not even going.

977
00:38:57,790 --> 00:38:59,360
So it's just a common mistake you'll do,

978
00:38:59,360 --> 00:39:00,770
you'll forget to move this.

979
00:39:00,780 --> 00:39:02,190
And you can just pick this arrow up and

980
00:39:02,190 --> 00:39:02,790
move it over here.

981
00:39:04,330 --> 00:39:06,380
Okay.

982
00:39:06,380 --> 00:39:08,430
Now when we run, it's going to come in, via the split view.

983
00:39:08,430 --> 00:39:09,400
And it is a split view.

984
00:39:09,400 --> 00:39:11,000
If I slide out from the left,

985
00:39:11,000 --> 00:39:14,600
there's my master and here's my detail.

986
00:39:14,600 --> 00:39:17,070
Okay. And if I rotate.

987
00:39:17,070 --> 00:39:18,210
Okay. I get the mastering detail on

988
00:39:18,210 --> 00:39:19,140
the screen at the same time.

989
00:39:20,940 --> 00:39:23,240
Sound good? Now clicking this doesn't seem

990
00:39:23,250 --> 00:39:24,910
to do anything, okay.

991
00:39:24,910 --> 00:39:26,150
So we're gonna have to fix that.

992
00:39:26,150 --> 00:39:28,210
And let's go look at it on an iPhone see what it

993
00:39:28,220 --> 00:39:29,180
looks like there?

994
00:39:33,320 --> 00:39:38,960
I didn't hit the button sorry Alright, here's my iPhone.

995
00:39:38,960 --> 00:39:40,620
Okay?

996
00:39:40,630 --> 00:39:41,120
Oh.

997
00:39:41,130 --> 00:39:41,660
Wait.

998
00:39:41,660 --> 00:39:43,060
How do I?

999
00:39:43,060 --> 00:39:44,290
I can't see the face.

1000
00:39:44,300 --> 00:39:45,860
Okay? Let's try landscape.

1001
00:39:45,860 --> 00:39:47,000
That doesn't work either.

1002
00:39:47,000 --> 00:39:49,400
So there's no way to get at the face, right now.

1003
00:39:49,400 --> 00:39:51,470
Absolutely no way to get the face.

1004
00:39:51,470 --> 00:39:52,470
And why is that?

1005
00:39:52,470 --> 00:39:54,230
Well that's because again on phone which is

1006
00:39:54,240 --> 00:39:56,670
a compact size trait device.

1007
00:39:56,670 --> 00:39:59,940
Split view doesn't put things side by side,

1008
00:39:59,940 --> 00:40:02,310
it just doesn't do that, okay.

1009
00:40:02,310 --> 00:40:06,150
Now if we do iPhone6 Plus.

1010
00:40:06,150 --> 00:40:06,910
Try that one.

1011
00:40:11,380 --> 00:40:13,620
It's kind of a hybrid.

1012
00:40:13,620 --> 00:40:15,850
First of all it's such high resolution that even the small

1013
00:40:15,860 --> 00:40:17,620
versions, the smallest I can get it.

1014
00:40:17,620 --> 00:40:18,590
But see, in portrait,

1015
00:40:18,590 --> 00:40:20,320
I have the same problem as another iPhone.

1016
00:40:20,330 --> 00:40:22,790
There's just no way for me to get to the face.

1017
00:40:22,790 --> 00:40:24,880
Cuz it's no way to,

1018
00:40:24,880 --> 00:40:26,960
if I try sliding out from the side, nothing happens.

1019
00:40:26,960 --> 00:40:28,600
Okay? Because in portrait mode,

1020
00:40:28,600 --> 00:40:31,270
the iPhone 6 Plus works like an iPhone.

1021
00:40:31,270 --> 00:40:33,770
But in landscape, on iPhone 6 Plus,

1022
00:40:33,770 --> 00:40:35,940
it's big enough, that it can actually show them both.

1023
00:40:37,240 --> 00:40:37,940
Okay?

1024
00:40:37,940 --> 00:40:39,370
So that's kinda cool.

1025
00:40:39,370 --> 00:40:40,810
Alright but it still doesn't work.

1026
00:40:40,810 --> 00:40:42,680
Okay.

1027
00:40:42,680 --> 00:40:44,440
So why does this not work?

1028
00:40:44,450 --> 00:40:47,710
Well, it doesn't work because we have no segues.

1029
00:40:47,720 --> 00:40:51,550
We don't describe how to get from one of

1030
00:40:51,550 --> 00:40:53,620
these things to another.

1031
00:40:53,620 --> 00:40:54,950
So let's put some segues in.

1032
00:40:54,950 --> 00:40:56,320
What we're gonna do,

1033
00:40:56,320 --> 00:40:58,620
well, actually before we do the segues,

1034
00:40:58,620 --> 00:41:02,590
let's fix this problem with the iPhone not working.

1035
00:41:02,590 --> 00:41:05,500
Okay, let's fix the problem where we can't see the iPhone.

1036
00:41:05,500 --> 00:41:08,360
In order to fix that, what we talked about in the slides,

1037
00:41:08,370 --> 00:41:10,700
by putting this guy in a navigation controller.

1038
00:41:10,700 --> 00:41:11,730
Okay.

1039
00:41:11,740 --> 00:41:13,030
So let's go do that.

1040
00:41:13,040 --> 00:41:15,440
We're gonna do that with embed.

1041
00:41:15,440 --> 00:41:17,270
In Navigation Controller.

1042
00:41:17,270 --> 00:41:19,740
It puts it in a navigation controller, okay.

1043
00:41:19,740 --> 00:41:22,710
Now when we run on the iPhone, we'll just run it in normal

1044
00:41:22,710 --> 00:41:29,250
iPhone, you'll see that we get the face.

1045
00:41:29,250 --> 00:41:30,350
Okay? Awesome.

1046
00:41:30,350 --> 00:41:33,050
And we can go back to the master and

1047
00:41:33,050 --> 00:41:34,450
there's no way to get back to the detail.

1048
00:41:34,460 --> 00:41:35,990
Okay.

1049
00:41:35,990 --> 00:41:37,720
So now we definitely need those segues.

1050
00:41:37,720 --> 00:41:40,930
We need these buttons to cause a segue to happen to

1051
00:41:40,930 --> 00:41:41,660
the detail.'

1052
00:41:41,660 --> 00:41:43,430
Okay. So

1053
00:41:43,430 --> 00:41:45,200
that's what we're gonna do next.

1054
00:41:45,200 --> 00:41:47,430
And actually, let's take a second here and

1055
00:41:47,430 --> 00:41:49,070
show what this looks like on the iPad.

1056
00:41:50,540 --> 00:41:53,000
We added the navigation controller here.

1057
00:41:53,000 --> 00:41:55,170
Let's see what effect it had on the iPad.

1058
00:41:55,170 --> 00:41:58,940
And the answer is, that the master now has a title.

1059
00:42:00,380 --> 00:42:01,540
See?

1060
00:42:01,540 --> 00:42:02,940
Has a title there.

1061
00:42:02,950 --> 00:42:04,610
And this kind of would be nice,

1062
00:42:04,610 --> 00:42:06,700
even to put a title in here.

1063
00:42:06,700 --> 00:42:08,780
So we can go over here, and actually double click on here,

1064
00:42:08,780 --> 00:42:14,250
and put in psychologist.

1065
00:42:14,260 --> 00:42:16,150
Put a title in there.

1066
00:42:16,160 --> 00:42:18,460
Notice, look what happened to our question.

1067
00:42:18,460 --> 00:42:19,720
It kind of got obscured.

1068
00:42:19,730 --> 00:42:21,690
Do you see that?

1069
00:42:21,690 --> 00:42:23,130
By this title.

1070
00:42:23,130 --> 00:42:24,530
And actually we have a warning up here.

1071
00:42:24,530 --> 00:42:25,830
Do you see that warning?

1072
00:42:25,830 --> 00:42:27,130
That warning is about that.

1073
00:42:27,130 --> 00:42:27,830
Let's click on it.

1074
00:42:27,830 --> 00:42:29,570
It says, the frame for

1075
00:42:29,570 --> 00:42:31,300
what you see in your dreams will be different at run time.

1076
00:42:31,300 --> 00:42:35,140
That's because it's going to automatically move it down

1077
00:42:35,140 --> 00:42:36,470
underneath this.

1078
00:42:36,470 --> 00:42:39,240
And we can make that happen in our storyboard by going over

1079
00:42:39,240 --> 00:42:42,580
here, clicking here, doing what we always do when we

1080
00:42:42,580 --> 00:42:44,580
have a problem with our auto layout,

1081
00:42:44,580 --> 00:42:46,750
fix our misplacement and it will move it back down.

1082
00:42:46,750 --> 00:42:47,310
Okay.

1083
00:42:49,080 --> 00:42:52,050
Alright so this is looking good.

1084
00:42:52,050 --> 00:42:54,590
So let's get this segue business happening.

1085
00:42:54,590 --> 00:42:57,790
So I told you the segues are done just with control drag.

1086
00:42:57,790 --> 00:42:59,120
Okay.

1087
00:42:59,130 --> 00:43:02,590
When we click one of these things I wanna segue to

1088
00:43:02,600 --> 00:43:05,400
a face that shows the diagnosis based on

1089
00:43:05,400 --> 00:43:06,930
what you saw in your dreams.

1090
00:43:06,930 --> 00:43:09,030
So we do this just with Ctrl+drag.

1091
00:43:09,030 --> 00:43:11,900
So let's Ctrl+drag from Golden Bear.

1092
00:43:11,900 --> 00:43:13,920
Down here.

1093
00:43:13,920 --> 00:43:15,940
See how it's grabbing on to this MVC down here?

1094
00:43:15,940 --> 00:43:17,940
So we'll let go and

1095
00:43:17,940 --> 00:43:19,940
it says what kind of segue do you want?

1096
00:43:19,940 --> 00:43:22,610
And we're going to do show detail because we want it to

1097
00:43:22,610 --> 00:43:25,380
show it in the detail side of the split view, and

1098
00:43:25,380 --> 00:43:27,650
in the navigation control it will just push it.

1099
00:43:27,650 --> 00:43:30,220
But the show detail will do the split view thing.

1100
00:43:30,220 --> 00:43:31,890
So, there we go and

1101
00:43:31,890 --> 00:43:33,550
look what happened there we got this little segue.

1102
00:43:33,560 --> 00:43:35,290
If we inspect it, over here,

1103
00:43:35,290 --> 00:43:36,690
you can see there is its identifier.

1104
00:43:36,690 --> 00:43:37,760
You can even change what kind of

1105
00:43:37,760 --> 00:43:39,860
segue it is in the future if you wanted.

1106
00:43:39,860 --> 00:43:42,560
But this identifier is the Golden Bear one.

1107
00:43:42,560 --> 00:43:47,430
I'm going to call this the sad identifier, okay.

1108
00:43:47,430 --> 00:43:49,330
So whenever this goes through,

1109
00:43:49,340 --> 00:43:51,970
this identifier for this segue, is called sad.

1110
00:43:51,970 --> 00:43:53,100
And we'll do the same thing here for

1111
00:43:53,110 --> 00:43:57,010
Dancing Tree, okay, show detail again.

1112
00:43:57,010 --> 00:44:00,910
And dancing trees segue, which is right here.

1113
00:44:00,910 --> 00:44:02,780
We're gonna call this one, happy.

1114
00:44:02,780 --> 00:44:04,000
That's the happy one.

1115
00:44:04,000 --> 00:44:05,210
Now, I told you these should be verbs so

1116
00:44:05,220 --> 00:44:07,250
maybe this should be,

1117
00:44:07,250 --> 00:44:09,280
show happy diagnosis, show sad diagnosis.

1118
00:44:09,290 --> 00:44:11,920
But for demo it's less typing later,

1119
00:44:11,920 --> 00:44:13,150
I'm just putting happy in that.

1120
00:44:13,160 --> 00:44:14,860
How about buckeye.

1121
00:44:14,860 --> 00:44:16,490
Okay, we'll say show detail.

1122
00:44:16,490 --> 00:44:18,760
And for the buckeye one.

1123
00:44:18,760 --> 00:44:19,560
Where is that one?

1124
00:44:19,560 --> 00:44:20,730
That's this one I guess.

1125
00:44:20,730 --> 00:44:23,700
We'll say meh.

1126
00:44:23,700 --> 00:44:24,800
Okay, not happy or sad.

1127
00:44:25,830 --> 00:44:28,300
Okay, and you can move these things around.

1128
00:44:28,300 --> 00:44:30,200
Right, if you're having trouble selecting them or

1129
00:44:30,200 --> 00:44:33,970
whatever, you can move them around to get at them better.

1130
00:44:33,970 --> 00:44:35,420
Okay.

1131
00:44:35,420 --> 00:44:36,870
So this is what our storyboard looks like now.

1132
00:44:36,880 --> 00:44:40,840
Let's make some more space so you can see it, right here.

1133
00:44:40,850 --> 00:44:42,140
And we've got our detail.

1134
00:44:42,150 --> 00:44:44,810
Let me whip this up here.

1135
00:44:44,820 --> 00:44:48,050
And we got our master and we've got the segues now.

1136
00:44:48,050 --> 00:44:50,890
So let's go ahead and run, and see if this works.

1137
00:44:50,890 --> 00:44:53,340
Let's go.

1138
00:44:53,340 --> 00:44:55,790
On i-Pad, okay, huh, does not appear to work on the i-Pad,

1139
00:44:55,790 --> 00:44:57,660
huh, that's interesting.

1140
00:44:57,660 --> 00:44:59,290
Alright, let's try it on the i-Phone.

1141
00:45:10,970 --> 00:45:12,100
All right, so there's iPhone.

1142
00:45:12,110 --> 00:45:14,070
So we're at the face, let's go back to the master.

1143
00:45:14,080 --> 00:45:15,690
Here's the master,

1144
00:45:15,690 --> 00:45:17,310
notice we have this nice title up here now, Psychologist.

1145
00:45:17,310 --> 00:45:18,680
Let's do this.

1146
00:45:18,680 --> 00:45:20,040
Oh, it's doing something, but,

1147
00:45:20,050 --> 00:45:21,850
it's not actually showing the diagnosis.

1148
00:45:21,850 --> 00:45:25,680
But at least it's segueing to the other one.

1149
00:45:25,690 --> 00:45:27,400
Okay?

1150
00:45:27,400 --> 00:45:29,120
So the iPad was working too, it's just there was nothing to

1151
00:45:29,120 --> 00:45:32,090
see, because there was already a detail there and

1152
00:45:32,090 --> 00:45:33,990
it replaced that detail with a new one.

1153
00:45:33,990 --> 00:45:37,560
But we didn't prepare that thing, so it doesn't know how

1154
00:45:37,560 --> 00:45:39,800
much to smile, it doesn't know how to show the diagnosis,

1155
00:45:39,800 --> 00:45:41,500
cuz we have to prepare it.

1156
00:45:41,500 --> 00:45:43,570
Okay, so preparing is the next step.

1157
00:45:43,570 --> 00:45:45,370
We do the preparation for

1158
00:45:45,370 --> 00:45:47,740
these segues in this ViewController.

1159
00:45:47,740 --> 00:45:50,470
This is the ViewController that's instigating the segue,

1160
00:45:50,470 --> 00:45:53,140
so here's where we have to put our preparation.

1161
00:45:53,140 --> 00:45:55,810
This is the PsychologistViewController.

1162
00:45:55,810 --> 00:45:57,910
Okay, so we're gonna go over here to

1163
00:45:57,910 --> 00:46:02,150
our PsychologistViewController code, delete that stuff.

1164
00:46:03,720 --> 00:46:05,150
Okay, here's PsychologistViewController.

1165
00:46:05,150 --> 00:46:08,290
And all we have to do here is implement that one prepare

1166
00:46:08,290 --> 00:46:09,990
method, okay.

1167
00:46:09,990 --> 00:46:15,090
So it's called prepareForSegue.

1168
00:46:15,090 --> 00:46:18,760
'Kay, I'll let it type it out for me by hitting tab.

1169
00:46:18,760 --> 00:46:20,860
And you can see there's the two arguments, the segue and

1170
00:46:20,870 --> 00:46:22,260
the sender.

1171
00:46:22,270 --> 00:46:26,140
Now I'm gonna just say here, if the segue's

1172
00:46:26,140 --> 00:46:31,040
destination view controller, sorry, if I can let HVC,

1173
00:46:31,040 --> 00:46:36,980
HappinessViewController, equal the DestinationViewController

1174
00:46:36,980 --> 00:46:41,350
as a HappinessViewController, then I'm gonna do

1175
00:46:41,350 --> 00:46:45,290
something based on what the identifier is.

1176
00:46:45,290 --> 00:46:47,650
Now, if this segue, if we have a prepareForSegue and we're

1177
00:46:47,660 --> 00:46:50,220
segueing to something that's not a HappinessViewController,

1178
00:46:50,220 --> 00:46:51,660
then this if let is not gonna happen.

1179
00:46:51,660 --> 00:46:53,960
So none of what I'm gonna type right here is gonna happen,

1180
00:46:53,960 --> 00:46:55,390
and that's perfectly fine.

1181
00:46:55,400 --> 00:46:58,830
You can kinda do the if let on what kind of

1182
00:46:58,830 --> 00:47:00,560
thing you're segueing to, or

1183
00:47:00,570 --> 00:47:02,500
on the identifier, one on the outside,

1184
00:47:02,500 --> 00:47:05,800
one on the inside, kind of depends on what's going on.

1185
00:47:05,800 --> 00:47:08,100
But in this case, I'm going to do the if let for

1186
00:47:08,110 --> 00:47:10,740
my destinationViewController on the outside, and then I'm

1187
00:47:10,740 --> 00:47:16,110
going to do the if let on the identifier on the inside.

1188
00:47:16,110 --> 00:47:18,250
Okay? So if I had a segue to

1189
00:47:18,250 --> 00:47:21,950
a happiness controller that had no identifier set,

1190
00:47:21,950 --> 00:47:24,120
then we would do nothing.

1191
00:47:24,120 --> 00:47:25,820
But if it's set, we're going to go in here,

1192
00:47:25,820 --> 00:47:27,190
we'll switch on it.

1193
00:47:27,190 --> 00:47:28,720
So let's switch on identifier.

1194
00:47:30,130 --> 00:47:34,430
If it is the sad identifier, okay,

1195
00:47:34,430 --> 00:47:39,400
the sad segue, then let's set our hvc's happiness to 0.

1196
00:47:41,770 --> 00:47:46,300
Okay, so here's where I'm preparing, this newly created

1197
00:47:46,310 --> 00:47:49,040
HappinessViewController to be displayed on screen.

1198
00:47:50,280 --> 00:47:53,010
Okay, and if it's the happy segue,

1199
00:47:53,010 --> 00:47:56,710
then we'll set the happiness to 100.

1200
00:47:56,710 --> 00:47:58,950
And then, actually for

1201
00:47:58,950 --> 00:48:01,180
anything else, I'm just gonna set the happiness to 50.

1202
00:48:01,180 --> 00:48:03,080
Okay, something in the middle.

1203
00:48:04,550 --> 00:48:06,950
Okay, so that's it, that's all I have to do here,

1204
00:48:06,960 --> 00:48:09,990
that's all my ViewController needs to be prepared.

1205
00:48:09,990 --> 00:48:12,830
You know, if I had other things in here, I could

1206
00:48:12,830 --> 00:48:16,030
set other properties, but this is all this one needs.

1207
00:48:16,030 --> 00:48:16,930
Okay?

1208
00:48:16,930 --> 00:48:18,100
So it's prepared.

1209
00:48:18,100 --> 00:48:19,260
So let's go ahead and run this.

1210
00:48:19,270 --> 00:48:20,770
This should all work, right?

1211
00:48:20,770 --> 00:48:21,870
It should be no problems.

1212
00:48:22,800 --> 00:48:24,270
Okay. Here's our psychologist.

1213
00:48:24,270 --> 00:48:25,570
Let's try dancing tree.

1214
00:48:25,570 --> 00:48:26,870
Oh, crashed our program.

1215
00:48:26,870 --> 00:48:30,070
All right, kind of told you I was going to do this.

1216
00:48:30,080 --> 00:48:31,770
Why did our program crash?

1217
00:48:31,780 --> 00:48:33,280
Well it says unexpected,

1218
00:48:33,280 --> 00:48:35,410
I'm looking in the console down here.

1219
00:48:35,410 --> 00:48:37,450
You should always look in the console when it crashes.

1220
00:48:37,450 --> 00:48:38,380
Okay? It's the first place

1221
00:48:38,380 --> 00:48:40,530
you want to look.

1222
00:48:40,530 --> 00:48:42,680
This says unexpected found nil while unwrapping an optional.

1223
00:48:42,690 --> 00:48:46,490
Okay, so I accessed some optional that was nil.

1224
00:48:46,490 --> 00:48:47,750
So that's bad.

1225
00:48:47,760 --> 00:48:49,940
Where did I do that?

1226
00:48:49,940 --> 00:48:52,130
Right here in updateUI, in HappinessViewController,

1227
00:48:52,130 --> 00:48:53,260
HappinessViewController updateUI.

1228
00:48:53,260 --> 00:48:57,930
Well, let's see, what in this line might be nil?

1229
00:48:57,930 --> 00:48:59,800
Well, of course, it's the only thing that could be nil,

1230
00:48:59,800 --> 00:49:02,170
which is the faceView is nil.

1231
00:49:03,100 --> 00:49:04,500
What is the faceView?

1232
00:49:04,500 --> 00:49:06,040
It's this outlet right here.

1233
00:49:06,040 --> 00:49:09,410
Okay, we can also, by the way, go over here and

1234
00:49:09,410 --> 00:49:11,010
find out how we got here.

1235
00:49:11,010 --> 00:49:12,780
So we got here because someone was setting our

1236
00:49:12,780 --> 00:49:14,640
model into the property observer,

1237
00:49:14,650 --> 00:49:18,850
we wanted to update UI, and we got there from preparation.

1238
00:49:18,850 --> 00:49:19,910
So here we are preparing,

1239
00:49:19,920 --> 00:49:22,120
we're trying to prepare this new MVC, and

1240
00:49:22,120 --> 00:49:25,650
it sets the model to be something,

1241
00:49:25,660 --> 00:49:29,760
that updates the UI, and we get here and we crash.

1242
00:49:29,760 --> 00:49:31,690
And why is faceView nil right there?

1243
00:49:31,690 --> 00:49:34,160
Because as I said in red,

1244
00:49:34,160 --> 00:49:37,200
when you're preparing the outlets have not been set.

1245
00:49:37,200 --> 00:49:40,330
So this faceView outlet, down here, has not been set.

1246
00:49:40,330 --> 00:49:43,240
So, you know, it's an implicit unwrapped optional, but

1247
00:49:43,240 --> 00:49:46,770
it's still an optional, and it has not been set yet.

1248
00:49:46,770 --> 00:49:48,540
Okay, so how are we going to get around this?

1249
00:49:48,540 --> 00:49:52,340
Well, luckily in our case, whenever we set, if we set our

1250
00:49:52,350 --> 00:49:55,150
model and we try to update the UI and the faceView's not

1251
00:49:55,150 --> 00:49:57,810
even connected yet, well, we can just ignore it then,

1252
00:49:57,820 --> 00:50:00,980
because obviously the faceView is up to date because it's

1253
00:50:00,990 --> 00:50:02,620
not even hooked up.

1254
00:50:02,620 --> 00:50:05,350
So we can just use optional chaining here and

1255
00:50:05,360 --> 00:50:06,590
just put a question mark there.

1256
00:50:07,560 --> 00:50:10,430
Right, and what that says, if this thing is nil,

1257
00:50:10,430 --> 00:50:12,290
than just ignore the rest of this statement.

1258
00:50:12,300 --> 00:50:14,030
Okay.

1259
00:50:14,030 --> 00:50:18,470
So, one thing you'll probably end up doing a lot of times

1260
00:50:18,470 --> 00:50:21,600
is, in the things that could be called from a prepare,

1261
00:50:21,600 --> 00:50:23,770
you might be putting this optional chaining in.

1262
00:50:23,770 --> 00:50:26,070
Or checking, if base view does not equal nil,

1263
00:50:26,070 --> 00:50:29,040
then do something.

1264
00:50:29,040 --> 00:50:30,010
Okay?

1265
00:50:30,010 --> 00:50:30,840
So that should fix that.

1266
00:50:30,840 --> 00:50:33,310
Let's go ahead and run this.

1267
00:50:33,310 --> 00:50:34,150
Here it is.

1268
00:50:34,150 --> 00:50:35,050
Let's go back.

1269
00:50:35,050 --> 00:50:37,450
Dancing tree, very happy.

1270
00:50:37,450 --> 00:50:39,780
Golden bear, very unhappy.

1271
00:50:39,790 --> 00:50:41,380
Buckeye?

1272
00:50:41,390 --> 00:50:42,650
Okay.

1273
00:50:42,650 --> 00:50:43,920
Working fine, let's go take a look, and

1274
00:50:43,920 --> 00:50:46,860
let's go look in landscape here.

1275
00:50:46,860 --> 00:50:48,160
Golden Bear, working fine.

1276
00:50:48,160 --> 00:50:53,230
Notice that this MVC underlaps this title bar up here.

1277
00:50:53,230 --> 00:50:57,000
You can actually control that in storyboard if you inspect

1278
00:50:57,000 --> 00:50:58,630
the MVC, you can click on there,

1279
00:50:58,630 --> 00:51:02,970
say do not go under thing above me.

1280
00:51:02,970 --> 00:51:04,140
Also notice that in landscape,

1281
00:51:04,140 --> 00:51:06,340
you get a little smaller title bar up here,

1282
00:51:06,340 --> 00:51:08,410
which is kind of nice.

1283
00:51:08,410 --> 00:51:09,810
Okay.

1284
00:51:09,810 --> 00:51:11,340
But back in here, you get the bigger one,

1285
00:51:11,340 --> 00:51:14,650
because you're getting the carrier and the time up here.

1286
00:51:14,650 --> 00:51:17,680
Okay, let's go look at it on the iPad.

1287
00:51:25,420 --> 00:51:28,490
Okay, here's this, I can slide this thing out from the right,

1288
00:51:28,490 --> 00:51:31,590
Golden Bear, Dancing Tree, Buckeye, working great.

1289
00:51:31,600 --> 00:51:33,900
We can go over here.

1290
00:51:33,900 --> 00:51:37,530
Golden Bear, Dancing Tree, Buckeye.

1291
00:51:37,530 --> 00:51:40,020
Okay?

1292
00:51:40,020 --> 00:51:42,500
So pretty straightforward, the stuff is all pretty easy to

1293
00:51:42,510 --> 00:51:44,340
envisualize in your storyboard,

1294
00:51:44,340 --> 00:51:47,510
when you're looking at the storyboard it's pretty clear,

1295
00:51:47,510 --> 00:51:51,640
once you understand how these connections happen, to see

1296
00:51:51,650 --> 00:51:52,680
what's going on over here.

1297
00:51:53,920 --> 00:51:59,120
Okay, so one other thing I want to do here is make,

1298
00:51:59,120 --> 00:52:04,690
let me go back to my simulator.

1299
00:52:04,690 --> 00:52:06,620
Look at this guy over here.

1300
00:52:06,630 --> 00:52:07,960
This guy doesn't get a title.

1301
00:52:08,960 --> 00:52:12,400
That's kind of a bummer, that he doesn't get a title right

1302
00:52:12,400 --> 00:52:14,260
there and he does on the iPhone.

1303
00:52:14,270 --> 00:52:16,170
Right, if you remember on the iPhone, he had a title,

1304
00:52:16,170 --> 00:52:17,370
it was blank, but he had a title.

1305
00:52:17,370 --> 00:52:21,200
So I wanna give this guy a title on the iPad as well.

1306
00:52:21,210 --> 00:52:24,640
So I'm gonna do that by just selecting it here and

1307
00:52:24,640 --> 00:52:28,310
saying Embed In > Navigation Controller.

1308
00:52:28,310 --> 00:52:29,380
So I put this guy in

1309
00:52:29,380 --> 00:52:30,440
a Navigation Controller too, down here.

1310
00:52:32,010 --> 00:52:32,880
Okay?

1311
00:52:32,880 --> 00:52:35,280
So then, I can have a title.

1312
00:52:35,280 --> 00:52:38,020
Now, I could click here to set the title, right here I

1313
00:52:38,020 --> 00:52:40,320
could say diagnosis or something like that,

1314
00:52:40,320 --> 00:52:42,720
but actually I am going to have the title be set in code.

1315
00:52:42,720 --> 00:52:45,990
What I'm going to do is, every time someone says for my model

1316
00:52:45,990 --> 00:52:48,890
in my HappinessViewController, when I update the UI,

1317
00:52:48,900 --> 00:52:56,070
I'm going to say my title equals my happiness.

1318
00:52:56,070 --> 00:52:57,970
So I'm just gonna put that integer,

1319
00:52:57,970 --> 00:52:59,640
which is my happiness, as my title.

1320
00:52:59,640 --> 00:53:02,200
So I'm gonna put that in here let's see if that works.

1321
00:53:04,380 --> 00:53:06,440
So we run, I've got a title.

1322
00:53:06,440 --> 00:53:07,840
Doesn't look I've got there, but

1323
00:53:07,840 --> 00:53:13,780
no one has set my happiness yet, so that makes sense.

1324
00:53:13,780 --> 00:53:14,580
Oh, but it looks like I've

1325
00:53:14,580 --> 00:53:16,520
broken something by doing that.

1326
00:53:16,520 --> 00:53:17,650
This doesn't work.

1327
00:53:17,650 --> 00:53:18,850
Huh.

1328
00:53:18,850 --> 00:53:20,690
Why doesn't this work?

1329
00:53:20,690 --> 00:53:24,920
Well, the reason this doesn't work is because these segues

1330
00:53:24,930 --> 00:53:28,760
are seguing now to a Navigation Controller.

1331
00:53:28,760 --> 00:53:31,560
They're not seguing directly to a HappinessViewController.

1332
00:53:31,560 --> 00:53:34,430
So this prepare that we have right here,

1333
00:53:34,430 --> 00:53:37,170
this very first line is going to not work.

1334
00:53:37,170 --> 00:53:38,940
Because the destinationViewController is

1335
00:53:38,940 --> 00:53:40,340
no longer a HappinessController,

1336
00:53:40,340 --> 00:53:41,670
it's a NavigationController.

1337
00:53:41,670 --> 00:53:44,770
Everyone understand that?

1338
00:53:44,780 --> 00:53:46,080
So how can we deal with that?

1339
00:53:46,080 --> 00:53:48,480
Well, that's actually quite easy to deal with.

1340
00:53:48,480 --> 00:53:52,280
I'm gonna create a variable here called destination, which

1341
00:53:52,280 --> 00:53:57,850
I'm gonna set equal to the destinationViewController as

1342
00:53:57,850 --> 00:53:59,790
a UIViewController,

1343
00:53:59,790 --> 00:54:02,720
cuz I know it's a UIViewController of some sort.

1344
00:54:02,730 --> 00:54:07,390
And then I'm gonna say, if I can let navCon equal

1345
00:54:07,400 --> 00:54:12,260
the destination as a UI Navigation Controller,

1346
00:54:12,270 --> 00:54:15,500
okay, then I'm going to set the destination to be the nav

1347
00:54:15,500 --> 00:54:18,540
cons, and what I want is the visible ViewController,

1348
00:54:18,540 --> 00:54:20,740
the one on top of the stack.

1349
00:54:20,740 --> 00:54:23,210
Right?

1350
00:54:23,210 --> 00:54:25,680
So I'm going to say, .visibleViewController.

1351
00:54:25,680 --> 00:54:28,010
So visibleViewController is just a property in

1352
00:54:28,010 --> 00:54:30,250
UINavigationController that returns to the one

1353
00:54:30,250 --> 00:54:31,470
that's on top of the stack,

1354
00:54:31,470 --> 00:54:32,680
which is going to be HappinessViewController,

1355
00:54:32,680 --> 00:54:34,780
because it's the only one on the stack.

1356
00:54:34,790 --> 00:54:36,300
Okay. And

1357
00:54:36,300 --> 00:54:37,820
then here, instead of saying destinationViewController

1358
00:54:37,820 --> 00:54:39,490
here, I'll just say destination.

1359
00:54:40,660 --> 00:54:42,760
So now, if we come in here and

1360
00:54:42,760 --> 00:54:44,160
this is the HappinessViewController,

1361
00:54:44,160 --> 00:54:46,060
in other words, I don't have the navigation controller,

1362
00:54:46,060 --> 00:54:47,360
then this is not even going to happen.

1363
00:54:47,360 --> 00:54:48,560
And so it's fine.

1364
00:54:48,560 --> 00:54:49,600
This will work.

1365
00:54:49,600 --> 00:54:51,060
Otherwise, if it's a navigation controller,

1366
00:54:51,070 --> 00:54:53,530
I'm going to pull the HappinessViewController out of

1367
00:54:53,530 --> 00:54:55,670
it, and then this'll work again.

1368
00:54:55,670 --> 00:54:56,700
So it would have worked in either case.

1369
00:54:56,700 --> 00:54:59,400
So this is nice, in your prepares,

1370
00:54:59,410 --> 00:55:02,210
to make it so that if you ever think that the thing you're

1371
00:55:02,210 --> 00:55:04,680
segueing to might be wrapped in a navigation controller,

1372
00:55:04,680 --> 00:55:06,940
this will make it so it'll work either way.

1373
00:55:06,950 --> 00:55:08,410
So later, if you decide to unwrap it or

1374
00:55:08,410 --> 00:55:09,850
whatever, this'll work.

1375
00:55:09,850 --> 00:55:10,750
So let's try this.

1376
00:55:13,080 --> 00:55:14,700
All right, so

1377
00:55:14,700 --> 00:55:16,320
we've got this Golden Bear, there's the title and

1378
00:55:16,320 --> 00:55:20,460
it's working, 100, Buckeye, that's working too.

1379
00:55:20,460 --> 00:55:21,020
Okay?

1380
00:55:22,390 --> 00:55:23,020
Make sense there?

1381
00:55:24,990 --> 00:55:27,890
All right, the last thing I want to show here is

1382
00:55:28,860 --> 00:55:31,860
briefly how to do a segue in code.

1383
00:55:31,870 --> 00:55:34,830
Because this segue we did with control dragging in

1384
00:55:34,840 --> 00:55:36,800
the storyboard entirely.

1385
00:55:36,800 --> 00:55:39,300
So how would we do a segue in code?

1386
00:55:39,310 --> 00:55:41,110
So let's do a different segue here,

1387
00:55:41,110 --> 00:55:45,340
I'm gonna add another thing to this.

1388
00:55:46,750 --> 00:55:52,350
Let's go down here and add a new button right here.

1389
00:55:52,350 --> 00:55:54,550
Put it in here, I'm going to call this Nothing.

1390
00:55:54,550 --> 00:55:56,180
So what do I see in my dreams?

1391
00:55:56,190 --> 00:55:56,970
Nothing.

1392
00:55:56,970 --> 00:55:57,750
I don't see anything.

1393
00:55:57,750 --> 00:55:59,650
Okay and I am going to put that here.

1394
00:55:59,660 --> 00:56:03,220
I'm going to try Reset to Suggested Constraints.

1395
00:56:03,230 --> 00:56:04,590
I'm going to check to see what it did.

1396
00:56:04,590 --> 00:56:06,830
That looks perfectly fine to me.

1397
00:56:06,830 --> 00:56:08,760
I'm rocking!

1398
00:56:08,760 --> 00:56:10,700
But instead of control dragging from here to make

1399
00:56:10,700 --> 00:56:13,730
this segue, I'm just going to create a normal target

1400
00:56:13,740 --> 00:56:14,330
action method.

1401
00:56:15,270 --> 00:56:17,000
Okay.

1402
00:56:17,000 --> 00:56:18,740
So this is I'm just gonna make this be a completely normal

1403
00:56:18,740 --> 00:56:22,410
button that's going to do target action from here.

1404
00:56:22,410 --> 00:56:24,140
Okay, so let's make some space over here in our

1405
00:56:24,140 --> 00:56:25,240
PsychologistViewController.

1406
00:56:25,240 --> 00:56:28,380
I'm gonna Ctrl+drag over to here.

1407
00:56:28,380 --> 00:56:29,650
Okay, it's gonna be an action.

1408
00:56:29,650 --> 00:56:33,950
I'm gonna call it the nothing action.

1409
00:56:33,950 --> 00:56:37,350
I'm gonna have the center be a UI button, and Connect.

1410
00:56:37,360 --> 00:56:39,150
So now every time I click on Nothing,

1411
00:56:39,160 --> 00:56:42,860
it's going to do this target action right here.

1412
00:56:42,860 --> 00:56:45,890
And what I wanna do inside here is cause a segue

1413
00:56:45,900 --> 00:56:47,130
to happen.

1414
00:56:47,130 --> 00:56:49,300
Okay?

1415
00:56:49,300 --> 00:56:51,470
So base this segue in code, so how am I gonna do that?

1416
00:56:51,470 --> 00:56:56,570
Well, I still have to create the segue in the storyboard.

1417
00:56:56,570 --> 00:56:59,210
Okay, so I'm still going to go back here and

1418
00:56:59,210 --> 00:57:00,870
create the segue, but

1419
00:57:00,880 --> 00:57:02,540
the question is where do I create the segue from?

1420
00:57:02,540 --> 00:57:03,710
Where do I drag from?

1421
00:57:03,710 --> 00:57:06,550
Since I don't want this to directly cause it,

1422
00:57:06,550 --> 00:57:08,580
and the answer is, I drag from this little thing up here.

1423
00:57:08,580 --> 00:57:10,220
Do you see this little yellow guy?

1424
00:57:10,220 --> 00:57:13,250
This yellow thing represents the ViewController.

1425
00:57:13,250 --> 00:57:14,850
So, when you're setting up a segue that's gonna be

1426
00:57:14,850 --> 00:57:16,150
fired off in code,

1427
00:57:16,160 --> 00:57:19,060
you do the control drag from this little yellow thing.

1428
00:57:19,060 --> 00:57:20,890
So, let's go down here.

1429
00:57:20,890 --> 00:57:23,840
Okay?

1430
00:57:23,840 --> 00:57:26,800
I'm gonna take this guy and I'm gonna control drag over to

1431
00:57:26,800 --> 00:57:29,060
here, to this navigation controller.

1432
00:57:29,070 --> 00:57:31,370
Sorry for the screen resolution there.

1433
00:57:31,370 --> 00:57:34,070
It's still gonna be a show detail segue.

1434
00:57:34,070 --> 00:57:35,940
I'm going to now zoom out.

1435
00:57:38,310 --> 00:57:40,140
Okay, let's find this thing.

1436
00:57:40,140 --> 00:57:46,450
It's not that one, it's not that one, it's this one.

1437
00:57:46,450 --> 00:57:48,250
And so notice that when I select this one,

1438
00:57:48,250 --> 00:57:51,150
it's showing the whole view controller sending this, and

1439
00:57:51,150 --> 00:57:56,050
so we will call this the nothing segue.

1440
00:57:57,060 --> 00:57:59,120
Okay, so now we have this segue named nothing,

1441
00:57:59,130 --> 00:58:02,160
it's not hooked up to any button or anything like that.

1442
00:58:02,160 --> 00:58:06,330
Okay, but if I go over to my PsychologistViewController,

1443
00:58:06,330 --> 00:58:09,870
now in nothing I can say, let's make this nice and wide,

1444
00:58:09,870 --> 00:58:15,400
performSegueWithIdentifier the nothing segue.

1445
00:58:15,410 --> 00:58:18,940
And the sender, we could make it be the button or

1446
00:58:18,940 --> 00:58:21,340
we could make this actually be self, so

1447
00:58:21,350 --> 00:58:23,550
that the view control itself could be the sender.

1448
00:58:23,550 --> 00:58:25,280
Or we could make it be nil.

1449
00:58:25,280 --> 00:58:26,550
Okay?

1450
00:58:26,550 --> 00:58:28,780
But this sender, whatever we put here is just going to get

1451
00:58:28,780 --> 00:58:31,690
passed along when we get a chance to prepare.

1452
00:58:31,690 --> 00:58:34,890
Because this segue, even though we are executing it

1453
00:58:34,890 --> 00:58:37,420
from code, is still going to get a chance to prepare.

1454
00:58:37,430 --> 00:58:41,190
So if we went down here and said case nothing,

1455
00:58:41,200 --> 00:58:44,560
maybe the happiness there is not very happy,

1456
00:58:44,570 --> 00:58:47,830
okay, then you can still prepare down here.

1457
00:58:47,840 --> 00:58:49,570
So even though we are doing it in code,

1458
00:58:49,570 --> 00:58:50,640
it's still going to prepare.

1459
00:58:52,140 --> 00:58:53,900
All right, so let's go take a look at that.

1460
00:58:55,340 --> 00:58:57,890
Back to our iPad here.

1461
00:58:57,890 --> 00:59:00,440
So there's happy, sad, and here's nothing.

1462
00:59:00,450 --> 00:59:01,110
'Kay?

1463
00:59:03,180 --> 00:59:04,480
Make sense?

1464
00:59:04,480 --> 00:59:05,780
So you can do things from code.

1465
00:59:05,780 --> 00:59:07,080
Now why would you ever wanna do it in code?

1466
00:59:07,080 --> 00:59:10,150
Well, maybe you want to have a button clicked, and then,

1467
00:59:10,150 --> 00:59:11,720
depending on the state of something,

1468
00:59:11,720 --> 00:59:14,590
it'll do one segue versus doing another segue.

1469
00:59:14,590 --> 00:59:17,320
So you can have a little if then there that performs one

1470
00:59:17,330 --> 00:59:18,830
of two different segues.

1471
00:59:18,830 --> 00:59:20,160
That's a classic reason you might want to

1472
00:59:20,160 --> 00:59:23,360
do segues in code

1473
00:59:23,360 --> 00:59:26,570
versus just control dragging directly from the button.

1474
00:59:26,570 --> 00:59:28,720
All right?

1475
00:59:28,720 --> 00:59:30,870
I believe that's all I wanted to cover today on that, yes.

1476
00:59:30,870 --> 00:59:35,140
So now we'll go talk about popovers, so

1477
00:59:35,140 --> 00:59:38,840
let's go back to our slides here.

1478
00:59:42,720 --> 00:59:43,880
All right, popovers.

1479
00:59:45,150 --> 00:59:50,050
So I don't talk about popovers with the other three, because

1480
00:59:50,050 --> 00:59:51,920
it's a little bit different, a popover's a little different.

1481
00:59:51,920 --> 00:59:54,860
So here is a UI that has a popover in it.

1482
00:59:54,860 --> 00:59:56,690
This is the calendar app.

1483
00:59:56,690 --> 00:59:59,290
And you can see the popover is that whole area there where

1484
00:59:59,300 --> 01:00:01,960
I'm searching in my calendar trying to find something.

1485
01:00:01,960 --> 01:00:04,580
Okay.

1486
01:00:04,580 --> 01:00:07,200
So that whole popover, that little lighter colored area in

1487
01:00:07,200 --> 01:00:10,740
the upper righthand corner, that is all one MVC.

1488
01:00:10,740 --> 01:00:15,040
It's the search for appointment MVC, okay?

1489
01:00:15,040 --> 01:00:18,640
So and it completely fills that popover space.

1490
01:00:18,650 --> 01:00:21,410
Now, notice that the popover also has kind of

1491
01:00:21,420 --> 01:00:22,380
a little arrow.

1492
01:00:22,380 --> 01:00:23,350
You see that tiny little arrow?

1493
01:00:23,350 --> 01:00:25,020
It's just like a little white triangle.

1494
01:00:25,020 --> 01:00:27,990
That's pointing to whatever caused this to come up.

1495
01:00:27,990 --> 01:00:29,500
So in this case,

1496
01:00:29,510 --> 01:00:31,020
that little thing that looks like a magnifying glass,

1497
01:00:31,020 --> 01:00:33,690
that's what the user must have pressed on in order to

1498
01:00:33,690 --> 01:00:37,290
have this pop-over for searching come up.

1499
01:00:37,300 --> 01:00:39,050
Right?

1500
01:00:39,050 --> 01:00:40,800
Now notice the rest of the screen here is gray,

1501
01:00:40,800 --> 01:00:42,260
except for the keyboard, is gray.

1502
01:00:42,270 --> 01:00:43,730
See it's kind of grayed out?

1503
01:00:43,730 --> 01:00:46,070
And it's also if you tried to click in there,

1504
01:00:46,070 --> 01:00:47,640
it wouldn't work.

1505
01:00:47,640 --> 01:00:49,200
Like if you tried to click on the Week button at the top,

1506
01:00:49,210 --> 01:00:51,670
or the Month button or the Year button it wouldn't work.

1507
01:00:51,680 --> 01:00:56,240
But what it would do is dismiss the popover, okay?

1508
01:00:56,250 --> 01:00:58,910
So that grey area, so you can see that it's not as

1509
01:00:58,910 --> 01:01:02,580
bad as take over the screen, but it's still the case that I

1510
01:01:02,580 --> 01:01:04,920
can only do what the popover is asking me to do.

1511
01:01:04,920 --> 01:01:07,020
I can't do anything else until I dismiss the popover but

1512
01:01:07,020 --> 01:01:09,490
it's just really, really easy to see what the rest of

1513
01:01:09,490 --> 01:01:11,860
what was going on before you brought the popover up,

1514
01:01:11,860 --> 01:01:14,860
and it's usually easy to get rid of the popover.

1515
01:01:14,860 --> 01:01:16,390
Now, the interesting thing about popover, and

1516
01:01:16,400 --> 01:01:17,900
the reason I talk about it differently,

1517
01:01:17,900 --> 01:01:20,000
is that it's not a UIViewController.

1518
01:01:21,070 --> 01:01:22,800
Okay. Popover is itself,

1519
01:01:22,800 --> 01:01:24,670
not a UIViewController.

1520
01:01:24,670 --> 01:01:26,650
It's brought on

1521
01:01:26,650 --> 01:01:28,640
screen using what's called a presentation controller.

1522
01:01:28,640 --> 01:01:30,810
And I'm not really going to talk about presentation

1523
01:01:30,810 --> 01:01:33,440
controller, just a little bit about the popover presentation

1524
01:01:33,440 --> 01:01:36,610
controller, but it's the underlying mechanism that all

1525
01:01:36,610 --> 01:01:40,050
of this stuff is based on, so popover doesn't really need to

1526
01:01:40,050 --> 01:01:43,320
have a view controller whose view is this MVC.

1527
01:01:44,290 --> 01:01:46,370
It can do it

1528
01:01:46,370 --> 01:01:48,460
purely with the presentation controller mechanism.

1529
01:01:48,460 --> 01:01:50,720
So let's talk about the popover then,

1530
01:01:50,730 --> 01:01:53,230
and how we make it work, because the interesting of

1531
01:01:53,230 --> 01:01:56,860
Power Popover that even though it's not its own MVC,

1532
01:01:56,860 --> 01:02:00,030
it still segues and all that stuff exactly the same.

1533
01:02:00,030 --> 01:02:02,900
You still Ctrl+drag to some view controller.

1534
01:02:02,900 --> 01:02:04,570
You still get to do prepare for segue.

1535
01:02:04,570 --> 01:02:06,770
It all looks exactly the same because it's still doing

1536
01:02:06,770 --> 01:02:08,840
segues even though it's not its own view controller.

1537
01:02:08,840 --> 01:02:11,540
It's still using segues to cause it to appear.

1538
01:02:13,280 --> 01:02:17,310
So, things to note when you're preparing for a segue here.

1539
01:02:17,310 --> 01:02:22,950
One is that inside your preparer you

1540
01:02:22,950 --> 01:02:26,250
can get ahold of what's called the presentation controller.

1541
01:02:26,260 --> 01:02:28,390
And the presentation controller for

1542
01:02:28,390 --> 01:02:31,960
a popover will tell you things like what's the button that

1543
01:02:31,960 --> 01:02:34,060
brought this popover up.

1544
01:02:34,060 --> 01:02:37,200
And you can even configure the presentation like I don't want

1545
01:02:37,200 --> 01:02:40,430
this popover to pop up to the left of anything.

1546
01:02:40,440 --> 01:02:43,000
I always want it on the right side of something.

1547
01:02:43,000 --> 01:02:44,740
So you can even control that.

1548
01:02:44,740 --> 01:02:48,310
And very interestingly using the presentation controller's

1549
01:02:48,310 --> 01:02:49,740
delegate, this is the first time we

1550
01:02:49,740 --> 01:02:51,940
have talked about a delegate in iOS in this class,

1551
01:02:51,950 --> 01:02:54,450
although we'll gonna talk about it in spades next week.

1552
01:02:56,780 --> 01:02:59,280
Using the presentation controller's delegate,

1553
01:02:59,280 --> 01:03:04,050
you can affect how the popover adapts to being on an iPhone.

1554
01:03:04,060 --> 01:03:08,960
So a popover on an iPad pops up like you saw in

1555
01:03:08,960 --> 01:03:10,660
the previous screen there.

1556
01:03:10,660 --> 01:03:12,260
A little window that pops up.

1557
01:03:12,260 --> 01:03:14,500
Well on the iPhone it adapts and

1558
01:03:14,500 --> 01:03:17,930
instead does modal, full-screen, okay?

1559
01:03:17,930 --> 01:03:22,200
So it doesn't pop up as a little thing on an iPhone.

1560
01:03:22,200 --> 01:03:23,370
And why is that?

1561
01:03:23,370 --> 01:03:24,540
Well, the iPhone's smaller and

1562
01:03:24,540 --> 01:03:27,670
so if the thing you're popping up is really big,

1563
01:03:27,680 --> 01:03:30,110
there might be no way to cram it in there and make it fit.

1564
01:03:31,180 --> 01:03:33,240
But if you present full screen modal,

1565
01:03:33,250 --> 01:03:34,810
it's definitely going to fit.

1566
01:03:34,810 --> 01:03:37,620
Okay, so it automatically does this.

1567
01:03:37,620 --> 01:03:39,680
iOS automatically does this adaptation for you,

1568
01:03:39,690 --> 01:03:42,450
just like it automatically adapts to split view and

1569
01:03:42,450 --> 01:03:45,260
navigation controller if you build your storyboard right

1570
01:03:45,260 --> 01:03:48,730
on iPhone, but using the delegate or the presentation

1571
01:03:48,730 --> 01:03:51,530
control, you can actually affect that adaptation.

1572
01:03:51,530 --> 01:03:54,130
Okay. So, here is a brief slide.

1573
01:03:54,130 --> 01:03:57,100
We'll have a brief slide that talks about that in a second.

1574
01:03:57,100 --> 01:03:59,900
But, first I want to show you how in prepare for segue you

1575
01:03:59,900 --> 01:04:02,800
get a hold of that popover presentation controller and

1576
01:04:02,810 --> 01:04:04,270
you can do something like set this delegate.

1577
01:04:04,270 --> 01:04:07,470
So this prepare for segue all of the green is basically

1578
01:04:07,480 --> 01:04:10,480
the same as you would have in any other prepare for segue.

1579
01:04:10,480 --> 01:04:13,950
But the yellow line there is where I am,

1580
01:04:13,950 --> 01:04:17,220
from the view controller that I'm segue-ing to,

1581
01:04:17,220 --> 01:04:20,520
I'm asking for it's popover presentation controller.

1582
01:04:20,520 --> 01:04:22,240
'Kay?

1583
01:04:22,240 --> 01:04:23,960
So this is an object, the presentation controller,

1584
01:04:23,960 --> 01:04:26,090
that will only come back non-nil, here,

1585
01:04:26,090 --> 01:04:28,660
if I'm being segued via popover.

1586
01:04:28,660 --> 01:04:30,190
If I'm being segued some other way,

1587
01:04:30,200 --> 01:04:33,460
like just pushing in a navigation controller, or

1588
01:04:33,470 --> 01:04:35,600
something like that, then this'll come back nil, and

1589
01:04:35,600 --> 01:04:37,670
I'm just gonna ignore it, cuz I do if let right there.

1590
01:04:38,840 --> 01:04:40,840
But if it is popover, then I make it this popover

1591
01:04:40,840 --> 01:04:42,200
presentation controller and if you go look in

1592
01:04:42,210 --> 01:04:44,910
the documentation for popover presentation controller,

1593
01:04:44,910 --> 01:04:46,810
you'll see it has some things you can configure about

1594
01:04:46,810 --> 01:04:49,580
the presentation like the permitted arrow directions,

1595
01:04:49,580 --> 01:04:50,580
that little white triangle.

1596
01:04:50,580 --> 01:04:52,180
Where is that allowed to point?

1597
01:04:52,180 --> 01:04:53,350
In what direction?

1598
01:04:53,350 --> 01:04:55,380
And you can also set yourself,

1599
01:04:55,380 --> 01:04:58,180
the controller, you know you add the controller as

1600
01:04:58,190 --> 01:05:00,120
the delegate of the presentation controller.

1601
01:05:00,120 --> 01:05:02,420
Okay, so
好的 

1602
01:05:02,420 --> 01:05:06,860
when you set yourself as the delegate, what can you do?
当设置自身为代理时，你可以做些什么呢？ 

1603
01:05:06,860 --> 01:05:08,560
What is it going to offer to let you do?
你可以提供些什么呢？ 

1604
01:05:08,560 --> 01:05:09,860
Well, there's  number of things, but
事实上，有很多， 

1605
01:05:09,860 --> 01:05:12,760
I'm gonna talk about this adaptation behavior.
我会讲下适配特性。

1606
01:05:12,770 --> 01:05:15,270
So here's two methods that are in the protocol for
代理可以实现协议中

1607
01:05:15,270 --> 01:05:17,070
the delegate there.
的两个 方法 。

1608
01:05:17,070 --> 01:05:19,340
One is called adapter presentation,
一个是

1609
01:05:19,340 --> 01:05:22,210
presentation style for presentation controller.
adaptivePres...方法（方法名很长）。

1610
01:05:22,210 --> 01:05:26,540
Okay, so when the popover is trying to present, it's going
没错，当popover弹出来的时候， 

1611
01:05:26,540 --> 01:05:30,810
to ask you, how do you want me to adapt if I'm on an iPhone?
会问代理，我在iphone上要怎样适配呢？ 

1612
01:05:31,980 --> 01:05:35,980
Now by default, this is going to say full screen modal, but
默认会以modal方式全屏显示， 

1613
01:05:35,990 --> 01:05:39,320
you can say you want modal presentation style none
但你可以将展示风格设置为none 。

1614
01:05:39,320 --> 01:05:42,060
which means don't adapt.
表示不需要适配 

1615
01:05:42,060 --> 01:05:44,490
So presented on the iPhone exactly like you do
这样就和ipad上的展示方式

1616
01:05:44,490 --> 01:05:46,090
on the iPad.
一样 了 。

1617
01:05:46,090 --> 01:05:48,460
Okay, so for
是的， 

1618
01:05:48,460 --> 01:05:50,830
a small popover, this makes a lot of sense, okay.
对于小的popover这并没问题 。

1619
01:05:50,830 --> 01:05:52,460
So this is how you can basically turn off
这是你怎样关闭适配特性 

1620
01:05:52,470 --> 01:05:53,970
that adaptation behavior.
的方法 。

1621
01:05:53,970 --> 01:05:55,970
You can even go way more powerful than that,
还有更强大的方法， 

1622
01:05:55,970 --> 01:05:57,900
the other one here presentation controller view,
用来展示另一个控制器， 

1623
01:05:57,900 --> 01:06:00,270
view controller for adapted presentation style,
就是presentationController（）->UIViewController方法， 

1624
01:06:00,270 --> 01:06:04,210
you can return a whole other MVC on the iPhone.
用来在iphone上你可以返回另一个完整的控制器 。

1625
01:06:04,210 --> 01:06:06,580
That displays your MVC in a totally different way
那会以另一种完全不同显示方式

1626
01:06:06,580 --> 01:06:09,110
maybe it's wrapped in a navigation controller or
可能被包含在导航控制器中或 

1627
01:06:09,110 --> 01:06:10,410
it can be completely different.
其他不同的形式 。

1628
01:06:10,420 --> 01:06:13,980
So you can really customize it but I just wanted to
你完全可以各种自定义， 

1629
01:06:13,990 --> 01:06:16,590
show the this first one because it's common to say oh
但我只想展示第一种，因为这种 

1630
01:06:16,590 --> 01:06:18,590
I just have this small little pop over thing.
小popover很常用 。

1631
01:06:18,590 --> 01:06:20,460
I want it to look like a pop over on an iPhone and
我想要在iphone上显示popover 

1632
01:06:20,460 --> 01:06:21,320
this is how you do that.
你用这种方式。

1633
01:06:22,560 --> 01:06:23,990
Okay.
好的 。

1634
01:06:23,990 --> 01:06:28,290
The last thing about popover that's important is the size.
poover最后一个重要的部分是尺寸。

1635
01:06:28,300 --> 01:06:31,000
So you'd really like the popover to come up and
你想要popover显示的尺寸 

1636
01:06:31,000 --> 01:06:33,870
be exactly the right size to fit the MVC
正确地适配到控制器中 

1637
01:06:33,870 --> 01:06:37,200
because your MVC might be different sizes, okay?
因为你的控制器尺寸可能不同，明白吗？ 

1638
01:06:37,200 --> 01:06:39,940
Even as a given MVC might be different sizes and so
甚至当特定控制器有不同尺寸 

1639
01:06:39,940 --> 01:06:41,940
you really wanna be able to control the size.
而且你希望能控制这个尺寸 。

1640
01:06:41,940 --> 01:06:44,410
And in a really object oriented way,
用一种面向对象的方式 ，

1641
01:06:44,410 --> 01:06:48,110
the way the system does that, is it asks the MVC that is in
也就是系统所用的方式，会像控制器询问 

1642
01:06:48,110 --> 01:06:50,880
the popover what is your preferred size?
合适的尺寸是多少？

1643
01:06:50,880 --> 01:06:54,620
What would you like to be if I could grant your wish,
如果我满足你的愿望，让你来指定尺寸，
 
1644
01:06:54,620 --> 01:06:57,320
what would you like to be, okay?
你希望是多少，明白吗？ 

1645
01:06:57,320 --> 01:07:00,320
So it's cuz only that MVC really knows what
所以只有控制器才知道 

1646
01:07:00,330 --> 01:07:03,190
its preferred or ideal size might be.
最理想的尺寸 

1647
01:07:03,190 --> 01:07:04,990
Now that's only a recommendation because
不过这只被作为参考建议，因为

1648
01:07:05,000 --> 01:07:07,130
the popover has some constraints as well, right?
popover自身也有一些约束，明白吗？ 

1649
01:07:07,130 --> 01:07:10,570
Because it can only appear in certain places on screen, and
因为它只能出现在屏幕的特定区域， 

1650
01:07:10,570 --> 01:07:13,940
the screen is only so big, and those arrows might have to go
而屏幕只有这么大，箭头要指向 

1651
01:07:13,940 --> 01:07:16,970
a certain direction, they might be restricted, so
特定方向，他们或许被 限制了，所以

1652
01:07:16,970 --> 01:07:20,070
the popover has got its own things to deal with.
popover也要考虑自身的约束。

1653
01:07:20,080 --> 01:07:25,080
But it's going to ask the MVC it's putting inside of
但是它会询问其中的控制器
 
1654
01:07:25,080 --> 01:07:27,080
itself what would you like to be?
应该怎样展示呢？
 
1655
01:07:27,080 --> 01:07:30,620
And so this is just a property in your UI view controller.
这只是控制器的一个属性 .

1656
01:07:30,620 --> 01:07:33,650
You can, for example, override this.
你可以重写它 .

1657
01:07:33,650 --> 01:07:34,920
Okay. Override the property and
好的，重写这个属性 

1658
01:07:34,920 --> 01:07:36,820
return your preferred size.
并返回合适的尺寸 .

1659
01:07:36,820 --> 01:07:38,190
Or you can set.
或者你可以直接设置 .

1660
01:07:38,190 --> 01:07:39,220
It's a settable property so
这个属性是可写的 

1661
01:07:39,230 --> 01:07:41,230
you can set your preferred size.
所以你可以设置合适的尺寸 .

1662
01:07:41,230 --> 01:07:44,930
If your preferred size is always an exact size just set
如果你的尺寸是固定的 

1663
01:07:44,930 --> 01:07:46,400
your preferred size to that.
直接设置成它就可以了 。

1664
01:07:46,400 --> 01:07:48,530
Or, if you have to calculate your preferred size based on
或者，你必须计算合适的尺寸根据

1665
01:07:48,530 --> 01:07:50,470
what your content is, which you're going to
控制器的内容，你

1666
01:07:50,470 --> 01:07:54,100
see in the demo that I'm going to show about popovers
一会儿将会看到

1667
01:07:54,100 --> 01:07:58,370
in a moment here, than you can override it,
我如何在案例中
 
1668
01:07:58,380 --> 01:08:00,370
which is what I did in that demo.
重写属性。

1669
01:08:00,380 --> 01:08:03,340
'Kay, so, we're gonna have
好的，我们会 

1670
01:08:03,350 --> 01:08:08,010
a demo here which is adding a popover to psychologists.
在案例的时候为psychologists添加popover 

1671
01:08:08,020 --> 01:08:09,750
Popovers I
popovers会 

1672
01:08:09,750 --> 01:08:11,480
made them extra credit on your homework assignment.
为你的课后作业增加学分 

1673
01:08:12,620 --> 01:08:15,350
So you don't have to do them but I recommend doing it cuz
虽然你不需要做这个 但是我还是推荐你做 

1674
01:08:15,360 --> 01:08:17,620
it's a good experience to make a popover.
因为做popover的体验很有趣 。

1675
01:08:17,620 --> 01:08:18,920
Okay, it is something.
好的 

1676
01:08:20,190 --> 01:08:22,890
If I had enough kind of room in your assignment to
如果我觉得你的作业还有提升的空间
 
1677
01:08:22,900 --> 01:08:25,100
fit popovers, I wouldn't have made it extra credit, but
我不会给你额外的学分，但是
 
1678
01:08:25,100 --> 01:08:28,130
I just feel I have only given you one week's worth of work,
由于这只是一周的作业
 
1679
01:08:28,130 --> 01:08:29,930
I don't want to over burden you,
我不想你们有太多负担 

1680
01:08:29,930 --> 01:08:31,730
but this is an extra credit you really want to try to do,
但这个额外的学分很值得你尝试， 

1681
01:08:31,740 --> 01:08:33,720
I think, if you can.
如果你可以的话 。

1682
01:08:33,720 --> 01:08:35,700
Because in your final project, you're almost certainly going
因为在期末项目上，你很可能会 

1683
01:08:35,710 --> 01:08:39,140
to have some reason, hopefully to put a popover in there.
使用到popover 。

1684
01:08:39,140 --> 01:08:42,140
Okay now before I do the demo let me talk about
在我做案例之前我想讲一下 

1685
01:08:42,150 --> 01:08:45,110
what's coming up because I never go back to the slides.
接下来的内容，因为我不会再展示这个课件 

1686
01:08:45,120 --> 01:08:48,150
Friday we are gonna have that Friday section again for
星期五的部分 

1687
01:08:48,150 --> 01:08:51,650
IT & T people sorry it's not gonna be on video.
不会录制课程 

1688
01:08:51,650 --> 01:08:54,060
It's not in a room that we can do the video in really.
因为是在另外一个教室，我们无法录制课程。

1689
01:08:54,060 --> 01:08:57,360
So that should be a good one.
所以那应该很不错 。

1690
01:08:57,360 --> 01:08:59,490
And that's also an extra credit item in
这也是一个额外学分 

1691
01:08:59,500 --> 01:09:02,300
your homework is to analyze your performance of your
如果你在课后作业中 

1692
01:09:02,300 --> 01:09:05,630
calculator that you're doing, your graphing calculator.
分析你的计算器的性能好。

1693
01:09:05,630 --> 01:09:07,830
And find out where it's slow and
然后找出是哪里导致程序变慢 

1694
01:09:07,840 --> 01:09:09,170
then maybe you can fix it if you want,
并修复它 ，

1695
01:09:09,170 --> 01:09:12,300
that's another extra credit to try and go fix it.
这是另外一个你可以尝试的额外学分 。

1696
01:09:12,310 --> 01:09:13,810
Next Monday I'm
下周一我会 

1697
01:09:13,810 --> 01:09:15,310
going to dive into the View Controller Lifecycle.
开始讲控制器生命周期 

1698
01:09:15,310 --> 01:09:18,310
I hate to have had put the View Controller Lifecycle onff
我真的很不想把这个内容推后 

1699
01:09:18,310 --> 01:09:19,710
for so long.
这么晚 。

1700
01:09:19,710 --> 01:09:22,950
But in some ways it's kind of nice because it forces you to
不过也有好处，它强迫你

1701
01:09:22,950 --> 01:09:24,850
use other parts of your View Controller,
使用控制器的其他部分 来实现，

1702
01:09:24,850 --> 01:09:28,050
like the property observers in your outlets, and
比如outlet的属性监听 ，

1703
01:09:28,050 --> 01:09:31,750
in your model setting, and things ike that.
就像你设置model那样 。

1704
01:09:31,760 --> 01:09:33,360
But you're going to find out on Monday, you're
但是在星期一你会发现， 

1705
01:09:33,360 --> 01:09:35,190
probably going to be mad at me on Monday when I show you
你可能会生气，当我展示一些 

1706
01:09:35,190 --> 01:09:37,490
all these nice methods in the View Controller Lifecycle and
控制器中有用的，生命周期相关方法 

1707
01:09:37,490 --> 01:09:39,890
you're, like oh if you'd just told me that last week it
你可能会觉得，如果你上星期告诉我这些方法 

1708
01:09:39,900 --> 01:09:41,730
could have made something so much easier.
可以减轻多少工作量啊 。

1709
01:09:41,730 --> 01:09:44,570
But the homeworks are designed to not need any of the view
但是课后作业就是这样设计的 

1710
01:09:44,570 --> 01:09:46,530
controller life cycle methods, you shouldn't need them for
不使用生命周期中的方法，你并不需要他们 

1711
01:09:46,540 --> 01:09:48,300
anything, even for the extra credits, you shouldn't.
即使额外学分中，你也不应该使用他们 。

1712
01:09:49,440 --> 01:09:51,870
And then again, I have autolayout question mark,
又一次，我为autolayout添加了问号，
 
1713
01:09:51,870 --> 01:09:53,670
kind of a running joke,
只是开个玩笑，
 
1714
01:09:53,670 --> 01:09:55,470
we'll see, hopefully we'll get to autolayout eventually in
我们会最终详细讲到autolayout的
 
1715
01:09:55,480 --> 01:09:59,110
this quarter, but like I say, see I'm kind of sprinkling it
就像我说的，我在每个案例中都会灌输一点点
 
1716
01:09:59,110 --> 01:10:01,710
in in every demo, a little bit of autolayout, so
autolayout的知识，
 
1717
01:10:01,720 --> 01:10:04,150
hopefully you're learning a little bit along the way.
希望这一路走来你已经学到了一些。
 
1718
01:10:04,150 --> 01:10:07,190
And then, after Monday, we'll start diving into
然后，星期一之后，我们开始 

1719
01:10:07,190 --> 01:10:10,320
multithreading, because you're talking about a device,
学习多线程，因为你在和设备交互 ，

1720
01:10:10,320 --> 01:10:13,790
a phone, that needs to be highly responsive to the user.
就是iphone，它需要有很高的响应速度 。

1721
01:10:13,790 --> 01:10:14,730
Okay? It needs to
明白吗？它需要 

1722
01:10:14,730 --> 01:10:16,460
always be responding to touches.
响应用户的每次点击 。

1723
01:10:16,460 --> 01:10:19,900
It cannot, you press a touch and then it freezes for
不能点一下屏幕后就卡在那里 

1724
01:10:19,900 --> 01:10:22,630
two seconds or even a second, while it goes off and
几秒钟都没有 

1725
01:10:22,630 --> 01:10:23,920
does something.
反应 。

1726
01:10:23,920 --> 01:10:25,200
It needs to immediately animating a response to
它必须立即以动画的方式响应 

1727
01:10:25,200 --> 01:10:26,890
what you're doing.
用户的操作 。

1728
01:10:26,890 --> 01:10:28,570
So the only way to make that work if you're doing things
完成耗时操作的唯一方式 

1729
01:10:28,570 --> 01:10:31,740
like accessing the network, which is really slow,
比如网络请求，这非常慢 ，

1730
01:10:31,740 --> 01:10:34,180
compared to the things you're doing on-screen,
相对于屏幕上的操作来说， 

1731
01:10:34,180 --> 01:10:36,840
you need to be able to do those things offline of
你需要将这些耗时操作移到 

1732
01:10:36,850 --> 01:10:40,350
the main thread of execution, so we'll talk about that.
主线程之外执行，我们会讲到的 。

1733
01:10:40,350 --> 01:10:42,180
Then we'll start talking about scrolling.
然后我们会讲scrolling 。

1734
01:10:42,180 --> 01:10:43,720
Because you've got this small screen.
因为屏幕很小 。

1735
01:10:43,720 --> 01:10:45,890
It's nice because it fits in your pocket but
虽然这样可以很方便的放在口袋中 

1736
01:10:45,890 --> 01:10:47,390
if you want to show something big,
但是如果你需要展示很大的东西 ，

1737
01:10:47,390 --> 01:10:49,020
you need to be able to scroll around in it.
你需要可以到处拖动它 。

1738
01:10:49,020 --> 01:10:50,690
If you want to see a nice image and
如果你想查看高清图片 

1739
01:10:50,690 --> 01:10:52,360
you want to zoom in and see a really detailed part of it,
而且想放大然后查看细节部分， 

1740
01:10:52,360 --> 01:10:55,130
you have to be able to zoom in and scroll around.
你就必须可以放大并拖动它 。

1741
01:10:55,130 --> 01:10:57,700
And then we're going to talk about the next big thing and
然后我们会讲 另一个大板块的知识

1742
01:10:57,700 --> 01:11:00,400
the topic of your next homework after the calculator.
你会在计算器后的下一个作业中用到。
 
1743
01:11:00,400 --> 01:11:02,770
Which is, I know you love the calculator, but
 我知道你喜欢计算器，但是

1744
01:11:02,770 --> 01:11:05,070
this is your last assignment for the calculator.
 这是你计算器部分的最后一次作业了。

1745
01:11:05,070 --> 01:11:07,900
We're going to move on to a whole thing called table view.
我们会开始tableview 。

1746
01:11:07,910 --> 01:11:12,340
Which is really highly delicate based user interface
它是一个非常精致的用户界面
 
1747
01:11:12,340 --> 01:11:15,710
mechanism in iOS that really helps you understand
 它可以帮助你更好地理解

1748
01:11:15,710 --> 01:11:20,150
how iOS works when it comes to sophisticated user interface.
 ios是如何工作的，当遇到更复杂的界面的时候。

1749
01:11:20,150 --> 01:11:22,150
Okay? So that's what we're going to
明白吗？这是我们

1750
01:11:22,150 --> 01:11:22,950
be doing next week.
下周的 内容 。

1751
01:11:24,450 --> 01:11:25,050
All right?
没问题吧？ 

1752
01:11:25,050 --> 01:11:25,620
Thank you.
好的 。

1753
01:11:27,020 --> 01:11:28,390
Okay. So,
好的 ，

1754
01:11:28,390 --> 01:11:31,390
let's continue with our psychologist demo, here.
我们继续psychologist案例 。

1755
01:11:31,390 --> 01:11:33,090
We're going to add a popover.
我们会增加一个popover 。

1756
01:11:33,090 --> 01:11:37,400
And the place I'm gonna add a popover is down here, okay?
我会加在这里 ，

1757
01:11:37,400 --> 01:11:39,330
In this HappinessViewController, here,
在HappinessViewController这里 ，

1758
01:11:39,330 --> 01:11:41,270
I'm gonna put a little button, here.
我会加一个小按钮在这里 。

1759
01:11:41,270 --> 01:11:44,270
And this popover is going to show the history of
然后会用popover展示

1760
01:11:44,270 --> 01:11:47,240
all the diagnoses made by the psychologist.
psychologist 所有的diagnoses历史 。

1761
01:11:47,240 --> 01:11:50,070
So the psychologist is going to be diagnosing things as we
所以psychologist会记录
 
1762
01:11:50,080 --> 01:11:51,970
click on what we see in our dreams, and
 我们的点击历史，

1763
01:11:51,980 --> 01:11:54,680
we're going to want a little button here that brings up
我们会用一个小按钮来弹出 

1764
01:11:54,680 --> 01:11:56,010
a popover right here, and
popover，然后 

1765
01:11:56,010 --> 01:11:58,980
this popover is going to show the history of the diagnoses.
这个popover会显示diagnoses历史 。

1766
01:11:58,980 --> 01:12:02,320
Now since this is a demo, I wanna keep the code simple.
因为只是案例，我想简单一点 。

1767
01:12:02,320 --> 01:12:04,820
It's gonna show the history of the diagnosis just as
我只会显示 

1768
01:12:04,820 --> 01:12:07,450
an array of ints, because we know that our happiness is
一个整数数组，因为happiness程度用 

1769
01:12:07,460 --> 01:12:08,490
represented in int.
整数来表示 。

1770
01:12:08,490 --> 01:12:09,720
So it's gonna be shown in an array of ints.
所以会以一组整数来显示。 

1771
01:12:09,730 --> 01:12:12,330
It might be nicer to show it in a different way, but
或许有更好的方式，但是 

1772
01:12:12,330 --> 01:12:14,460
we're gonna show it as an array of ints.
我只显示一个整数数组 。

1773
01:12:15,500 --> 01:12:19,730
So let's build this popover segue first and
我们先建popover  segue

1774
01:12:19,730 --> 01:12:23,000
then we'll have to go on to build a brand new MVC,
然后建一个全新的控制器 ，

1775
01:12:23,000 --> 01:12:24,970
actually, to show the information.
来显示信息 。

1776
01:12:24,970 --> 01:12:28,570
It's just gonna be a simple MVC that shows text only, so
只是一个显示文本的

1777
01:12:28,570 --> 01:12:29,810
we'll have to do that.
简单控制器 。

1778
01:12:29,810 --> 01:12:31,740
And then we're obviously gonna prepare this segue.
然后很显然，我们需要实现prepareForSegue方法。 

1779
01:12:31,740 --> 01:12:36,880
But first let's build the ui portion of this and to do that
我们需要先完成界面部分 

1780
01:12:36,880 --> 01:12:40,550
I need to add a little bar but here is so I'm going to
先添加一个小按钮 

1781
01:12:40,550 --> 01:12:45,990
bring up my object palette here and zoom in on this guy.
打开控件区域然后放大。 

1782
01:12:47,520 --> 01:12:54,230
And when you put a button here you don't use this UI button.
然后拖一个按钮，但不要用UIButton。 

1783
01:12:54,230 --> 01:12:57,960
Okay so UI buttons, even if you drag the UI Button here it
虽然你使用UIButton 

1784
01:12:57,970 --> 01:12:59,830
will look like it is going to work but
看起来没问题 

1785
01:12:59,830 --> 01:13:03,070
actually don't do that, it will mess you up.
但不要用UIButton，这会有很多问题。 

1786
01:13:04,170 --> 01:13:07,440
Instead you want to go down here quite a ways
你需要选择最下面的 

1787
01:13:07,440 --> 01:13:11,980
towards the very bottom and there is this Bar Button Item.
BarButtonItem按钮。 

1788
01:13:11,980 --> 01:13:15,480
Bar Button Items is a little lighter weight button that
BarButtonItem是轻量化的按钮 

1789
01:13:15,480 --> 01:13:19,750
goes in bars like this, navigation bars and tool bars.
在导航栏或工具栏中使用他们。 

1790
01:13:19,750 --> 01:13:21,920
So I should put that one right there.
我把它放在右上角 。

1791
01:13:21,920 --> 01:13:25,190
We'll call this one history since it's the diagnostic
我会叫它history 

1792
01:13:25,190 --> 01:13:29,190
history of what's going on with this patient right here.
因为是diagnostic的历史。 

1793
01:13:29,190 --> 01:13:31,530
And of course if we're gonna have a popover,
当然，如果我们使用popover， 

1794
01:13:31,530 --> 01:13:32,990
the popover shows a MVC.
popover里面包含一个控制器 。

1795
01:13:33,000 --> 01:13:34,660
So we need to create a new MVC.
所以我们还需要创建一个新控制器。 

1796
01:13:34,660 --> 01:13:38,300
So let's go back to the top here and get ourselves
所以我们回去创建 

1797
01:13:38,300 --> 01:13:41,070
brand new view controllers, this is just the regular old
一个新控制器，就是我们 

1798
01:13:41,070 --> 01:13:43,000
view controller like we've dragged out before, so
通常拖的普通控制器， 

1799
01:13:43,010 --> 01:13:48,270
I'm just gonna drag that right in here, and make some room.
我拖到这里，腾一些空间出来 。

1800
01:13:48,280 --> 01:13:50,840
So here we have this, zoom out a little so
缩小一点 ，

1801
01:13:50,850 --> 01:13:52,480
you can see it a little better, and
这样看起来更好， 

1802
01:13:52,480 --> 01:13:56,210
what we want is for this little button to segue to this
我们想这个小按钮可以segue到这个 

1803
01:13:56,220 --> 01:14:00,350
MVC, and show it in a little popover right here.
控制器，并显示在popover中。 

1804
01:14:00,350 --> 01:14:01,620
Okay? So that's all we
明白吗？这是 

1805
01:14:01,620 --> 01:14:02,690
wanna do there.
所有需要做的 。

1806
01:14:02,690 --> 01:14:04,890
So let's just Ctrl+Drag, just like we
我们只要Ctrl+Drag，就像我们 

1807
01:14:04,890 --> 01:14:06,790
created in the other segue, we're gonna Ctrl+Drag from
创建其他segue一样，直接从 

1808
01:14:06,790 --> 01:14:10,290
the history button over to this MVC, and when we let history 按钮Ctrl+Drag到这个控制器，然后释放

1809
01:14:10,300 --> 01:14:13,130
it's gonna say well, what kind of segue do you want?
接下来会询问你，你想要什么类型到segue？ 

1810
01:14:13,130 --> 01:14:16,170
And we want the propover presentation segue right here.
我们需要popover类型 。

1811
01:14:16,170 --> 01:14:18,170
So I'm gonna click that.
所以点这个 。

1812
01:14:18,170 --> 01:14:20,450
This is a popover.
这是一个popover segue。 

1813
01:14:20,450 --> 01:14:22,740
If I click here, on the segue, and go to the attributes
如果我选中这个segue，

1814
01:14:22,740 --> 01:14:25,470
inspector here, you can see that it is a popover segue.
然后查看属性区域，你可以看到它是一个popover类型的segue。 

1815
01:14:25,480 --> 01:14:28,940
I can control where the little arrow, if you remember
我可以控制箭头的方向，回忆课件 里面

1816
01:14:28,950 --> 01:14:32,010
the slide about the popover, there was a little kind of
有一个 

1817
01:14:32,010 --> 01:14:35,280
triangle that was pointing at the thing that brought it up.
小三角形，指向触发popover的控件 

1818
01:14:35,280 --> 01:14:36,450
Like this History button, or
就像这里的history按钮，或者 

1819
01:14:36,450 --> 01:14:39,090
in that slide it was a little search button.
课件里面的搜索按钮。 

1820
01:14:39,090 --> 01:14:41,290
So I can control which direction that arrow pointed.
这样我可以控制箭头的指向。 

1821
01:14:41,290 --> 01:14:43,060
And I can even see here the anchor.
我甚至可以看到锚点 。

1822
01:14:43,060 --> 01:14:44,990
See it highlighting there.
看这个高亮的地方 。

1823
01:14:44,990 --> 01:14:47,690
That is going to bring up this popover.
它会弹出一个popover 。

1824
01:14:47,690 --> 01:14:48,560
So that's great.
非常好 。

1825
01:14:48,560 --> 01:14:49,830
And of course I need an identifier,
当然，我还需要一个identifier ，

1826
01:14:49,830 --> 01:14:51,760
just like any other segue, I need an identifier.
就像其他任何segue一样 。

1827
01:14:51,760 --> 01:14:54,930
So, this shows the diagnostic history, so
这个segue用来显示diagnostic历史 ，

1828
01:14:54,930 --> 01:14:58,370
I'm gonna call this Show Diagnostic History.
我就叫它Show Diagnostic History 。

1829
01:14:58,370 --> 01:15:00,140
Oh, my caps lock.
oh 大写键 。

1830
01:15:00,140 --> 01:15:01,500
There she is, there.
就是它了 。

1831
01:15:01,510 --> 01:15:02,770
History, there we go.
History 完成 。

1832
01:15:02,770 --> 01:15:04,770
Show Diagnostic History.
Show Diagnostic History 。

1833
01:15:04,780 --> 01:15:06,570
Okay?
明白吗？ 

1834
01:15:06,580 --> 01:15:09,080
So now we've got this set up to this segue and
现在我们已经设置好了segue和 

1835
01:15:09,080 --> 01:15:10,640
show this MVC.
被显示的控制器 。

1836
01:15:10,650 --> 01:15:13,250
Now, this MVC is just a blank MVC right now,
现在控制器是空白的 ，

1837
01:15:13,250 --> 01:15:15,820
but let's go ahead and run and see what this looks like.
我们先运行看下效果 。

1838
01:15:15,820 --> 01:15:18,920
So this is going to show a blank MVC at this point.
它应该会在这个点弹出一个空白控制器 。

1839
01:15:21,090 --> 01:15:24,020
So here's our iPad right here and we'll.
这是我们的ipad， 

1840
01:15:24,030 --> 01:15:25,660
Go to Landscape Mode.
切换到横屏模式 。

1841
01:15:25,660 --> 01:15:27,790
And so if I click on this,
如果我点击这里， 

1842
01:15:27,790 --> 01:15:29,930
you see I get this nice blank MVC appearing right here.
你可以看到，会弹出一个不错的控制器 。

1843
01:15:29,930 --> 01:15:34,500
So our next step in this is we need to create this MVC.
下一步我们需要创建这个控制器 。

1844
01:15:34,500 --> 01:15:35,930
All right, we're going to.
好的，我们需要 。

1845
01:15:36,940 --> 01:15:39,470
Create the MVC that is going to go in here.
创建一个控制器 。

1846
01:15:39,470 --> 01:15:42,170
It's going to be a very, very simple little MVC.
只是一个非常简单的控制器 。

1847
01:15:42,170 --> 01:15:46,010
It's just going to have a text view in it here to show text.
它只包含一个显示文本的textView 。

1848
01:15:46,010 --> 01:15:48,080
And that's all it's gonna do is show text.
它需要做的只是显示文本 。

1849
01:15:48,080 --> 01:15:50,180
It doesn't do anything else.
不需要做其他事情 。

1850
01:15:50,180 --> 01:15:51,800
Okay?
明白吗？ 

1851
01:15:51,800 --> 01:15:53,420
So, let's start by creating a new
我们先创建 

1852
01:15:54,520 --> 01:15:56,180
UI view controller subclass.
UIViewController子类 。

1853
01:15:56,190 --> 01:15:59,850
So again I'm gonna go to iOS source cocoa touch class here
所以我会到iOS source cocoa touch class区域 

1854
01:15:59,860 --> 01:16:01,620
because I'm gonna create a cocoa touch class, and
因为我需要创建cocoa touch class 

1855
01:16:01,620 --> 01:16:03,760
it is gonna be a UI view controller.
它是一个UIViewController 。

1856
01:16:03,760 --> 01:16:06,830
I'm gonna call it text UI view controller because that's what
我叫它textUIViewController 

1857
01:16:06,830 --> 01:16:08,260
it does, it shows some text.
因为它负责显示文本 。

1858
01:16:08,260 --> 01:16:09,960
That's all this view controller knows how to do.
这是这个控制器需要做的 。

1859
01:16:11,130 --> 01:16:13,900
I'm gonna put it in the same place all the rest of
我把它和剩下所有的swift文件

1860
01:16:13,900 --> 01:16:15,030
my SWF files are.
放 在一起 。

1861
01:16:16,140 --> 01:16:17,330
Okay, here it is.
好的，就是这里 。

1862
01:16:17,340 --> 01:16:18,800
Here's the code for it.
这是它的代码 。

1863
01:16:18,800 --> 01:16:21,270
We're gonna delete all of this stuff in here.
先全部删除 。

1864
01:16:22,210 --> 01:16:24,060
Start.
开始 。

1865
01:16:24,060 --> 01:16:25,910
Right, so we've got a nice subclass of UIViewController.
好的，我们有了UIViewController子类 。

1866
01:16:25,910 --> 01:16:28,180
We'll have to put our implementation in here.
我们需要在这里面实现 。

1867
01:16:28,180 --> 01:16:30,010
Meanwhile, let's go back to our storyboard and
除此之外，我们需要在storyboard中 

1868
01:16:30,010 --> 01:16:33,380
make sure that we set this thing's class in
确保这个类 

1869
01:16:33,380 --> 01:16:36,080
the identity inspector up here.
在identity inspector区域 

1870
01:16:36,090 --> 01:16:38,320
To be the text view controller, so
与storyboard中的控制器 ，

1871
01:16:38,320 --> 01:16:41,390
that we know this is a text view controller.
关联起来 。

1872
01:16:41,390 --> 01:16:42,690
Okay?
明白吗？ 

1873
01:16:42,690 --> 01:16:43,990
Now, let's talk about this thing's UI.
我们先看界面 。

1874
01:16:43,990 --> 01:16:45,430
It has a very simple UI.
界面会很简单 。

1875
01:16:45,430 --> 01:16:50,300
I'm actually gonna drag out a text displaying object here.
我将会拖一个文本控件到这里 。

1876
01:16:50,300 --> 01:16:51,700
And I'm not going to use label.
不要用label 。

1877
01:16:52,630 --> 01:16:54,400
Label is nice for one and two and
label适合两到 

1878
01:16:54,400 --> 01:16:58,040
maybe three lines of static text.
三行的静态文本 。

1879
01:16:58,040 --> 01:17:00,100
But I really want something that kind of can show as
而我需要尽可能多的显示 

1880
01:17:00,110 --> 01:17:01,870
much diagnostic history as I want it.
diagnostic历史 。

1881
01:17:01,870 --> 01:17:04,140
So I want something that shows a lot more text.
所以我需要可以显示很多文本的控件 。

1882
01:17:04,140 --> 01:17:05,740
A text field is
输入框 

1883
01:17:05,740 --> 01:17:07,340
not really appropriate because that's editable.
也不合适，因为它是可编辑的 。

1884
01:17:07,350 --> 01:17:08,610
One, two, three liner.
一到三行 。

1885
01:17:08,610 --> 01:17:10,910
So label and text field are very similar.
所以标签和输入框很相似 。

1886
01:17:10,920 --> 01:17:12,050
It's just editable or not.
区别在于能否编辑 。

1887
01:17:12,050 --> 01:17:14,530
But there's yet
但在下面还有一个 

1888
01:17:14,530 --> 01:17:17,020
another one down here, called text view, right here.
叫textView的控件 。

1889
01:17:17,020 --> 01:17:19,290
And this displays multiple lines of editable text.
它用来显示多行文本 。

1890
01:17:19,290 --> 01:17:23,860
It lets you set the font, and the text can be selectable.
你可以设置字体还可以选中文本 。

1891
01:17:23,860 --> 01:17:25,560
You can copy and paste from it, things like that.
还可以复制粘贴等 。

1892
01:17:25,560 --> 01:17:27,330
So it's a much more powerful text styler, but
功能非常强大， 

1893
01:17:27,330 --> 01:17:29,100
we'll talk about this later in the quarter.
后期会详细讲到 。

1894
01:17:29,100 --> 01:17:32,330
But for now I'm just going to drag this in right here.
现在我只需要拖到这里 。

1895
01:17:32,330 --> 01:17:34,730
You noticed I used the blue lines.
注意我如何使用辅助线 。

1896
01:17:34,740 --> 01:17:35,770
I'm going to go up here and
我会到这里 

1897
01:17:35,770 --> 01:17:37,800
reset to suggested constraints.
选择reset to suggested constraints 

1898
01:17:37,800 --> 01:17:41,140
I'm going to go over here to the size inspector up here.
然后到size inspector 。

1899
01:17:41,140 --> 01:17:44,880
And verify that my constraints are the way I want, and
确认所有约束正确 ，

1900
01:17:44,880 --> 01:17:45,610
they look fine.
他们看起来不错。

1901
01:17:45,610 --> 01:17:47,410
Okay, so that's good.

1902
01:17:47,410 --> 01:17:50,450
I could also set some attributes maybe, about this

1903
01:17:50,450 --> 01:17:54,180
text view, like I probably don't want it to be editable.

1904
01:17:54,190 --> 01:17:57,050
I don't want the diagnostic history to be actually,

1905
01:17:57,050 --> 01:17:59,050
you know, touched on and edited.

1906
01:17:59,060 --> 01:18:00,760
But it's not bad to have it selectable,

1907
01:18:00,760 --> 01:18:03,930
someone might wanna select the diagnostic history and

1908
01:18:03,930 --> 01:18:05,630
then copy it and

1909
01:18:05,630 --> 01:18:07,330
paste it somewhere, or something like that.

1910
01:18:07,330 --> 01:18:09,530
Or you could set the font to be larger too,

1911
01:18:09,530 --> 01:18:12,430
maybe something 24 point or something like that.

1912
01:18:13,370 --> 01:18:15,570
And of course we've got this kind of

1913
01:18:17,170 --> 01:18:19,710
pseudo latin placeholder text right here.

1914
01:18:19,710 --> 01:18:21,270
But that's not gonna matter cuz that's not

1915
01:18:21,280 --> 01:18:23,040
gonna show because we're going to

1916
01:18:23,040 --> 01:18:27,880
set the text we want when we prepare for this segue, okay?

1917
01:18:27,880 --> 01:18:30,350
So now let's go ahead and wire up this UI.

1918
01:18:30,350 --> 01:18:32,480
We've got this text view right here.

1919
01:18:32,480 --> 01:18:35,150
Let's Ctrl + Drag to create an outlet to it, okay?

1920
01:18:35,150 --> 01:18:37,750
I'm gonna call that outlet text view.

1921
01:18:37,760 --> 01:18:39,190
So, we've got a nice outlet here.

1922
01:18:39,190 --> 01:18:41,790
And let's add a model to our text view controller.

1923
01:18:41,790 --> 01:18:43,460
My model, I'm going to call it text.

1924
01:18:43,460 --> 01:18:44,860
It's going to be a string.

1925
01:18:44,860 --> 01:18:46,560
We'll start out as an empty string.

1926
01:18:47,560 --> 01:18:48,700
Okay.

1927
01:18:48,700 --> 01:18:51,130
Now every time my model gets set,

1928
01:18:52,170 --> 01:18:56,870
I want to make sure that I update my text views text.

1929
01:18:56,870 --> 01:19:00,410
So text view is this thing that manages text.

1930
01:19:00,410 --> 01:19:03,080
And you can see has an enormous number of things you

1931
01:19:03,080 --> 01:19:05,810
can do on it it's a very powerful text object, but

1932
01:19:05,810 --> 01:19:07,910
it also has just a simple method called text.

1933
01:19:07,910 --> 01:19:11,520
Just like UI label does, and we're gonna set that equal to

1934
01:19:11,520 --> 01:19:14,020
our text the model's text right.

1935
01:19:14,020 --> 01:19:16,720
And just to be safe in case this is being called while

1936
01:19:16,720 --> 01:19:17,990
we're preparing.

1937
01:19:17,990 --> 01:19:20,490
Okay, we'll do the same thing with optional chaining in

1938
01:19:20,490 --> 01:19:22,760
case our outlet here has not been set.

1939
01:19:22,760 --> 01:19:25,790
And similarly when our outlet finally does get

1940
01:19:25,800 --> 01:19:31,530
set by the system, we're going to have it, property observer,

1941
01:19:31,540 --> 01:19:35,000
say text view dot text equals text.

1942
01:19:36,110 --> 01:19:37,600
Okay. And here we don't have to do

1943
01:19:37,610 --> 01:19:40,340
the question mark because where actually the text view

1944
01:19:40,340 --> 01:19:41,840
is being set by the system, so

1945
01:19:41,840 --> 01:19:44,340
we know it's set by the time this didSet happens.

1946
01:19:44,350 --> 01:19:46,080
Okay, so this is a very,

1947
01:19:46,080 --> 01:19:49,350
very simple MVC that we're using right here.

1948
01:19:50,580 --> 01:19:55,920
And it should have no

1949
01:19:55,920 --> 01:20:02,330
problem displaying our little diagnostic history, there.

1950
01:20:02,330 --> 01:20:04,540
Okay?

1951
01:20:04,550 --> 01:20:06,760
So now it's time to prepare this segue.

1952
01:20:06,770 --> 01:20:08,460
All right? We want to

1953
01:20:08,470 --> 01:20:11,230
prepare this segue so that you click on history,

1954
01:20:11,240 --> 01:20:13,740
it shows the diagnostic history here now.

1955
01:20:13,740 --> 01:20:16,810
We might, we know that this instigator right here is

1956
01:20:16,810 --> 01:20:19,070
inside this happiness view controller.

1957
01:20:19,080 --> 01:20:22,310
So we might think that we should go to our happiness

1958
01:20:22,310 --> 01:20:25,480
view controller right here and add the prepare in here.

1959
01:20:26,450 --> 01:20:28,350
Okay. And we could do that but

1960
01:20:28,350 --> 01:20:29,920
remember that happiness view control is

1961
01:20:29,920 --> 01:20:32,180
something we dragged in from another app.

1962
01:20:32,190 --> 01:20:35,220
And maybe that's another app that's being worked on at

1963
01:20:35,220 --> 01:20:37,990
our company or that there's another programer who

1964
01:20:37,990 --> 01:20:39,620
owns this particular class.

1965
01:20:39,630 --> 01:20:41,110
And he said no, no,

1966
01:20:41,110 --> 01:20:42,590
you can't add prepare for segue to this class.

1967
01:20:42,600 --> 01:20:45,230
It's a generic happiness showing thing.

1968
01:20:45,230 --> 01:20:46,960
It doesn't know anything about diagnostic history.

1969
01:20:46,970 --> 01:20:51,770
And they'd probably be right because if we started

1970
01:20:51,770 --> 01:20:54,400
adding things about diagnostic history to a happiness view

1971
01:20:54,410 --> 01:20:57,340
controller, it would be kind of a diagnostic or

1972
01:20:57,340 --> 01:21:00,340
diagnosed happiness view controller not

1973
01:21:00,340 --> 01:21:02,610
a happiness view controller anymore.

1974
01:21:02,610 --> 01:21:04,750
So where are we going to put our prepare for segue then?

1975
01:21:04,750 --> 01:21:06,850
The answer is that we are going to

1976
01:21:06,850 --> 01:21:08,450
actually create a subclass of

1977
01:21:08,450 --> 01:21:11,450
happiness view controller that we can use that's going to get

1978
01:21:11,450 --> 01:21:14,420
all the behavior of happiness view controller.

1979
01:21:14,420 --> 01:21:17,060
Plus, we're going to add the ability to do

1980
01:21:17,060 --> 01:21:18,160
the diagnostic history.

1981
01:21:18,160 --> 01:21:19,430
Okay. So we're going to

1982
01:21:19,430 --> 01:21:20,560
create a subclass.

1983
01:21:20,560 --> 01:21:22,660
We're just going to go up here.

1984
01:21:22,660 --> 01:21:24,600
New file.

1985
01:21:24,600 --> 01:21:26,530
Again, I'm just going to create a SWF file this time.

1986
01:21:26,530 --> 01:21:32,700
I'm going to call it diagnosed happiness view controller.

1987
01:21:32,710 --> 01:21:35,770
Okay, because it's just like a happiness controller, but

1988
01:21:35,770 --> 01:21:39,080
it's diagnosed happiness.

1989
01:21:39,080 --> 01:21:41,090
Here it is right here.

1990
01:21:41,100 --> 01:21:43,110
I'm gonna import UI kit because it's a UI class.

1991
01:21:43,110 --> 01:21:47,250
And I'm just gonna say that my class

1992
01:21:47,250 --> 01:21:52,220
diagnosed happiness view controller inherits from

1993
01:21:52,220 --> 01:21:53,920
happiness view controller, okay?

1994
01:21:54,920 --> 01:21:56,820
So I am going to be

1995
01:21:56,830 --> 01:21:58,730
a sub class that diagnosed happiness view controller.

1996
01:21:58,730 --> 01:22:01,360
Make sense?

1997
01:22:01,360 --> 01:22:04,230
Now, over here in my storyboard,

1998
01:22:04,230 --> 01:22:07,770
I am going to select this scene right here.

1999
01:22:07,770 --> 01:22:10,400
And I'm going to go to the identity inspector, and

2000
01:22:10,410 --> 01:22:12,240
I am going to say that this scene is no

2001
01:22:12,240 --> 01:22:14,210
longer a happiness view controller.

2002
01:22:14,210 --> 01:22:18,510
It is a diagnosed happiness view controller.

2003
01:22:18,510 --> 01:22:20,010
So now I'm this guy here.

2004
01:22:20,010 --> 01:22:23,550
Now, all my outlets that were set up will

2005
01:22:23,550 --> 01:22:24,820
work absolutely just fine.

2006
01:22:25,750 --> 01:22:27,320
Okay? Because I'm gonna inherit all

2007
01:22:27,320 --> 01:22:30,490
the capability of happiness view controller in my

2008
01:22:30,490 --> 01:22:32,690
diagnosed happiness view controller subclass.

2009
01:22:32,690 --> 01:22:35,220
In fact, what's really cool is I have a scene right here.

2010
01:22:35,230 --> 01:22:39,530
And this scene is a diagnose happiness view controller.

2011
01:22:39,530 --> 01:22:45,330
But if I go up here to pick a different class.

2012
01:22:45,330 --> 01:22:46,820
If I go back and

2013
01:22:46,820 --> 01:22:48,300
pick my happiness view controller, and I see it here.

2014
01:22:48,300 --> 01:22:51,500
You can see that it'll show me that that's hooked up.

2015
01:22:51,510 --> 01:22:53,510
Okay, cuz it knows that this is inherited,

2016
01:22:53,510 --> 01:22:54,670
this outlet is inherited.

2017
01:22:54,680 --> 01:22:56,540
And so it's hooked up.

2018
01:22:56,540 --> 01:22:59,880
So I can still go back and show my

2019
01:22:59,880 --> 01:23:03,150
superclasses for my diagnose happiness view controller to

2020
01:23:03,150 --> 01:23:05,580
happiness view controller, and see the outlets.

2021
01:23:07,390 --> 01:23:09,120
Okay? So this is an important thing.

2022
01:23:09,120 --> 01:23:11,250
Polymorphism of controllers, here.

2023
01:23:11,260 --> 01:23:13,760
You often might have a reusable controller.

2024
01:23:13,760 --> 01:23:15,160
And you wanna add something to it for

2025
01:23:15,160 --> 01:23:16,960
a particular storyboard or

2026
01:23:16,960 --> 01:23:18,590
a particular use in the storyboard.

2027
01:23:18,600 --> 01:23:21,730
Then you can just create a little subclass of it and

2028
01:23:21,730 --> 01:23:23,930
put your prepare.

2029
01:23:23,930 --> 01:23:26,130
So what we're gonna do is put our prepare right in here.

2030
01:23:27,270 --> 01:23:28,140
Okay?

2031
01:23:28,140 --> 01:23:30,090
So this

2032
01:23:30,090 --> 01:23:32,040
DiagnosedHappinessViewControl- ler, first of all it's

2033
01:23:32,040 --> 01:23:35,310
going to have to keep track of the diagnosed happinesses.

2034
01:23:35,310 --> 01:23:38,510
Okay. So we're gonna add a new var

2035
01:23:38,510 --> 01:23:43,080
to this subclass called diagnosed happiness.

2036
01:23:43,080 --> 01:23:46,990
Or diagnostic history, let's call it.

2037
01:23:46,990 --> 01:23:49,450
Okay it's the diagnostic history of this thing,

2038
01:23:49,460 --> 01:23:52,690
and we're just gonna keep it as an array of ints.

2039
01:23:52,690 --> 01:23:54,660
So we've got our nice diagnostic history right

2040
01:23:54,660 --> 01:24:00,400
there, and now let's go ahead and let's do this.

2041
01:24:00,400 --> 01:24:04,530
Let's go here and here and

2042
01:24:05,500 --> 01:24:07,800
here to give ourselves some room.

2043
01:24:07,810 --> 01:24:09,970
And let's override.

2044
01:24:09,970 --> 01:24:14,080
Actually, we don't even have to type the override here

2045
01:24:14,080 --> 01:24:17,310
because we start typing prepare for segway end tab.

2046
01:24:17,310 --> 01:24:18,450
It's going to automatically put

2047
01:24:18,450 --> 01:24:20,850
the override func in there for us, which is nice.

2048
01:24:20,850 --> 01:24:23,780
We don't have to be typing this unnecessarily.

2049
01:24:23,790 --> 01:24:25,250
So here's our repair for segue.

2050
01:24:25,250 --> 01:24:28,490
And so all we're going to be doing in this prepare for

2051
01:24:28,490 --> 01:24:31,960
segue is prepare our text to view controller, all right?

2052
01:24:31,960 --> 01:24:34,360
Because our text view controller, here,

2053
01:24:34,360 --> 01:24:37,100
is what we're seguing to.

2054
01:24:37,100 --> 01:24:38,900
So we're preparing this segue right here.

2055
01:24:38,900 --> 01:24:40,530
So we wanna prepare this MVC,

2056
01:24:40,530 --> 01:24:43,000
which is a text view controller, okay?

2057
01:24:43,000 --> 01:24:44,630
So let's prepare that.

2058
01:24:44,640 --> 01:24:49,510
And let's, first of all, make sure that this is

2059
01:24:49,510 --> 01:24:51,940
the segue we're talking about, here.

2060
01:24:51,940 --> 01:24:55,340
So let's go right here, check our identifiers,

2061
01:24:55,350 --> 01:24:57,710
get our identifier out of there.

2062
01:24:57,720 --> 01:24:59,310
Let's switch on our identifier.

2063
01:24:59,320 --> 01:25:04,590
Currently, we only support this one case.

2064
01:25:04,590 --> 01:25:06,620
I'm also going to put this case,

2065
01:25:06,620 --> 01:25:08,650
this is something you should probably always do,

2066
01:25:08,660 --> 01:25:11,990
which is to put the segue identifier here into some

2067
01:25:11,990 --> 01:25:15,200
sort of constants struct.

2068
01:25:15,200 --> 01:25:17,260
I'm gonna call this my history struct.

2069
01:25:17,270 --> 01:25:21,630
I'm going to have, and let me make sure this is private.

2070
01:25:21,640 --> 01:25:25,770
Oops. Let's type

2071
01:25:25,770 --> 01:25:27,240
this correctly here, private.

2072
01:25:27,240 --> 01:25:29,540
All right.

2073
01:25:29,540 --> 01:25:32,280
Yes.

2074
01:25:32,280 --> 01:25:35,010
I'm going to have this be static let

2075
01:25:35,010 --> 01:25:39,450
segue equal that show diagnostic history.

2076
01:25:39,450 --> 01:25:42,150
So this would be a segue identifier.

2077
01:25:42,150 --> 01:25:46,320
Maybe we'd even want to call this identifier,

2078
01:25:46,320 --> 01:25:48,120
segue identifier.

2079
01:25:48,130 --> 01:25:52,190
All right.

2080
01:25:52,200 --> 01:25:55,230
All right, so putting this in here it just, you know,

2081
01:25:55,230 --> 01:25:57,900
collects all your constant strings together.

2082
01:25:57,900 --> 01:25:59,970
And if you ever change something in your storybook.

2083
01:25:59,970 --> 01:26:02,670
Some people might even call this struct storyboard, so

2084
01:26:02,670 --> 01:26:06,110
that every string that's in your storyboard that has to

2085
01:26:06,110 --> 01:26:08,540
match up here in their code, is in one struct.

2086
01:26:08,540 --> 01:26:11,540
We'll call this one History right here.

2087
01:26:11,550 --> 01:26:13,210
It's kind of debatable which way to go there.

2088
01:26:14,410 --> 01:26:16,500
So what do

2089
01:26:16,500 --> 01:26:18,580
we want to do when that history identifier happens?

2090
01:26:18,590 --> 01:26:23,450
Well, if we can get our segue's destination view

2091
01:26:23,460 --> 01:26:26,590
controller as a text view controller,

2092
01:26:26,590 --> 01:26:30,760
that's the only thing we need to segue to with this segue.

2093
01:26:30,760 --> 01:26:33,730
Then we're just going to set the tvc's text equal to

2094
01:26:33,730 --> 01:26:35,100
our diagnostic history,

2095
01:26:35,100 --> 01:26:37,630
which I'm going to do by diagnostic history.

2096
01:26:37,630 --> 01:26:39,830
So, it's just going to show this array,

2097
01:26:39,840 --> 01:26:42,300
this diagnostic history array, as a string.

2098
01:26:42,310 --> 01:26:42,940
All right.

2099
01:26:45,640 --> 01:26:48,680
And of course we'll need the default.

2100
01:26:48,680 --> 01:26:50,240
Break out of here.

2101
01:26:51,310 --> 01:26:52,480
Okay? So there we

2102
01:26:52,480 --> 01:26:54,310
have this nice diagnostic history.

2103
01:26:54,320 --> 01:26:57,220
So let's go ahead and run this and see if this is working.

2104
01:27:01,390 --> 01:27:03,190
All right, so again we click here.

2105
01:27:03,190 --> 01:27:04,690
And, well, it seems to be working,

2106
01:27:04,690 --> 01:27:06,560
cuz it's showing no diagnostic history.

2107
01:27:06,560 --> 01:27:08,960
I haven't clicked any of these.

2108
01:27:08,960 --> 01:27:10,390
So, since we added this code,

2109
01:27:10,400 --> 01:27:13,630
anyway, I haven't gotten any diagnosis, so that's good.

2110
01:27:13,630 --> 01:27:14,660
So let's dismiss that.

2111
01:27:14,670 --> 01:27:17,730
And here, I'm gonna go there, go there.

2112
01:27:17,740 --> 01:27:19,100
Oh, it's not working.

2113
01:27:19,100 --> 01:27:19,870
So why is it not working?

2114
01:27:20,940 --> 01:27:23,640
Okay, well, we have this nice diagnostic history, but

2115
01:27:23,640 --> 01:27:25,440
we never actually set it.

2116
01:27:25,440 --> 01:27:27,270
Okay, it's always just empty.

2117
01:27:27,280 --> 01:27:28,540
And so how are we gonna set it, though?

2118
01:27:28,540 --> 01:27:30,980
We are sub class of happiness view controller.

2119
01:27:30,980 --> 01:27:36,110
Well, we can just override our var happiness from

2120
01:27:36,120 --> 01:27:40,080
our super class, and do a did set of our own in here.

2121
01:27:40,090 --> 01:27:43,420
So that happiness has its own did set.

2122
01:27:43,420 --> 01:27:45,120
And we're gonna add our own did set here,

2123
01:27:45,120 --> 01:27:48,960
which is we're gonna say the diagnosing history plus equals

2124
01:27:48,960 --> 01:27:51,360
the happiness, okay?

2125
01:27:51,360 --> 01:27:53,300
You can use plus equals with an array but

2126
01:27:53,300 --> 01:27:55,260
you have to remember that the argument has to be an array,

2127
01:27:55,270 --> 01:27:57,900
so if you just want to add one thing,

2128
01:27:57,900 --> 01:28:00,540
you can just wrap a little array around it here, okay?

2129
01:28:00,540 --> 01:28:04,010
So here, it's perfectly fine to override a bar from your

2130
01:28:04,010 --> 01:28:05,320
super class.

2131
01:28:05,320 --> 01:28:06,640
If you go look at our super class,

2132
01:28:06,640 --> 01:28:10,910
happiness It has a var and even does it's own didsets.

2133
01:28:10,910 --> 01:28:14,910
So I'm over riding this var, and I do my own didset,

2134
01:28:14,920 --> 01:28:18,520
it does not override or replace this didset.

2135
01:28:18,520 --> 01:28:21,390
So it's gonna do this didset, and

2136
01:28:21,390 --> 01:28:23,320
then it's gonna do this didset.

2137
01:28:23,320 --> 01:28:25,260
So, it'll do both of them.

2138
01:28:25,260 --> 01:28:27,190
So it's a really nice feature, the property observers,

2139
01:28:27,190 --> 01:28:29,830
when you override they don't replace the super class as

2140
01:28:29,830 --> 01:28:31,800
one, they add on to it.

2141
01:28:32,770 --> 01:28:34,380
Okay.

2142
01:28:34,380 --> 01:28:36,000
So now our diagnostic history is being added.

2143
01:28:36,000 --> 01:28:37,630
So hopefully now when we go and

2144
01:28:37,640 --> 01:28:39,440
look in our diagnostic history, it will work.

2145
01:28:39,440 --> 01:28:41,200
So here we'll go dancing tree.

2146
01:28:41,210 --> 01:28:42,770
Look up here.

2147
01:28:42,770 --> 01:28:43,870
And look at that!

2148
01:28:43,870 --> 01:28:45,640
We've got our diagnostic history.

2149
01:28:45,640 --> 01:28:47,680
Let's go over and do golden bear.

2150
01:28:47,680 --> 01:28:48,490
Oh.

2151
01:28:48,490 --> 01:28:49,310
That's kind of interesting.

2152
01:28:49,310 --> 01:28:50,480
This is not a very good history.

2153
01:28:50,480 --> 01:28:52,910
It's only remembering the last thing I redo.

2154
01:28:52,920 --> 01:28:56,650
I wonder why it only remembers the last thing I redo.

2155
01:28:56,650 --> 01:28:57,250
That's bad.

2156
01:28:57,250 --> 01:28:58,420
That's a bug.

2157
01:28:58,420 --> 01:29:01,090
So, why has that happened?

2158
01:29:01,090 --> 01:29:05,990
Well, I did it this way to show you, and to remind you,

2159
01:29:05,990 --> 01:29:08,760
that these segues, all of these segues that

2160
01:29:08,760 --> 01:29:13,130
are happening here, they are always creating a new MVC.

2161
01:29:13,130 --> 01:29:17,430
So this segue, when we click on golden bear, dancing tree,

2162
01:29:17,440 --> 01:29:20,400
and it segues to this, it creates a brand new MVC.

2163
01:29:20,410 --> 01:29:23,770
And since this is a brand new diagnosed happiness view

2164
01:29:23,770 --> 01:29:28,140
controller, it's going to get a brand new

2165
01:29:28,150 --> 01:29:31,210
diagnostic history, which is going to be empty.

2166
01:29:31,210 --> 01:29:32,480
So it is constantly going to

2167
01:29:32,480 --> 01:29:34,480
be reentering it every time we segue.

2168
01:29:34,480 --> 01:29:36,200
We really need to

2169
01:29:36,200 --> 01:29:37,920
store this diagnostic history somewhere else.

2170
01:29:37,920 --> 01:29:39,850
We can't just have it be in afar here.

2171
01:29:39,860 --> 01:29:43,620
And a great place to have permanent storage, of course,

2172
01:29:43,620 --> 01:29:46,490
is in its future defaults.

2173
01:29:46,490 --> 01:29:47,880
Okay.

2174
01:29:47,880 --> 01:29:49,260
So let's change this diagnostic history.

2175
01:29:49,260 --> 01:29:52,230
Instead of being a stored property here,

2176
01:29:52,230 --> 01:29:55,370
let's change it to be a computed property.

2177
01:29:55,370 --> 01:29:57,100
So I'm gonna have it be an Int.

2178
01:29:57,100 --> 01:29:59,140
And it's gonna become computed, so

2179
01:29:59,140 --> 01:30:00,470
it's gonna have a get.

2180
01:30:00,470 --> 01:30:01,540
And the set.

2181
01:30:01,540 --> 01:30:03,510
And in the get and the set here, and

2182
01:30:03,510 --> 01:30:05,570
I'm gonna go into user defaults.

2183
01:30:07,110 --> 01:30:09,380
Put this diagnostic history into user defaults, and

2184
01:30:09,380 --> 01:30:10,880
out of user defaults.

2185
01:30:10,880 --> 01:30:13,110
Since I'm going to be using user defaults,

2186
01:30:13,120 --> 01:30:16,950
I'm just gonna create a little private let called defaults.

2187
01:30:16,950 --> 01:30:17,920
Which is just gonna be the

2188
01:30:17,920 --> 01:30:20,450
NSUserDefaults.standardUserDe- faults.

2189
01:30:20,460 --> 01:30:23,160
You remember this is like a shared version of any of

2190
01:30:23,160 --> 01:30:24,460
those UserDefaults that we get.

2191
01:30:24,460 --> 01:30:27,060
The whole app is gonna be sharing this, and

2192
01:30:27,060 --> 01:30:31,030
using it to read and write from NSUserDefaults.

2193
01:30:31,030 --> 01:30:32,110
Okay. This is nice,

2194
01:30:32,110 --> 01:30:33,200
it's convenient to have this.

2195
01:30:33,200 --> 01:30:35,000
Makes the code a little more readable to

2196
01:30:35,000 --> 01:30:36,300
have this be repeated everywhere,

2197
01:30:36,300 --> 01:30:39,800
versus just this little short thing right here.

2198
01:30:39,810 --> 01:30:42,240
All right. So how am I going to get the

2199
01:30:42,240 --> 01:30:45,580
defaults and set the defaults, well let's do set first.

2200
01:30:45,580 --> 01:30:48,410
Once we set maybe it will be easier to imagine our get.

2201
01:30:48,410 --> 01:30:49,780
So I am just going to go to defaults,

2202
01:30:49,780 --> 01:30:53,680
I am going to set an object and remember that this is

2203
01:30:53,680 --> 01:30:56,480
any object, but it has to be a property list, okay?

2204
01:30:56,490 --> 01:30:59,220
But luckily an array of ints,

2205
01:30:59,220 --> 01:31:02,320
which is what our diagnostic history is.

2206
01:31:02,330 --> 01:31:04,630
Sorry, this isn't an array of ints,

2207
01:31:04,630 --> 01:31:09,160
this diagnose is an array of ints,

2208
01:31:09,160 --> 01:31:12,130
that is a property so luckily, we can do that.

2209
01:31:12,130 --> 01:31:14,500
And here we're in the setting, okay, so

2210
01:31:14,500 --> 01:31:16,840
we're just gonna put our new value here.

2211
01:31:16,840 --> 01:31:19,770
So that's gonna be an array of ints, the new value.

2212
01:31:19,770 --> 01:31:22,910
For key we need a key, so let's go back down to

2213
01:31:22,910 --> 01:31:25,940
our constants here and add another one, and

2214
01:31:25,950 --> 01:31:30,250
this is going to be our called defaults key, for the history.

2215
01:31:30,250 --> 01:31:34,320
And we can really put anything we want in here, any name for

2216
01:31:34,320 --> 01:31:38,220
the key, but remember that default is a database that is

2217
01:31:38,220 --> 01:31:41,790
shared in our entire application, so we might want

2218
01:31:41,790 --> 01:31:44,860
to kind of name space it a little bit by saying

2219
01:31:44,860 --> 01:31:48,430
diagnosedHappinessViewControl- ler.History or

2220
01:31:48,430 --> 01:31:50,130
something like that.

2221
01:31:50,130 --> 01:31:54,300
So this is just a naming convention to throw the name

2222
01:31:54,300 --> 01:31:57,300
of the ViewContoller or the name of the class in general.

2223
01:31:57,310 --> 01:31:59,340
That is writing to the default in front.

2224
01:32:00,510 --> 01:32:01,880
You don't have to do this.

2225
01:32:01,880 --> 01:32:05,280
This is purely something you just want to be consistent

2226
01:32:05,280 --> 01:32:06,750
with in your whole application and

2227
01:32:06,750 --> 01:32:09,150
how you divide up this name space for the defaults,

2228
01:32:09,150 --> 01:32:12,920
because this is a global name space inside your application.

2229
01:32:14,020 --> 01:32:18,060
So this will be our History and DefaultsKey.

2230
01:32:18,060 --> 01:32:21,630
All right, so that's the new write our any time we set this

2231
01:32:21,630 --> 01:32:25,800
diagnostic history it's gonna write it out to user defaults.

2232
01:32:25,800 --> 01:32:27,100
Then similarly we can get it

2233
01:32:27,100 --> 01:32:30,970
out by just returning defaults.objectForKey.

2234
01:32:30,970 --> 01:32:32,130
Same thing.

2235
01:32:32,140 --> 01:32:33,300
This History.DefaultsKey.

2236
01:32:33,300 --> 01:32:37,440
But one thing I wanna make sure of is that it's

2237
01:32:37,440 --> 01:32:39,240
always an array of int.

2238
01:32:39,240 --> 01:32:41,710
So I'm gonna do as array of int.

2239
01:32:41,710 --> 01:32:45,150
And if that returns nil then I'm gonna turn empty array.

2240
01:32:45,150 --> 01:32:47,530
Okay. So if I have

2241
01:32:47,530 --> 01:32:49,920
never saved the diagnostic history to the defaults for

2242
01:32:49,920 --> 01:32:52,020
example, then this is going to come back nil,

2243
01:32:52,020 --> 01:32:54,620
okay, but I never have saved it before.

2244
01:32:54,620 --> 01:32:55,690
So we'll start out with a nice,

2245
01:32:55,690 --> 01:32:56,920
empty array in that case.

2246
01:32:58,330 --> 01:33:00,430
Okay.

2247
01:33:00,430 --> 01:33:02,530
And also, if somehow some junk had got written here that

2248
01:33:02,530 --> 01:33:03,690
wasn't in an array of int for

2249
01:33:03,700 --> 01:33:05,600
some reason, then this would also be nil and

2250
01:33:05,600 --> 01:33:06,900
we would start out with a fresh array.

2251
01:33:06,900 --> 01:33:09,670
It would be kind of a weird case, but anyway so you

2252
01:33:09,670 --> 01:33:14,100
can see a simple way here to read and write from default.

2253
01:33:14,110 --> 01:33:19,270
Okay make sense, all right so now let's go run around and

2254
01:33:19,280 --> 01:33:22,310
see if this fixed our problem, of our defaults not

2255
01:33:22,310 --> 01:33:24,650
lying around, so let's see golden bear, dancing tree,

2256
01:33:24,650 --> 01:33:26,350
buckeye, put a whole bunch in there,

2257
01:33:26,350 --> 01:33:28,720
history it's remembering them all.

2258
01:33:28,720 --> 01:33:31,800
Okay.

2259
01:33:31,800 --> 01:33:34,890
Golden Bear, 0, Dancing Tree, 100.

2260
01:33:34,890 --> 01:33:36,160
Okay?

2261
01:33:36,160 --> 01:33:38,460
That looks quite awesome.

2262
01:33:38,460 --> 01:33:39,660
All right.

2263
01:33:39,660 --> 01:33:40,860
Let's try one other thing here.

2264
01:33:40,860 --> 01:33:42,060
Let's go try running this on an iPhone.

2265
01:33:42,060 --> 01:33:45,600
Let's see how this works on an iPhone, with our great new

2266
01:33:45,600 --> 01:33:48,730
feature here, and we'll see what it looks like.

2267
01:33:52,710 --> 01:33:54,870
All right so we got there a gold bear.

2268
01:33:54,870 --> 01:33:56,370
We got a dancing tree.

2269
01:33:56,380 --> 01:33:58,510
We got the buckeye.

2270
01:33:58,510 --> 01:34:01,010
Okay, let's see that history.

2271
01:34:01,010 --> 01:34:05,980
Whoa, that looks really, really bad, okay?

2272
01:34:05,980 --> 01:34:07,020
Well, hm.

2273
01:34:07,020 --> 01:34:08,520
So it didn't put up the history in

2274
01:34:08,520 --> 01:34:10,550
the little popover like that.

2275
01:34:10,550 --> 01:34:12,620
It took over the whole screen.

2276
01:34:12,620 --> 01:34:16,120
Modal, it's what a modal segue looks like.

2277
01:34:16,130 --> 01:34:17,390
And I put it up here, and

2278
01:34:17,390 --> 01:34:19,660
smashed into my carrier thing up here, and

2279
01:34:19,660 --> 01:34:22,800
there's no way to get out of here there's no done button or

2280
01:34:22,800 --> 01:34:26,030
dismiss or something, because in a popover we don't need to

2281
01:34:26,030 --> 01:34:28,770
dismiss because you just click on the background.

2282
01:34:28,770 --> 01:34:32,870
So you know, this is really a small amount of information I

2283
01:34:32,870 --> 01:34:36,810
could have put it in a popover there why did iOS adapt that

2284
01:34:36,810 --> 01:34:40,240
popover for the iPhone and put it to your screen?

2285
01:34:40,250 --> 01:34:42,580
Well, because it doesn't really know how big this is

2286
01:34:42,580 --> 01:34:45,050
going to be and how much data is going to be drawn or

2287
01:34:45,050 --> 01:34:48,690
whatever until it's being displayed.

2288
01:34:48,690 --> 01:34:51,890
And so on an iPhone to be safe it always adapts

2289
01:34:51,890 --> 01:34:54,820
popovers to make them full screen presentation like

2290
01:34:54,830 --> 01:34:55,990
this to take over the screen.

2291
01:34:56,990 --> 01:34:59,060
Okay, but in this case, we don't actually want that.

2292
01:34:59,060 --> 01:35:00,700
We dont want that adaptation behavior.

2293
01:35:00,700 --> 01:35:02,900
We want to prevent this adaptation behavior so

2294
01:35:02,900 --> 01:35:06,200
they just keep putting it in its nice little popover.

2295
01:35:06,200 --> 01:35:07,770
It'll be perfectly fine in iPad and

2296
01:35:07,770 --> 01:35:09,440
it will be perfectly fine for iPhone.

2297
01:35:09,440 --> 01:35:13,140
So, how do we prevent this adaptation behavior

2298
01:35:13,140 --> 01:35:14,610
from happening?

2299
01:35:15,610 --> 01:35:19,540
To do that, we need to get at that popover presentation

2300
01:35:19,550 --> 01:35:24,180
controller I was talking to you about in the slides.

2301
01:35:24,180 --> 01:35:26,120
And it's pretty easy to get ahold of it.

2302
01:35:26,120 --> 01:35:27,550
Inside our prepare-

2303
01:35:27,550 --> 01:35:29,420
So here's our prepare in our diagnosed,

2304
01:35:29,420 --> 01:35:32,720
diagnosed happiness view controller right here.

2305
01:35:32,720 --> 01:35:36,290
The same place down here where we're doing the preparation

2306
01:35:36,290 --> 01:35:40,500
happening, we can also say if we can let,

2307
01:35:40,500 --> 01:35:43,330
ppc I'll call it, equal the text view

2308
01:35:43,330 --> 01:35:46,830
controller's popover presentation controller.

2309
01:35:46,840 --> 01:35:49,450
Okay.

2310
01:35:49,460 --> 01:35:52,070
So, this is a method in UI viewcontroller and

2311
01:35:52,080 --> 01:35:54,740
it'll return nil if you're not currently in the process of

2312
01:35:54,740 --> 01:35:57,310
being presented in a popover.

2313
01:35:57,310 --> 01:36:00,280
So if this segue if we changed this segue to

2314
01:36:00,280 --> 01:36:03,020
segue somehow else other than a popover,

2315
01:36:03,020 --> 01:36:06,990
maybe we wanted to go full modal for some reason or

2316
01:36:06,990 --> 01:36:09,690
we decided to push it on a navigation stack or

2317
01:36:09,690 --> 01:36:11,820
whatever then this would return nill and

2318
01:36:11,830 --> 01:36:14,060
so nothing that I'm gonna do right here would even happen.

2319
01:36:15,530 --> 01:36:18,050
So what am I going to do?

2320
01:36:18,050 --> 01:36:20,560
I'm just going to set the popoverPresentationControll-

2321
01:36:20,570 --> 01:36:24,670
er's delegate to myself, and that's because the popover

2322
01:36:24,670 --> 01:36:27,340
controller's delegate allows you to

2323
01:36:27,340 --> 01:36:31,510
have someone else control the way the presentation works.

2324
01:36:31,510 --> 01:36:35,340
And this is the first time you're seeing the [COUGH]

2325
01:36:35,350 --> 01:36:39,380
present the idea of a delegate in an action in an iOS.

2326
01:36:39,380 --> 01:36:41,280
Now you remember when we set ourselves as

2327
01:36:41,280 --> 01:36:43,980
a delegate you can see there's an error right here it says

2328
01:36:43,990 --> 01:36:46,690
DiagnosedHappinessViewContro- ller does not conform to

2329
01:36:46,690 --> 01:36:48,520
this protocol

2330
01:36:48,520 --> 01:36:50,360
UIPopoverPrsentationControlle- rDelegate.

2331
01:36:50,360 --> 01:36:54,630
And that's true, because up here we have to say we are a

2332
01:36:54,630 --> 01:36:56,760
UIPopoverPresentationControll- erDelegate.

2333
01:36:57,730 --> 01:36:59,060
Okay? And now,

2334
01:36:59,070 --> 01:37:03,770
once we put this on here, we have to go down here and

2335
01:37:03,770 --> 01:37:08,440
actually implement that method, the method we want.

2336
01:37:08,440 --> 01:37:10,540
And this method that we want is called

2337
01:37:10,540 --> 01:37:13,980
adaptive presentation style for presentation controller.

2338
01:37:15,050 --> 01:37:18,000
Okay?

2339
01:37:18,000 --> 01:37:20,950
And this is basically saying, here's a popover controller.

2340
01:37:20,950 --> 01:37:23,180
[INAUDIBLE] You know how, in a delegate method, we

2341
01:37:23,190 --> 01:37:25,850
usually pass along the thing that's doing the delegation.

2342
01:37:25,860 --> 01:37:29,120
So this is that same popover presentation controller being

2343
01:37:29,130 --> 01:37:30,790
passed back to us.

2344
01:37:30,790 --> 01:37:35,400
And it's saying, please return a presentation style which you

2345
01:37:35,400 --> 01:37:38,760
want and when you're adapting on the iPhone.

2346
01:37:38,770 --> 01:37:43,170
So I'm gonna return the UI modal presentation style none,

2347
01:37:43,170 --> 01:37:46,440
which means don't adapt, Okay do not when you're on

2348
01:37:46,440 --> 01:37:49,370
iPhone do no adaptations do what you normally do,

2349
01:37:50,310 --> 01:37:51,840
which is put the pop over in a little window.

2350
01:37:53,310 --> 01:37:54,480
And that's it. That's all I

2351
01:37:54,480 --> 01:37:56,310
need to do to suppress that.

2352
01:37:56,310 --> 01:37:58,680
Now, by the way,

2353
01:37:58,680 --> 01:38:01,050
in addition to PPC delegating inside here, I could, there

2354
01:38:01,050 --> 01:38:04,690
are other methods in popover presentation controller.

2355
01:38:04,690 --> 01:38:10,190
You can go take a look at, and they will show you things that

2356
01:38:10,190 --> 01:38:12,860
you can find out about what's going on with the popover.

2357
01:38:12,860 --> 01:38:16,360
But setting its delegates so that you can control that

2358
01:38:16,370 --> 01:38:19,230
adaptation is a popular thing to want to do.

2359
01:38:19,240 --> 01:38:20,300
All right.

2360
01:38:20,300 --> 01:38:21,840
So let's go try it now on the iPhone again.

2361
01:38:21,840 --> 01:38:25,770
Here we go let's hit history and

2362
01:38:25,770 --> 01:38:28,670
now it's working okay coming up in the pop over here.

2363
01:38:28,680 --> 01:38:31,980
Let's go add history let's go another dancing tree over here

2364
01:38:31,980 --> 01:38:34,780
now we've dancing tree added there.

2365
01:38:34,780 --> 01:38:37,150
Okay?

2366
01:38:37,150 --> 01:38:39,520
And it'll work fine landscape or portrait.

2367
01:38:42,590 --> 01:38:42,990
Okay?

2368
01:38:42,990 --> 01:38:43,390
Questions about that?

2369
01:38:44,560 --> 01:38:46,440
All right.

2370
01:38:46,440 --> 01:38:48,320
The last thing I want to do with the pop over is

2371
01:38:48,330 --> 01:38:50,160
when we ran this pop over,

2372
01:38:50,160 --> 01:38:51,990
over here, you notice that it's kind of big.

2373
01:38:52,000 --> 01:38:54,600
It's covering the whole smiley face for no reason,

2374
01:38:54,600 --> 01:38:58,530
because it really only needs to be big enough to hold that.

2375
01:38:58,540 --> 01:39:02,300
Well, that's because really again the popover presentation

2376
01:39:02,310 --> 01:39:05,710
controller really has no idea how big this information is

2377
01:39:05,710 --> 01:39:06,340
in here.

2378
01:39:07,380 --> 01:39:09,240
And, but there is a way to tell it.

2379
01:39:09,240 --> 01:39:11,910
And if you think about who knows what the size of

2380
01:39:11,910 --> 01:39:15,250
this is best, well it's the text view controller.

2381
01:39:15,250 --> 01:39:16,400
Cuz the text view

2382
01:39:16,400 --> 01:39:17,550
controller's the one that's gonna display this.

2383
01:39:17,550 --> 01:39:20,950
It knows what it's preferred size would be.

2384
01:39:20,950 --> 01:39:23,050
So as we're talking about in the slides.

2385
01:39:23,060 --> 01:39:25,090
Let's go ahead and make it so

2386
01:39:25,090 --> 01:39:27,790
the text view controller reports its preferred size.

2387
01:39:27,790 --> 01:39:33,430
So I'm gonna go over here to the text view controller.

2388
01:39:33,430 --> 01:39:35,320
Okay.

2389
01:39:35,320 --> 01:39:37,200
[COUGH] Now the prefered size is just a var in

2390
01:39:37,200 --> 01:39:41,300
UIV controller so the text view controller could set that

2391
01:39:41,310 --> 01:39:45,640
somewhere, it could just say preferred content size equals

2392
01:39:45,640 --> 01:39:49,910
something, but since this is a subclass UIV controller and

2393
01:39:49,910 --> 01:39:55,150
the content size would change every time this is changing.

2394
01:39:55,150 --> 01:39:57,050
And also might change depending on

2395
01:39:57,050 --> 01:39:59,720
how big a space the popover is being popped into.

2396
01:40:01,060 --> 01:40:06,560
We can actually do better here by overriding the var

2397
01:40:06,560 --> 01:40:12,400
preferredContentSize, which is a CGSsize.

2398
01:40:12,400 --> 01:40:16,730
I'm going to override it and do the get set.

2399
01:40:16,740 --> 01:40:19,200
Okay, so it's going to be a computed property,

2400
01:40:19,210 --> 01:40:20,940
get and set.

2401
01:40:20,940 --> 01:40:23,440
And on the setting side of this,

2402
01:40:23,440 --> 01:40:25,440
if someone set the preferred content size,

2403
01:40:25,440 --> 01:40:27,140
I'm just gonna let my super class.

2404
01:40:27,150 --> 01:40:32,480
Preferred content size do its thing, okay?

2405
01:40:32,480 --> 01:40:33,920
We'll just let the new value do that.

2406
01:40:33,920 --> 01:40:36,180
So I'm going to let my super class handle it or

2407
01:40:36,190 --> 01:40:36,880
someone sets it.

2408
01:40:37,920 --> 01:40:40,920
All right?

2409
01:40:40,920 --> 01:40:43,920
But if someone tries to get it, then if my text view has

2410
01:40:43,930 --> 01:40:46,890
been set, so if this outlet has been set, and if I'm in

2411
01:40:46,900 --> 01:40:52,100
the middle of being presented on screen, okay, then I can

2412
01:40:52,100 --> 01:40:55,100
ask the text view what its preferred size would be.

2413
01:40:56,100 --> 01:40:58,540
Okay, so we're going to let the textView do the work here.

2414
01:40:58,540 --> 01:40:59,870
So what does that look like?

2415
01:41:01,510 --> 01:41:03,910
So, we might say,

2416
01:41:03,910 --> 01:41:09,110
for example here, if textView does not equal nil.

2417
01:41:09,110 --> 01:41:13,180
Oops, I've got sticky keys on here, so

2418
01:41:13,180 --> 01:41:15,480
you see that in the lower corner there.

2419
01:41:15,490 --> 01:41:18,650
If textView doesn't equal nil, and if we're

2420
01:41:18,660 --> 01:41:22,120
being presented right now so how can we find that out?

2421
01:41:22,130 --> 01:41:25,530
UIViewController has another great bar

2422
01:41:25,530 --> 01:41:28,760
called presentingViewController.

2423
01:41:29,900 --> 01:41:31,900
The presentingViewController is the view controller that

2424
01:41:31,900 --> 01:41:35,940
is currently presenting you via some sort of segue.

2425
01:41:35,940 --> 01:41:39,610
So, in the popover case, it's going to be that diagnosed

2426
01:41:39,610 --> 01:41:41,840
view controller's gonna be presenting me.

2427
01:41:41,840 --> 01:41:44,610
But whoever it is, I can check to make sure that's not nil.

2428
01:41:45,550 --> 01:41:48,450
So, this is only gonna happen right here,

2429
01:41:48,450 --> 01:41:51,180
in the case where I'm in the middle of a presentation.

2430
01:41:51,180 --> 01:41:53,550
Okay, also my text here not to be no it's not clear that I

2431
01:41:53,550 --> 01:41:56,720
really need to set this because, probably my

2432
01:41:56,720 --> 01:41:59,690
outlets are all gonna be set before this gets there.

2433
01:41:59,690 --> 01:42:03,790
But just to be safe I'll set both of these things and

2434
01:42:03,800 --> 01:42:06,600
in this case I'm gonna let the text view tell me a size that

2435
01:42:06,600 --> 01:42:10,500
fits inside my presenting view controllers.

2436
01:42:10,500 --> 01:42:13,030
Viewbounds.size.

2437
01:42:14,040 --> 01:42:15,300
'Kay?

2438
01:42:15,300 --> 01:42:18,210
And this of course we will need to unwrap.

2439
01:42:18,210 --> 01:42:20,090
But it's okay,

2440
01:42:20,090 --> 01:42:21,970
cuz we checked to make sure it's not nil first.

2441
01:42:21,980 --> 01:42:23,760
'Kay?

2442
01:42:23,760 --> 01:42:25,540
So this is the bounds.size of our presentingViewController.

2443
01:42:25,550 --> 01:42:27,710
So in the diagnosedHappinessViewContro-

2444
01:42:27,720 --> 01:42:30,920
ller case, it's the whole seam, basically.

2445
01:42:30,920 --> 01:42:34,190
And we're just gonna see what is a good size that fits.

2446
01:42:34,190 --> 01:42:36,860
Now this is only a preferred content size.

2447
01:42:36,860 --> 01:42:39,420
So if this size that fits were really huge, for

2448
01:42:39,430 --> 01:42:43,230
example, the popover's still going to limit the size to

2449
01:42:43,230 --> 01:42:45,130
whatever its restrictions are, okay?

2450
01:42:45,130 --> 01:42:47,310
So we just prefer.

2451
01:42:47,320 --> 01:42:49,500
This is not actual content size, it's just preferred.

2452
01:42:49,500 --> 01:42:50,770
Now, what if we're not in

2453
01:42:50,770 --> 01:42:52,030
the middle of presenting right here?

2454
01:42:52,040 --> 01:42:55,610
Well, then once again I'm going to let my

2455
01:42:55,610 --> 01:42:58,940
super class do the work here so whatever it

2456
01:42:58,940 --> 01:43:01,880
would normally return I'm going to have it return.

2457
01:43:01,880 --> 01:43:04,780
So remember I'm overriding this my super class.

2458
01:43:04,780 --> 01:43:06,130
So really I'm just getting involved in

2459
01:43:06,130 --> 01:43:07,480
this one case where I happen to be in the middle of

2460
01:43:07,480 --> 01:43:10,250
presenting something, then I pretty much know what my

2461
01:43:10,250 --> 01:43:13,490
size is based on my text field okay?

2462
01:43:14,490 --> 01:43:17,690
So let's run and see how that fixes it.

2463
01:43:17,690 --> 01:43:20,560
All right, so the goal is to get our history, excellent.

2464
01:43:20,560 --> 01:43:23,430
Now notice also, our history was remembered even

2465
01:43:23,430 --> 01:43:26,670
after we quit our app and run it again because we are using

2466
01:43:26,670 --> 01:43:30,300
defaults which these defaults remember things when it quits.

2467
01:43:30,300 --> 01:43:34,570
So here we got 0, 150, 100, let's go back over here and

2468
01:43:34,570 --> 01:43:35,470
do nothing.

2469
01:43:35,480 --> 01:43:36,610
25.

2470
01:43:36,610 --> 01:43:37,510
Looks good.

2471
01:43:37,510 --> 01:43:40,040
Let's go back and do Golden Bear.

2472
01:43:40,050 --> 01:43:42,780
Zero, so it's working beautifully there.

2473
01:43:42,780 --> 01:43:46,150
Okay, again it works no matter what size you use.

2474
01:43:46,150 --> 01:43:52,520
Go on there and it will also work on the iPad as well.

2475
01:43:52,520 --> 01:43:57,660
There we go.

2476
01:43:57,660 --> 01:43:58,730
So, there's the history.

2477
01:43:58,730 --> 01:44:00,530
Shows it up there.

2478
01:44:00,530 --> 01:44:02,730
There too.

2479
01:44:02,730 --> 01:44:05,930
Okay, so that's it for popovers, but we also managed

2480
01:44:05,930 --> 01:44:09,040
to cover a couple other things there along the way.

2481
01:44:09,040 --> 01:44:12,200
Most notably was the polymorphism of

2482
01:44:12,210 --> 01:44:14,010
view controllers.

2483
01:44:14,940 --> 01:44:17,740
And we were in our storyboard here,

2484
01:44:17,740 --> 01:44:20,450
we ended up actually creating a sub class,

2485
01:44:20,450 --> 01:44:23,580
DiagnosedHappinessViewContro- ller here to add some more

2486
01:44:23,580 --> 01:44:25,480
functionality, okay?

2487
01:44:25,480 --> 01:44:27,620
And that is not an edge case,

2488
01:44:27,620 --> 01:44:28,950
that's a common thing you wanna do.

2489
01:44:28,950 --> 01:44:31,650
You have some reusable happiness view controller or

2490
01:44:31,660 --> 01:44:33,620
something like happiness view controller.

2491
01:44:33,620 --> 01:44:36,660
You wanna use it, but you need to add something to it and

2492
01:44:36,660 --> 01:44:37,460
you don't wanna change it.

2493
01:44:37,460 --> 01:44:38,460
Well, that's exactly what

2494
01:44:38,460 --> 01:44:39,690
object oriented programming is for!

2495
01:44:39,700 --> 01:44:41,800
You can create a subclass of it and

2496
01:44:41,800 --> 01:44:48,600
add the methods that you wanna add to it, to your diagnosed.

2497
01:44:48,600 --> 01:44:50,570
And what's kind of nice too

2498
01:44:50,570 --> 01:44:52,540
is diagnosed view controller contains all the stuff that

2499
01:44:52,540 --> 01:44:56,110
has to do with the diagnostic business and nothing else.

2500
01:44:56,110 --> 01:44:59,850
So this is a very nice class well contained,

2501
01:44:59,850 --> 01:45:02,950
only has the diagnostic stuff in it.

2502
01:45:02,950 --> 01:45:06,050
Okay, so that's it, and you don't need this for

2503
01:45:06,050 --> 01:45:09,490
your homework per se, but there is an extra credit item

2504
01:45:09,490 --> 01:45:13,320
to add a popover so hopefully you'll decide to tackle that.

2505
01:45:15,430 --> 01:45:15,460
>> For more, please visit us at stanford.edu.

